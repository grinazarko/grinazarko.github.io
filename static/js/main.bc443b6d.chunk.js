(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{189:function(e,t,a){},191:function(e,t,a){},192:function(e,t,a){},196:function(e,t){},244:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c),o=(a(189),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,344)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))}),i=a(79),l=a(18),u=a(7),d=a.n(u),b=a(19),j=a(5),f=a(20),p=(a(191),a(331)),h=(a(192),a(1)),m=function(){var e=Object(n.useContext)(re),t=e.errorsState.errors,a=e.errorsDispatch;return Object(h.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(h.jsxs)(p.a,{variant:"danger",onClose:function(){a({type:"cleanErrors"})},dismissible:!0,children:[Object(h.jsx)(p.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(h.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(h.jsx)(p.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})},O=a(15),v=a(2),x=a(25),g=a.n(x),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},_={list:[],hasMore:!0,limit:15,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var a=t.payload.map((function(e){return e.id})),n=g.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,bots:n});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var r=t.payload.map((function(e){return e.id})),c=g.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),bots:Object(v.a)(Object(v.a)({},e.bots),c)});case"setBotsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setBot":return Object(v.a)(Object(v.a)({},e),{},{bots:Object(v.a)(Object(v.a)({},e.bots),{},Object(O.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var B={deals:{}};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getDealsList":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(O.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{list:t.payload.deals,period:t.payload.periodInDays})))});case"setOffset":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(O.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{offset:t.payload.offset})))});case"resetDeals":if(t.payload.botId in e.deals){var a=g.a.omit(e.deals,[t.payload.botId]);return Object(v.a)(Object(v.a)({},e),{},{deals:a})}return Object(v.a)({},e);default:throw new Error}}var w=a(147),I=a.n(w),k=a(148),S=a.n(k),T=new S.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),D={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},F=new URLSearchParams(window.location.search).get("api_key")||"",P=new URLSearchParams(window.location.search).get("secret")||"",M=new S.a(D);function R(e){M=new S.a(Object(v.a)(Object(v.a)({},D),{},{id:e}))}function A(){return M}function E(e,t){return I.a.algo.HMAC.create(I.a.algo.SHA256,t).update(e).finalize().toString(I.a.enc.Hex)}var L=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return a.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:F,Signature:E(t,P)}})}))},H=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c,s){var o,i,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>6&&void 0!==p[6]&&p[6],i=n.split("-"),l=Object(j.a)(i,2),u=l[0],b=l[1],f=function(){return"/public/api/ver1/bots?offset=".concat(o?0:t,"&limit=").concat(a,"&sort_by=").concat(u,"&sort_direction=").concat(b).concat(r?"&scope=".concat(r):"").concat(c?"&strategy=".concat(c):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",L("GET",f()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("GET","/public/api/ver1/bots/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("GET","/public/api/ver1/deals/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("GET","/public/api/ver1/accounts").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(n,"&scope=").concat(r,"&order=").concat(c),M).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=a(26),q=(a(243),a(182)),W=(a(244),function(){return Object(h.jsx)("div",{className:"NavBar",children:Object(h.jsxs)("div",{className:"NavBarContainer",children:[Object(h.jsx)("div",{className:"LogoContainer",children:Object(h.jsx)("img",{className:"Logo",src:"BotAn__icon.png",alt:"logo"})}),Object(h.jsx)("div",{className:"Navigation",children:Object(h.jsxs)(q.a,{activeKey:"/",children:[Object(h.jsx)(q.a.Item,{children:Object(h.jsx)(q.a.Link,{children:"DCA Bots"})}),Object(h.jsx)(q.a.Item,{children:Object(h.jsx)(q.a.Link,{eventKey:"link-1",disabled:!0,children:"Grid Bots"})}),Object(h.jsx)(q.a.Item,{children:Object(h.jsx)(q.a.Link,{eventKey:"link-2",disabled:!0,children:"Smart Trades"})}),Object(h.jsx)(q.a.Item,{children:Object(h.jsx)(q.a.Link,{eventKey:"disabled",disabled:!0,children:"Accounts"})})]})}),Object(h.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(h.jsx)("span",{className:"SupportLabel",children:"Community"}),Object(h.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]})})});$.f.register($.e,$.n,$.l,$.c,$.s,$.t,$.k,$.i,$.r,$.h,$.a);var J={accounts:[]},Z={strategies:[]},Q={errors:[]};function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var a=new Set(e.errors);return a.add(t.payload),{errors:Object(f.a)(Array.from(a))};case"cleanErrors":return{errors:[]};default:throw new Error}}function ee(){var e=arguments.length>1?arguments[1]:void 0;if("setAccounts"===e.type)return{accounts:Object(f.a)(e.payload)};throw new Error}function te(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(f.a)(e.payload)};throw new Error}var ae=Object(n.createContext)({accountsState:J,accountsDispatch:function(e){}}),ne=Object(n.createContext)({strategiesState:Z,strategiesDispatch:function(e){}}),re=Object(n.createContext)({errorsState:Q,errorsDispatch:function(e){}}),ce=Object(n.createContext)({botsState:_,botsDispatch:function(e){}}),se=Object(n.createContext)({dealsState:B,dealsDispatch:function(e){}});var oe=function(){var e=Object(n.useReducer)(C,_,y),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(n.useReducer)(ee,J),s=Object(j.a)(c,2),o=s[0],i=s[1],u=Object(n.useReducer)(te,Z),f=Object(j.a)(u,2),p=f[0],O=f[1],v=Object(n.useReducer)(X,Q),x=Object(j.a)(v,2),g=x[0],w=x[1],I=Object(n.useReducer)(N,B),k=Object(j.a)(I,2),S=k[0],T=k[1],D=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:t=e.sent,i({type:"setAccounts",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i({type:"setAccounts",payload:[]}),w({type:"addError",payload:"Error when fetching accounts list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z();case 3:t=e.sent,O({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),O({type:"setStrategies",payload:[]}),w({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){D(),F()}),[]),Object(h.jsx)(re.Provider,{value:{errorsState:g,errorsDispatch:w},children:Object(h.jsx)(ne.Provider,{value:{strategiesState:p,strategiesDispatch:O},children:Object(h.jsx)(ae.Provider,{value:{accountsState:o,accountsDispatch:i},children:Object(h.jsx)(ce.Provider,{value:{botsState:a,botsDispatch:r},children:Object(h.jsx)(se.Provider,{value:{dealsState:S,dealsDispatch:T},children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(W,{}),Object(h.jsx)(l.a,{}),Object(h.jsx)(m,{})]})})})})})})},ie=a(11),le=a.n(ie),ue=a(179),de=a(336),be=a(337),je=a(338),fe=a(68);function pe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(b.a)(d.a.mark((function e(t,a){var n,r,c,s,o,i,l,u,b,j,f,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&a.id){e.next=2;break}return e.abrupt("return",0);case 2:if(n=parseInt(t.max_active_deals),r=parseFloat(t.base_order_volume),c=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),o=parseFloat(t.leverage_custom_value),i=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],u=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,Oe(a.market_code,l,r,s);case 13:b=e.sent,r=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,Oe(a.market_code,u,r,s);case 21:j=e.sent,r=j.baseOrderVolume,s=j.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,ve(t.account_id,l,u,a.market_code,t.strategy,r,s);case 29:f=e.sent,r=f.baseOrderVolume,s=f.safetyOrderVolume;case 32:return o&&(r/=o,s/=o),p=0,1!==i&&c>1?(h=s*(1-Math.pow(i,c))/(1-i),p=(h+r)*n):p=(c*s+r)*n,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var me=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(1));case 4:return e.next=6,L("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t,a);case 2:return c=e.sent,e.abrupt("return",{baseOrderVolume:n*c,safetyOrderVolume:r*c});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),ve=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c,s,o){var i,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xe(r)&&"short"===c?n:a,e.next=3,L("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,u=l.find((function(e){return e.currency_code===i})),b=0,u&&(b=(parseFloat(u.equity)-parseFloat(u.on_orders))*parseFloat(u.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*b/100,safetyOrderVolume:o*b/100});case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,s,o){return e.apply(this,arguments)}}(),xe=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function ge(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}var ye=function(e){var t=e.value,a=e.currency,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return a.includes("BTC")?new Intl.NumberFormat("en-IN",{maximumFractionDigits:6,signDisplay:n}).format(t):"marketPrice"===a?new Intl.NumberFormat("en-IN",{maximumFractionDigits:8,signDisplay:n}).format(t):new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,signDisplay:n}).format(t)};function _e(){return(_e=Object(b.a)(d.a.mark((function e(t,a){var n,r,c,s,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=n,s=0,!t.maxUsage){e.next=8;break}s=t.maxUsage,e.next=11;break;case 8:return e.next=10,pe(t,a);case 10:s=e.sent;case 11:return c="short"===t.strategy&&xe(a.market_code)?r:n,e.next=14,me(a.market_code,c);case 14:return o=e.sent,e.abrupt("return",{value:s/o,currency:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var Be=function(e,t){return Math.ceil(e.diff(t)/36e5)},Ne=function(e,t){return Math.ceil(e.diff(t)/864e5)},we=function(e){return Be(le()(),le()(e.closed_at))},Ie=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,r,c,s,o,i,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:30,n=l.length>2&&void 0!==l[2]?l[2]:function(e){},r=24*a,c=1e3,s=0,o=[],i=function(){var e=Object(b.a)(d.a.mark((function e(){var a,l,u,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(t,s,c,"finished","closed_at");case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(l=a.slice(-1),u=Object(j.a)(l,1),b=u[0],!(a.length===c&&we(b)<=r)){e.next=14;break}return s+=c,o=[].concat(Object(f.a)(o),Object(f.a)(a)),n(s),e.next=12,i();case 12:e.next=16;break;case 14:p=a.filter((function(e){return we(e)<=r})),o=[].concat(Object(f.a)(o),Object(f.a)(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,i();case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(e){var t=g.a.groupBy(e,(function(e){return le()(e.closed_at).format("YYYY-MM-DD")}));return g.a.mapValues(t,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Object(f.a)(new Array(e)).map((function(e,t){return le()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse()},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Se(t),n=a.map((function(t){return t in e?e[t]:0})),r=a.map((function(e){return le()(e,"YYYY-MM-DD")}));return[r,n]},De=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Te(e,t),n=0,r=a[1].map((function(e){var t=n+e;return n=t,t}));return[a[0],r]},Fe=function(e){var t=ke(e),a=e.length>0?Ne(le()(),le()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Te(t,a<30?30:a+1)},Pe=function(e){var t=function(e){var t=g.a.groupBy(e,"pair");return g.a.mapValues(t,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e),a=g()(t).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[a.map((function(e){return e[0].split("_").reverse().join("/")})),a.map((function(e){return e[1]}))]},Me=1e5,Re=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=30},Ae=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=Me},Ee=function(e,t){return Re(e,t)?e.deals[t].list.filter((function(e){return we(e)<=720})):[]},Le=function(e,t){return Ae(e,t)?e.deals[t].list:[]},He=function(e){return{type:"setNewBotsList",payload:e}},Ye=function(e){return{type:"setHasMore",payload:e}},Ue=function(e){return{type:"addToBotsList",payload:e}},Ve=function(e){return{type:"setBotsOffset",payload:e}},Ge=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function ze(e,t,a){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s,o,i,l,u,b,j,f,p,h=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>3&&void 0!==h[3]&&h[3],c=h.length>4?h[4]:void 0,t(Ye(!0)),s=a.offset,o=a.limit,i=a.filters,l=i.sorting,u=i.scope,b=i.type,j=i.account,f=c||o,e.prev=5,e.next=8,H(s,f,l,u,b,j,r);case 8:p=e.sent,r?(t(Ve(f)),t(He(p))):(t(Ve(s+f)),t(Ue(p))),p.length<f&&t(Ye(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(He([])),t(Ve(f)),t(Ye(!1)),n({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),Ke.apply(this,arguments)}function $e(){return($e=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(r);case 3:c=e.sent,t(Ge(r,c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:"addError",payload:"Error when fetching bot ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function qe(){return(qe=Object(b.a)(d.a.mark((function e(t,a,n,r,c){var s,o,i,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.bots,o=s[r],e.prev=2,"maxUsage"in s[r]){e.next=9;break}return e.next=6,pe(o,c);case 6:i=e.sent,l=Object(v.a)(Object(v.a)({},o),{},{maxUsage:i}),t(Ge(o.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),u=Object(v.a)(Object(v.a)({},o),{},{maxUsage:0}),t(Ge(o.id,u)),n({type:"addError",payload:"Error when fetching max usage for bot ".concat(o.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function We(){return(We=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,o,i,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.bots,s=c[r],e.prev=2,"fundsLocked"in c[r]){e.next=12;break}return e.next=6,K(r);case 6:o=e.sent,i=o.profits_in_usd,l=i.today_usd_profit,u=i.funds_locked_in_active_deals,b=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:u,todayUsdProfit:l}),t(Ge(s.id,b));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(Ge(s.id,j)),n({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function Je(){return(Je=Object(b.a)(d.a.mark((function e(t,a,n,r,c){var s,o,i,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.bots,o=s[c];try{i=Ee(n,c),l=o.maxUsage,u=Object(v.a)(Object(v.a)({},o),{},{returns:Ce(l,i)}),t(Ge(o.id,u))}catch(d){b=Object(v.a)(Object(v.a)({},o),{},{returns:0}),t(Ge(o.id,b)),r({type:"addError",payload:"Error when getting returns for bot ".concat(o.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze=function(e,t,a){return{type:"getDealsList",payload:{deals:e,botId:t,periodInDays:a}}},Qe=function(e,t){return{type:"setOffset",payload:{botId:e,offset:t}}},Xe=function(e){return{type:"resetDeals",payload:{botId:e}}};function et(e,t,a,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Re(t,r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ie(r,30);case 5:c=e.sent,a(Ze(c,r,30)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||n({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function at(e,t,a,n){return nt.apply(this,arguments)}function nt(){return nt=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.length>4&&void 0!==o[4]&&o[4],e.prev=1,!Ae(t,r)||c){e.next=4;break}return e.abrupt("return");case 4:return c&&a(Xe(r)),e.next=7,et(t,a,n,r);case 7:return e.next=9,Ie(r,Me,(function(e){a(Qe(r,e))}));case 9:s=e.sent,a(Ze(s,r,Me)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||n({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),nt.apply(this,arguments)}var rt=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(a,0,1e3,"active","closed_at");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||t({type:"addError",payload:"Error when fetching active deals for bot ".concat(a)}),e.abrupt("return",Promise.resolve([]));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();function ct(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}a(247);var st=a(45),ot=function(e){return{scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},it=function(e){return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},lt=function(e,t){return{indexAxis:"y",scales:{x:{stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(e){return t[e].length>35?t[e].slice(0,33)+"...":t[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"y"}}}},ut=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scales:{x:{type:"time",time:{unit:t?"week":"month",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0,ticks:{stepSize:1}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},dt=(a(248),function(e){var t,a,n,r=e.deals,c=(e.timeRangeValue,e.dateLabelsDays),s=function(e,t){var a=g.a.groupBy(e,(function(e){return le()(e.closed_at).format("YYYY-MM-DD")})),n=g.a.mapValues(a,(function(e){return e.length}));return t.map((function(e){return e in n?n[e]:0}))}(r,c),o=function(e){var t=g.a.countBy(e,(function(e){return e.localized_status})),a=["Cancelled","StopLoss","Failed","Completed","Closed at Market Price","Liquidated","Switched"],n=a.map((function(e){return t[e]}));return[a,n]}(r),i=function(e){var t=e.map((function(e){var t=le()(e.created_at),a=e.closed_at?le()(e.closed_at):le()();return Be(a,t)})),a=g.a.countBy(t),n=g.a.keys(a).map((function(e){return parseInt(e)})),r=n.map((function(e){return a[e]}));return[n,r]}(r);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.a,{options:ut("Finished deals per day",c.length<70),data:{labels:c,datasets:[{label:"Finished deals",data:s,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.b,{options:{aspectRatio:1.7,plugins:{title:{display:!0,text:"Finished deals by Status"},tooltip:{callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return t?e+t:e}),0),n=t.data[e.dataIndex],r=Math.floor(n/a*100+.5),c=e.label;return"".concat(c,": ").concat(n," (").concat(r,"%)")}}},legend:{labels:{filter:function(e,t){return t.datasets[0].data[e.index]}}}}},width:300,data:{labels:o[0],datasets:[{data:o[1],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(39, 47, 148, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(39, 47, 148, 1)"],borderWidth:1}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.a,{options:(t="Finished deals duration histogram, hours",a="Duration, hours",n="Number of deals",{barPercentage:1.25,scales:{x:{type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:n}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x",callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return e+t})),n=t.data[e.dataIndex],r=Math.floor(n/a*100+.5);return" ".concat(n," deals (").concat(r,"%)")},title:function(e){var t=parseInt(e[0].label);return"Duration from ".concat(t-1," to ").concat(t," hours")}}}}}),data:{labels:i[0],datasets:[{label:"Finished deals",data:i[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),bt=(a(249),function(e){var t=e.deals,a=(e.timeRangeValue,e.dateLabelsDays,e.bot),r=Object(n.useState)([[],[]]),c=Object(j.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)([[],[]]),l=Object(j.a)(i,2),u=l[0],d=l[1],b=Object(n.useState)([[],[]]),f=Object(j.a)(b,2),p=f[0],m=f[1];return Object(n.useEffect)((function(){o(function(e){var t=ke(e),a=e.length>0?Ne(le()(),le()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return De(t,a<30?30:a+1)}(t)),d(Fe(t)),m(Pe(t))}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.c,{options:it("Accumulative Profit, $"),data:{labels:s[0],datasets:[{label:"Accumulative Profit, $",data:s[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.a,{options:ot("Daily Profit, $"),data:{labels:u[0],datasets:[{label:"Profit, $",data:u[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),"Bot::SingleBot"!==a.type&&Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(st.a,{options:lt("Pairs leaderboard by profit",p[0]),data:{labels:p[0],datasets:[{label:"Profit, $",data:p[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),jt=(a(250),function(e){var t=e.bot,a=e.deals,r=e.account,c=e.infoKey,s=e.timeRangeValue,o=Object(n.useState)([]),i=Object(j.a)(o,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){if(a)if("allTime"===s){var e=a.length>0?Math.ceil((t=a.slice(-1).pop(),Ne(le()(),le()(t.created_at)))):0;u(Se(e>30?e:30))}else"30d"===s&&u(Se(30));var t}),[a]),Object(h.jsx)(h.Fragment,{children:a&&l&&t&&r&&Object(h.jsxs)("div",{className:"DCABotDetailsCharts",children:["main"===c&&Object(h.jsx)(dt,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"settings"===c&&Object(h.jsx)(dt,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"profits"===c&&Object(h.jsx)(bt,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t})]})})}),ft=a(149),pt=(a(252),a(332)),ht=a(333),mt=a(342),Ot=a(340),vt={Cancelled:"secondary",StopLoss:"danger",Failed:"warning",Completed:"success","Closed at Market Price":"dark",Liquidated:"dark",Switched:"secondary"},xt=function(e){e.bot;var t=e.deals,a=r.a.useMemo((function(){return[{Header:"ID",accessor:"id",disableSortBy:!0},{Header:"Pair",accessor:function(e,t){return e.pair.split("_").reverse().join("/")},id:"pair",disableSortBy:!0},{Header:"Status",accessor:"localized_status",Cell:function(e){var t=e.cell.value;return Object(h.jsx)(pt.a,{style:{fontSize:"12px"},bg:vt[t],children:t})},disableSortBy:!0},{Header:"Start",accessor:function(e,t){return new Date(e.created_at)},id:"created_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:le()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:le()(t).format("HH:mm")})]})}},{Header:"End",accessor:function(e,t){return new Date(e.closed_at)},id:"closed_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:le()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:le()(t).format("HH:mm")})]})}},{Header:"Duration, hrs",accessor:function(e,t){var a=le.a.utc(e.created_at);return(e.closed_at?le.a.utc(e.closed_at):le.a.utc()).diff(a)},id:"duration",Cell:function(e){var t=e.cell.value;return"".concat(le.a.utc(t).format("HH:mm"))}},{Header:"Avg. entry price",id:"bought_average_price",accessor:function(e,t){return"long"===e.strategy?e.bought_average_price:e.sold_average_price},Cell:function(e){var t=e.cell.value;return t?ye({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Close price",id:"sold_average_price",accessor:function(e,t){return"long"===e.strategy?e.sold_average_price:e.bought_average_price},Cell:function(e){var t=e.cell.value;return t?ye({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],n=e.pair.split("_")[1],r="long"===e.strategy?ye({value:e.bought_amount,currency:n}):ye({value:e.sold_amount,currency:n}),c="long"===e.strategy?ye({value:e.bought_volume,currency:a}):ye({value:e.sold_volume,currency:a});return"".concat(r," ").concat(n,"!").concat(c," ").concat(a)},id:"volume",Cell:function(e){var t=e.cell.value.split("!");return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:t[0]}),Object(h.jsx)("div",{children:t[1]})]})},disableSortBy:!0},{Header:"Filled SO",accessor:"completed_safety_orders_count",disableSortBy:!0},{Header:"Profit, %",accessor:"final_profit_percentage",Cell:function(e){var t=e.cell.value;return"".concat(t,"%")},disableSortBy:!0},{Header:"Profit, $",accessor:"usd_final_profit",sortType:function(e,t){return(e=Number(e.original.usd_final_profit))>(t=Number(t.original.usd_final_profit))?1:-1},Cell:function(e){var t=e.cell.value,a=parseFloat(t);return Object(h.jsx)(pt.a,{style:{fontSize:"13px"},bg:a>=0?"success":"danger",children:"".concat(ye({value:a,currency:"USD"},"always")," $")})}},{Header:"Profit in Base",id:"profitBase",accessor:function(e,t){return"".concat(parseFloat(e.bought_amount)-parseFloat(e.sold_amount),"!").concat(e.pair.split("_")[1])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),n=t.split("!")[1];return Object(h.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(ye({value:a,currency:n},"always")," ").concat(n)})},disableSortBy:!0},{Header:"Profit in Quote",id:"profitQuote",accessor:function(e,t){return"".concat(parseFloat(e.sold_volume)-parseFloat(e.bought_volume),"!").concat(e.pair.split("_")[0])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),n=t.split("!")[1];return Object(h.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(ye({value:a,currency:n},"always")," ").concat(n)})},disableSortBy:!0}]}),[]),n=Object(ft.useTable)({columns:a,data:t,disableSortRemove:!0,autoResetPage:!0,autoResetSortBy:!1,initialState:{pageSize:50,sortBy:[{id:"closed_at",desc:!0}]}},ft.useSortBy,ft.usePagination),c=n.getTableProps,s=n.getTableBodyProps,o=n.headerGroups,i=n.prepareRow,l=n.page,u=n.pageCount,d=n.gotoPage,b=n.nextPage,f=n.previousPage,p=n.state.pageIndex,m=r.a.useState(!1),O=Object(j.a)(m,2),x=O[0],g=O[1],y=r.a.useState(null),_=Object(j.a)(y,2),C=_[0],B=_[1];return Object(h.jsxs)("div",{className:"DCABotDetailsDealsTable",children:[Object(h.jsx)(yt,{modalIsOpen:x,setModalIsOpen:g,dealId:C}),u>1&&Object(h.jsx)(gt,{pageIndex:p,pageCount:u,gotoPage:d,nextPage:b,previousPage:f}),Object(h.jsxs)(ht.a,Object(v.a)(Object(v.a)({striped:!0,bordered:!0},c()),{},{hover:!0,children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:o.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},s()),{},{children:l.map((function(e,t){return i(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{onClick:function(){B(e.original.id),g(!0)},style:{cursor:"pointer"},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})},gt=function(e){var t=e.pageIndex,a=e.pageCount,n=e.gotoPage,r=e.nextPage,c=e.previousPage,s=function(e,t){return Array(t-e+1).fill(0).map((function(t,a){return e+a}))},o=function(e,t){return Object(h.jsx)(mt.a.Item,{active:e===t,onClick:function(){n(e)},children:e+1},e)},i=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(mt.a.First,{onClick:function(){n(0)}}),Object(h.jsx)(mt.a.Prev,{onClick:function(){c()}}),t-2<4&&o(t-2,t),t-1<4&&o(t-1,t)]})},l=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(mt.a.Next,{onClick:function(){r()}}),Object(h.jsx)(mt.a.Last,{onClick:function(){n(a-1)}})]})};return Object(h.jsxs)(h.Fragment,{children:[a<=16&&Object(h.jsx)(mt.a,{children:s(0,a-1).map((function(e){return o(e,t)}))}),a>8&&Object(h.jsxs)(mt.a,{children:[t<7&&Object(h.jsxs)(h.Fragment,{children:[s(0,6).map((function(e){return o(e,t)})),l()]}),t>=7&&t<=a-8&&Object(h.jsxs)(h.Fragment,{children:[i(),o(t-2,t),o(t-1,t),Object(h.jsx)(mt.a.Item,{active:!0,children:t+1}),o(t+1,t),o(t+2,t),l()]}),a-t<8&&Object(h.jsxs)(h.Fragment,{children:[i(),s(a-7,a-1).map((function(e){return o(e,t)}))]})]})]})},yt=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,c=e.dealId,s=r.a.useState(null),o=Object(j.a)(s,2),i=o[0],l=o[1];return Object(n.useEffect)((function(){c&&U(c).then((function(e){l(e)}))}),[c]),Object(h.jsx)(h.Fragment,{children:i&&Object(h.jsxs)(Ot.a,{show:t,onHide:function(){a(!1)},scrollable:!0,size:"lg",children:[Object(h.jsx)(Ot.a.Header,{closeButton:!0,children:Object(h.jsx)(Ot.a.Title,{children:i.id})}),Object(h.jsxs)(Ot.a.Body,{children:[i.bot_events.length>0&&Object(h.jsxs)(ht.a,{striped:!0,hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Date/Time"}),Object(h.jsx)("th",{children:"Message"})]})}),Object(h.jsx)("tbody",{children:i.bot_events.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:le()(e.created_at).format("D MMM, YYYY HH:mm")}),Object(h.jsx)("td",{children:e.message})]},e.created_at)}))})]}),0===i.bot_events.length&&Object(h.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(h.jsxs)("p",{children:["\u201cNothing can last forever. There isn't any memory, no matter how intense, that doesn't fade out at last.\u201d"," "]}),Object(h.jsx)("footer",{className:"blockquote-footer",children:"Juan Rulfo"})]})]}),Object(h.jsx)(Ot.a.Footer,{children:Object(h.jsx)(ue.a,{variant:"primary",onClick:function(){window.open("https://3commas.io/deals/".concat(c),"_blank")},children:"Open in 3commas"})})]})})},_t=a(335),Ct=a(343),Bt=a(341),Nt=a(334),wt=(a(253),{nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TV",buy_or_strong_buy:"Buy",strong_buy:"Strong Buy",sell_or_strong_sell:"Sell",strong_sell:"Strong Sell",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"}),It=function(e,t){if(t in wt)return wt[t];var a=e.strategies.find((function(e){return e.strategy_key===t}));return a?a.name:t},kt=function(e){var t=e.botItem,a=e.account,r=Object(n.useContext)(se),c=r.dealsState,s=r.dealsDispatch,o=Object(n.useContext)(ce),i=o.botsState,u=o.botsDispatch,f=Object(n.useContext)(re).errorsDispatch,p=Object(n.useContext)(ne).strategiesState,m=Object(n.useState)(!1),O=Object(j.a)(m,2),v=O[0],x=O[1],g=Object(l.g)(),y=c.deals;Object(n.useEffect)((function(){(function(e,t,a,n){return We.apply(this,arguments)})(u,i,f,t.id).then((function(){x(!0)}))}),[t]),Object(n.useEffect)((function(){v&&function(e,t,a,n,r){return qe.apply(this,arguments)}(u,i,f,t.id,a).then()}),[a,t,v]),Object(n.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&Re(c,t.id)&&function(e,t,a,n,r){Je.apply(this,arguments)}(u,i,c,f,t.id)}),[y,t]);var _=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(Math.random()),et(c,s,f,t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=Ne(le()(),le()(t.created_at)),B=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=1===t.strategy_list.length?It(p,t.strategy_list[0].strategy):"Combined";return Object(h.jsx)("div",{className:"BotPreview",children:Object(h.jsxs)("div",{className:"BotPreviewRow",children:[Object(h.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:["market_icon"in a&&Object(h.jsx)(St,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:a.market_icon}),Object(h.jsx)(Dt,{strategy:t.strategy,age:C,is_enabled:t.is_enabled}),Object(h.jsx)("div",{className:"BotReturns",children:Object(h.jsx)(Ft,{returns:t.returns,getReturns:_,maxUsage:t.maxUsage,botId:t.id})})]}),Object(h.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(h.jsx)(Tt,{name:t.name}),Object(h.jsx)(ht.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(h.jsx)("td",{children:a.name})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(h.jsx)("td",{children:t.id})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(h.jsx)("td",{children:N})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(h.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.todayUsdProfit)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.finished_deals_profit_usd)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(h.jsx)("td",{children:"".concat(B.format(ge(t)),"/").concat(B.format(t.maxUsage))})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(h.jsx)("td",{children:B.format(t.active_deals_usd_profit)})]})]})}),Object(h.jsx)("div",{className:"BotPreviewButtons",children:Object(h.jsx)(ue.a,{variant:"primary",onClick:function(){g({pathname:"/".concat(t.id),search:window.location.search})},children:"View"})})]})]})})},St=function(e){var t=e.botType,a=e.strategy,n=e.botId,r=e.marketIcon;return Object(h.jsxs)("div",{className:"IconsSetContainer",children:[Object(h.jsx)("div",{className:"BotTypeIconContainer",children:"Bot::SingleBot"===t?"S":"M"}),Object(h.jsx)("div",{className:"BotMarketIconContainer",children:Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(r,")")}})}),Object(h.jsx)("div",{className:"RobotsIconContainer",children:Object(h.jsx)("img",{src:"/robotsIcons/robots-vector-free-icon-set-".concat("short"===a?"2":"3").concat(String(n).slice(-1),".png"),alt:"logo",className:"RobotsIcon"})})]})},Tt=function(e){var t=e.name;return Object(h.jsx)("div",{className:"BotNameContainer",children:Object(h.jsx)("span",{className:"BotName",children:t})})},Dt=function(e){var t=e.strategy,a=e.age,n=e.is_enabled;return Object(h.jsxs)("div",{className:"BotInfoContainer",children:[Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(h.jsx)(pt.a,{bg:"success",children:"Long"}):Object(h.jsx)(pt.a,{bg:"danger",children:"Short"})]}),Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(h.jsx)("div",{className:"BotInfoValue",children:"".concat(a," days")})]}),!n&&Object(h.jsx)("div",{className:"BotInfoRecordContainer",children:Object(h.jsx)(pt.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},Ft=function(e){var t=e.returns,a=e.getReturns,n=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),r=t||0===t;return Object(h.jsx)(Bt.a,{placement:"right",delay:{show:100,hide:200},overlay:Object(h.jsx)(Nt.a,{children:"30 days profit / Max usage"}),children:Object(h.jsxs)("div",{className:"BotReturnsContainer",children:[r&&Object(h.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(n.format(t||0))}),Object(h.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!r&&Object(h.jsx)(ue.a,{onClick:function(){a()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},Pt=(a(254),function(e){var t=e.account,a=e.bot,r=e.deals,c=Object(n.useContext)(ne).strategiesState,s=Object(n.useContext)(re).errorsDispatch,o=Object(n.useState)({value:0,currency:""}),i=Object(j.a)(o,2),l=i[0],u=i[1],d=Object(n.useState)(0),b=Object(j.a)(d,2),f=b[0],p=b[1],m=Object(n.useState)({value:0,currency:""}),O=Object(j.a)(m,2),v=O[0],x=O[1],y=Object(n.useState)({value:0,currency:""}),_=Object(j.a)(y,2),C=_[0],B=_[1],N=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),w=1===a.pairs.length?a.pairs[0].split("_").reverse().join("/"):"".concat(a.pairs.length," pairs"),I=1===a.pairs.length?"":"".concat(a.pairs[0].split("_")[0]," market"),k=a.strategy_list.map((function(e){return Object(h.jsx)("div",{children:"".concat(It(c,e.strategy)).concat(e.options.type?", ".concat(It(c,e.options.type)):"").concat(e.options.percent?", ".concat(e.options.percent,"%"):"").concat(e.options.time?", ".concat(e.options.time):"").concat(e.options.points?", ".concat(e.options.points):"")},"".concat(Math.random()))}));Object(n.useEffect)((function(){a.id&&t.id&&(function(e,t){return _e.apply(this,arguments)}(a,t).then((function(e){x(e)})),rt(s,a.id).then((function(e){B(function(e,t,a){var n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=n,s=0;return"short"===t.strategy&&xe(a.market_code)?(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_base_funds.toString())}),0),c=r):(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_quote_funds.toString())}),0),c=n),{value:s,currency:c}}(e,a,t)),u(function(e,t,a){var n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=0,s=n;"long"===t.strategy?(c=e.reduce((function(e,t){return e+parseFloat(t.bought_volume)}),0),s=n):"short"===t.strategy&&xe(a.market_code)?(c=e.reduce((function(e,t){return e+parseFloat(t.sold_amount)}),0),s=r):"short"!==t.strategy||xe(a.market_code)||(c=e.reduce((function(e,t){return e+parseFloat(t.sold_volume)}),0),s=n);var o=parseFloat(t.leverage_custom_value);return{value:o?c/o:c,currency:s}}(e,a,t))})))}),[a,t]),Object(n.useEffect)((function(){v.value&&l.value&&p(l.value/v.value)}),[v,l]);var S=function(e){var t=e.map((function(e){var t=le()(e.created_at);return(e.closed_at?le()(e.closed_at):le()()).diff(t)})),a=g.a.sum(t)/t.length||0;return le.a.utc(a).format("HH:mm")}(r);return Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Account"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:t.name})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Bot pairs"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:w}),Object(h.jsx)("div",{children:I})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Deal start condition"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:k})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Active deals/Max"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.active_deals_count,"/").concat(a.max_active_deals)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Funds used"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(ye(l)," ").concat(l.currency)}),Object(h.jsx)("div",{style:{fontSize:"10px"},children:"".concat(N.format(f)," of max usage")})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max usage"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(ye(v)," ").concat(v.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Reserved funds"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(ye(C)," ").concat(v.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total finished deals"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:r.length})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Avg deal duration"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(S," hrs")})]})]})}),Mt=(a(255),function(e){e.account;var t=e.bot,a=e.deals,r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"}),c=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),s=Object(n.useState)({value:0,currency:""}),o=Object(j.a)(s,2),i=o[0],l=o[1],u=Object(n.useState)({value:0,currency:""}),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(n.useState)({value:0,currency:""}),m=Object(j.a)(p,2),O=m[0],v=m[1],x=Object(n.useState)({value:0,currency:""}),y=Object(j.a)(x,2),_=y[0],C=y[1],B=Object(n.useState)(0),N=Object(j.a)(B,2),w=N[0],I=N[1];return Object(n.useEffect)((function(){t.maxUsage&&(l(function(e){return{value:g.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.final_profit_percentage)})))||0,currency:"%"}}(a)),f(function(e){return{value:g.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.usd_final_profit)})))||0,currency:"$"}}(a)),v(function(e){var t=Fe(e);return{value:g.a.mean(t[1]),currency:"$"}}(a)),C({value:Ce(t.maxUsage,a),currency:"%"})),I(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0}(a))}),[a,t]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Today's profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat((t.todayUsdProfit||0)<0?"showRed":"showGreen"),children:r.format(t.todayUsdProfit||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(w<0?"showRed":"showGreen"),children:r.format(w)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Current uPnL"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(parseFloat(t.active_deals_usd_profit)<0?"showRed":"showGreen"),children:r.format(parseFloat(t.active_deals_usd_profit))})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average TP, %"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(i.value<0?"showRed":"showGreen"),children:"".concat(ye(i),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average profit from deal"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(b.value<0?"showRed":"showGreen"),children:r.format(b.value||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average daily profit"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(O.value<0?"showRed":"showGreen"),children:r.format(O.value)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Returns"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(_.value<0?"showRed":"showGreen"),children:c.format(_.value)})]})]})}),Rt=(a(256),function(e){var t=e.account,a=e.bot,r=Object(n.useState)({value:0,currency:"",additionalCurrency:""}),c=Object(j.a)(r,2),s=c[0],o=c[1],i=Object(n.useState)({value:0,currency:"",additionalCurrency:""}),l=Object(j.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){a.id&&t.id&&(o(function(e,t){var a=e.pairs[0].split("_")[0],n=e.pairs[0].split("_")[1],r=a,c="";return"percent"===e.base_order_volume_type?(r="%",c="short"===e.strategy&&xe(t.market_code)?n:""):r="quote_currency"===e.base_order_volume_type?a:n,{value:parseFloat(e.base_order_volume),currency:r,additionalCurrency:c}}(a,t)),d(function(e,t){var a=e.pairs[0].split("_")[0],n=e.pairs[0].split("_")[1],r=a,c="";return"percent"===e.safety_order_volume_type?(r="%",c="short"===e.strategy&&xe(t.market_code)?n:""):r="quote_currency"===e.safety_order_volume_type?a:n,{value:parseFloat(e.safety_order_volume),currency:r,additionalCurrency:c}}(a,t)))}),[a,t]);var b=a.leverage_custom_value?parseInt(a.leverage_custom_value):"",f="not_specified"!==a.leverage_type?a.leverage_type:"";return Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Profit currency"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"quote_currency"===a.profit_currency?"Quote":"Base"})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Take profit (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(ye({value:parseFloat(a.take_profit),currency:"%"}),"%")}),Object(h.jsx)("div",{children:"total"===a.take_profit_type?"(from total volume)":"(from base volume)"})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Trailing"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[a.trailing_enabled&&"".concat(ye({value:parseFloat(a.trailing_deviation),currency:"%"}),"%"),!a.trailing_enabled&&"OFF"]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Stop loss (timeout)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(ye({value:parseFloat(a.stop_loss_percentage),currency:"%"}),"% (").concat(a.stop_loss_timeout_in_seconds," s)")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Base order size (type)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"".concat(ye(s)," ").concat(s.currency).concat(s.additionalCurrency?" (".concat(s.additionalCurrency,")"):"")}),Object(h.jsx)("div",{children:"(".concat(a.start_order_type,")")})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Leverage (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:b||"0"}),Object(h.jsx)("div",{children:f})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max safety trades (active)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.max_safety_orders," (").concat(a.active_safety_orders_count,")")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Price devition to open SO"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(ye({value:parseFloat(a.safety_order_step_percentage),currency:"%"}),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO size"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(ye(u)," ").concat(u.currency).concat(u.additionalCurrency?" (".concat(u.additionalCurrency,")"):"")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO volume scale"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_volume_coefficient})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO step scale"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_step_coefficient})]})]})}),At=(a(257),function(e){var t=e.bot,a=e.deals,n=e.account,r=e.infoKey,c=e.setInfoKey,s=(e.timeRangeValue,Ne(le()(),le()(t.created_at)));return Object(h.jsxs)("div",{className:"DCABotDetailsInfo",children:[Object(h.jsxs)("div",{className:"DCABotDetailsInfoLogo",children:[Object(h.jsx)(St,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:n.market_icon}),Object(h.jsx)(Dt,{strategy:t.strategy,age:s,is_enabled:t.is_enabled})]}),Object(h.jsx)("div",{className:"DCABotDetailsInfoTable",children:Object(h.jsxs)(_t.a,{activeKey:r,onSelect:function(e){return c(e)},children:[Object(h.jsx)(Ct.a,{eventKey:"main",title:"Main",children:Object(h.jsx)(Pt,{account:n,bot:t,deals:a})}),Object(h.jsx)(Ct.a,{eventKey:"settings",title:"Settings",children:Object(h.jsx)(Rt,{account:n,bot:t})}),Object(h.jsx)(Ct.a,{eventKey:"profits",title:"Profits",children:Object(h.jsx)(Mt,{account:n,bot:t,deals:a})}),Object(h.jsx)(Ct.a,{eventKey:"safeties",title:"Safeties",disabled:!0}),Object(h.jsx)(Ct.a,{eventKey:"insights",title:"Insights",disabled:!0})]})})]})}),Et=a(167),Lt=a.n(Et),Ht=(a(258),[{value:"all",label:"All"},{value:"Cancelled",label:"Cancelled"},{value:"StopLoss",label:"StopLoss"},{value:"Failed",label:"Failed"},{value:"Completed",label:"Completed"},{value:"Closed at Market Price",label:"Closed at Market Price"},{value:"Liquidated",label:"Liquidated"},{value:"Switched",label:"Switched"}]),Yt=function(){var e=Object(l.h)(),t=Object(l.g)(),a=Object(n.useContext)(ce),r=a.botsState,c=a.botsDispatch,s=Object(n.useContext)(se),o=s.dealsState,i=s.dealsDispatch,u=Object(n.useContext)(ce).botsState.bots,d=Object(n.useContext)(re).errorsDispatch,b=Object(n.useContext)(ae).accountsState.accounts,p=Object(n.useState)("30d"),m=Object(j.a)(p,2),O=m[0],x=m[1],g=Object(n.useState)(NaN),y=Object(j.a)(g,2),_=y[0],C=y[1],B=ct(_),N=Object(n.useState)(null),w=Object(j.a)(N,2),I=w[0],k=w[1],S=Object(n.useState)([]),T=Object(j.a)(S,2),D=T[0],F=T[1],P=Object(n.useState)(!1),M=Object(j.a)(P,2),E=M[0],L=M[1],H=Object(n.useState)(!1),Y=Object(j.a)(H,2),U=Y[0],V=Y[1],G=Object(n.useState)({}),z=Object(j.a)(G,2),K=z[0],$=z[1],q=Object(n.useState)("main"),W=Object(j.a)(q,2),J=W[0],Z=W[1],Q=Object(n.useState)(0),X=Object(j.a)(Q,2),ee=X[0],te=X[1],ne=Object(n.useState)("all"),oe=Object(j.a)(ne,2),ie=oe[0],pe=oe[1],he=Object(n.useState)("all"),me=Object(j.a)(he,2),Oe=me[0],ve=me[1],xe=Object(n.useState)([]),ge=Object(j.a)(xe,2),ye=ge[0],_e=ge[1],Ce=Object(n.useState)(new Date("2018-04-02")),Be=Object(j.a)(Ce,2),Ne=Be[0],we=Be[1],Ie=Object(n.useState)(new Date),ke=Object(j.a)(Ie,2),Se=ke[0],Te=ke[1],De=function(){pe("all"),ve("all"),we(new Date("2018-04-02")),Te(new Date)},Fe=function(){R(Math.random()),function(e,t,a,n){$e.apply(this,arguments)}(c,r,d,_),at(o,i,d,_,!0)};return Object(n.useEffect)((function(){e.botId&&C(parseInt(e.botId))}),[e]),Object(n.useEffect)((function(){R(Math.random()),_&&!B&&at(o,i,d,_)}),[_]),Object(n.useEffect)((function(){var e;I&&b.length>0&&$((e=I.account_id,b.find((function(t){return t.id===e}))))}),[I,b]),Object(n.useEffect)((function(){_&&k(u[_])}),[_,u]),Object(n.useEffect)((function(){_&&("30d"===O?L(!Re(o,_)):"allTime"===O&&L(!Ae(o,_)),V(!Ae(o,_)))}),[o,O,_]),Object(n.useEffect)((function(){if(_){var e=[];"30d"===O?e=Ee(o,_):"allTime"===O&&(e=Le(o,_)),De(),F(e)}}),[E,U,O]),Object(n.useEffect)((function(){if(_){var e=[];"30d"===O?e=Ee(o,_):"allTime"===O&&(e=Le(o,_)),e=function(e,t){return!t||le()("01-04-2018","MM-DD-YYYY").isAfter(t,"day")?e:e.filter((function(e){return le()(e.closed_at).isSame(t,"day")||le()(e.closed_at).isAfter(t)}))}(e=function(e,t){return!t||le()().isSame(t,"day")?e:e.filter((function(e){return le()(e.closed_at).isSame(t,"day")||le()(e.closed_at).isBefore(t)}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.localized_status===t}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.pair===t}))}(e,Oe),ie),Se),Ne),F(e)}}),[Oe,ie,Ne,Se]),Object(n.useEffect)((function(){if(_&&I&&o.deals[_]&&o.deals[_].offset){var e=o.deals[_].offset||0;te(Math.ceil(100*e/parseFloat(I.finished_deals_count)))}}),[o,_,I]),Object(n.useEffect)((function(){I&&_e([{value:"all",label:"All"}].concat(Object(f.a)(I.pairs.map((function(e){return{value:e,label:e.split("_").reverse().join("/")}})))))}),[I]),Object(n.useEffect)((function(){return function(){var e=A();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(h.jsxs)("div",{className:"DCABotDetails",children:[Object(h.jsx)(ue.a,{variant:"primary",size:"sm",className:"DCABotDetailsGetBackButton",onClick:function(){t(-1)},children:"< Back to bots list"}),!U&&Object(h.jsx)(ue.a,{variant:"primary",size:"sm",onClick:function(){Fe()},children:"Refresh data"}),E&&!ee&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(de.a,{now:100,animated:!0,className:"BotDetailsProgressBar"})})}),E&&!!ee&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(de.a,{now:ee,label:"".concat(ee,"%"),className:"BotDetailsProgressBar"})})}),!E&&I&&K&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(jt,{bot:I,deals:D,account:K,infoKey:J,timeRangeValue:O}),Object(h.jsxs)("div",{className:"BotDetailsControlsContainer",children:[Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(be.a,{children:[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}].map((function(e,t){return Object(h.jsx)(je.a,{id:"radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:O===e.value,onChange:function(e){return x(e.currentTarget.value)},children:e.name},t)}))})}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Status:"}),Object(h.jsx)(fe.a,{onChange:function(e){pe(e.value)},value:Ht.find((function(e){return e.value===ie})),className:"BotDetailsStatusFilter",theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})},options:Ht})]}),I&&I.pairs.length>1&&Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Pair:"}),Object(h.jsx)(fe.a,{onChange:function(e){ve(e.value)},value:ye.find((function(e){return e.value===Oe})),className:"BotDetailsPairFilter",options:ye,theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})}})]}),"allTime"===O&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"From:"}),Object(h.jsx)(Lt.a,{dateFormat:"dd/MM/yyyy",selected:Ne,onChange:function(e){we(e)},selectsStart:!0,startDate:Ne,endDate:Se,className:"BotDetailsDateFilter",strictParsing:!0})]}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"To:"}),Object(h.jsx)(Lt.a,{dateFormat:"dd/MM/yyyy",selected:Se,onChange:function(e){return Te(e)},selectsEnd:!0,startDate:Ne,endDate:Se,minDate:Ne,className:"BotDetailsDateFilter",strictParsing:!0})]})]}),Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(ue.a,{variant:"primary",onClick:function(){De()},children:"Clear filters"})})]}),Object(h.jsxs)("div",{className:"DCABotInfoGroup",children:[Object(h.jsx)("div",{className:"DCABotName",children:I.name}),Object(h.jsx)("div",{className:"DCABotId",children:"(Bot ID: ".concat(I.id,")")}),Object(h.jsx)("div",{className:"DCABotLinkTo3Commas",children:Object(h.jsx)(ue.a,{onClick:function(){window.open("https://3commas.io/bots/".concat(_),"_blank")},variant:"link",size:"sm",active:!0,children:"Open in 3Commas"})})]}),Object(h.jsx)(At,{bot:I,deals:D,account:K,infoKey:J,setInfoKey:Z,timeRangeValue:O}),D.length>0&&Object(h.jsx)(xt,{bot:I,deals:D})]})]})},Ut=(a(316),function(){var e=Object(n.useContext)(ce),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(ae).accountsState.accounts,c=t.filters,s=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setBotsFilters",payload:Object(v.a)(Object(v.a)({},t.filters),n)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(r.map((function(e){return{value:e.id,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(h.jsx)("span",{children:e.name})]}),label_id:e.name}})))),i=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],l=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],u=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(n.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(c))}catch(e){}}),[c]),Object(h.jsxs)("div",{className:"BotsFilters",children:[Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(fe.a,{onChange:function(e){s({account:e.value})},value:o.find((function(e){return e.value===c.account})),options:o,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(h.jsx)(fe.a,{onChange:function(e){s({scope:e.value})},value:i.find((function(e){return e.value===c.scope})),options:i,className:"ScopeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(h.jsx)(fe.a,{onChange:function(e){s({type:e.value})},value:l.find((function(e){return e.value===c.type})),options:l,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(h.jsx)(fe.a,{onChange:function(e){s({sorting:e.value})},value:u.find((function(e){return e.value===c.sorting})),options:u,className:"Sorting"})]})]})}),Vt=a(181),Gt=(a(317),a(339)),zt=a(17),Kt=(a(318),function(){var e=Object(n.useContext)(ce),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(se),c=r.dealsState,s=r.dealsDispatch,o=c.deals,i=t.list,l=t.hasMore,u=t.offset,f=t.bots,p=Object(n.useContext)(re).errorsDispatch,m=Object(n.useState)(!1),O=Object(j.a)(m,2),v=O[0],x=O[1],y=Object(n.useState)(!1),_=Object(j.a)(y,2),C=_[0],B=_[1],N=Object(n.useState)(0),w=Object(j.a)(N,2),I=w[0],k=w[1],S=Object(n.useState)([[],[]]),T=Object(j.a)(S,2),D=T[0],F=T[1],P=Object(n.useState)([[],[]]),M=Object(j.a)(P,2),E=M[0],L=M[1],H=Object(n.useState)([[],[],[]]),Y=Object(j.a)(H,2),U=Y[0],V=Y[1],G=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||0===u){e.next=3;break}return e.next=3,ze(a,t,p,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){G().then((function(){l||B(!0)}))}),[u]);var z=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(Math.random()),t=Object(zt.a)(i),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}if(n=a.value,Re(c,n)){e.next=9;break}return e.next=9,et(c,s,p,n);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){C&&z().then((function(){x(!0)}))}),[C]),Object(n.useEffect)((function(){if(v){var e=function(e,t){return t.reduce((function(t,a){var n=ke(Ee(e,a));return g.a.mergeWith(n,t,(function(e,t){return(e=e||0)+(t||0)}))}),{})}(c,i);F(Te(e)),L(De(e)),V(function(e){var t=e.list.map((function(t){var a=e.bots[t];return{maxUsage:a.maxUsage||0,name:a.name,fundsLocked:ge(a)}})),a=g.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[a.map((function(e){return e.name})),a.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),a.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[v,f]),Object(n.useEffect)((function(){return function(){var e=A();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(n.useEffect)((function(){var e=i.filter((function(e){return Re(c,e)}));k(e.length/i.length*100)}),[o]),Object(h.jsxs)("div",{className:"BotsListCharts",children:[!v&&Object(h.jsx)("div",{className:"ProgressBar",children:C?Object(h.jsx)(de.a,{now:Math.ceil(I),label:"".concat(Math.ceil(I),"%")}):Object(h.jsx)(de.a,{animated:!0,now:100})}),v&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(st.c,{options:it("Total Accumulative Profit (30 days), $"),data:{labels:E[0],datasets:[{label:"Accumulative Profit, $",data:E[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(st.a,{options:ot("Total Profit (30 days), $"),data:{labels:D[0],datasets:[{label:"Profit, $",data:D[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(st.a,{options:lt("Funds locked/Max usage, $",U[0]),data:{labels:U[0],datasets:[{label:"Funds locked, $",data:U[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:U[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})}),$t=function(){var e=Object(n.useContext)(ce),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(se).dealsState.deals,c=t.list,s=t.hasMore,o=t.filters,i=t.bots,l=Object(n.useContext)(ae).accountsState.accounts,u=Object(n.useContext)(re).errorsDispatch,f=Object(n.useState)(!1),p=Object(j.a)(f,2),m=p[0],O=p[1],v=!s&&0===c.length,x=ct(o);return Object(n.useEffect)((function(){!x&&c.length?O(function(e,t){return e.every((function(e){return e in t}))}(c,r)):(O(!1),ze(a,t,u,!0).then())}),[o]),v?Object(h.jsx)("div",{className:"FallbackContainer",children:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"No results found =("})})}):Object(h.jsxs)(Vt.a,{dataLength:c.length,next:Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.length){e.next=3;break}return e.next=3,ze(a,t,u,!1);case 3:case"end":return e.stop()}}),e)}))),hasMore:s,loader:Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(Gt.a,{animation:"grow"})}),endMessage:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"Yay! You have seen it all"})}),children:[m?Object(h.jsx)(Kt,{}):Object(h.jsxs)("div",{className:"ShowChartsButtonContainer",children:[Object(h.jsx)(ue.a,{className:"ShowChartsButton",onClick:function(){O(!0)},children:"Click to load charts"}),Object(h.jsx)("div",{className:"ShowChartsDisclamer",children:"Be careful, it can take a while if there are many bots in the list!"})]}),Object(h.jsx)("div",{className:"BotsList",children:l.length>0&&c.map((function(e){return Object(h.jsx)(kt,{botItem:i[e],account:(t=i[e].account_id,l.find((function(e){return e.id===t})))},e);var t}))})]})},qt=(a(319),function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ut,{}),Object(h.jsx)($t,{})]})}),Wt=function(){return Object(h.jsx)(l.d,{children:Object(h.jsxs)(l.b,{path:"/",element:Object(h.jsx)(oe,{}),children:[Object(h.jsx)(l.b,{index:!0,element:Object(h.jsx)(qt,{})}),Object(h.jsx)(l.b,{path:":botId",element:Object(h.jsx)(Yt,{})})]})})};s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(i.a,{children:Object(h.jsx)(Wt,{})})}),document.getElementById("root")),o()}},[[320,1,2]]]);
//# sourceMappingURL=main.bc443b6d.chunk.js.map