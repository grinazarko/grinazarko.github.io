(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{190:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},197:function(e,t){},245:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(34),s=a.n(c),i=(a(190),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,363)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),r(e),n(e),c(e),s(e)}))}),o=a(71),l=a(21),u=a(5),d=a.n(u),b=a(13),j=a(4),f=a(16),p=(a(192),a(348)),m=(a(193),a(0)),v=function(){var e=Object(r.useContext)(pe),t=e.errorsState.errors,a=e.errorsDispatch;return Object(m.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(m.jsxs)(p.a,{variant:"danger",onClose:function(){a({type:"cleanErrors"})},dismissible:!0,children:[Object(m.jsx)(p.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(m.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(m.jsx)(p.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})},h=a(15),O=a(2),x=a(10),y=a.n(x),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(a){}return t?Object(O.a)(Object(O.a)({},e),{},{filters:t}):e},_={list:[],hasMore:!0,limit:15,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var a=t.payload.map((function(e){return e.id})),r=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:a,bots:r});case"setHasMore":return Object(O.a)(Object(O.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var n=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(n)),bots:Object(O.a)(Object(O.a)({},e.bots),c)});case"setBotsOffset":return Object(O.a)(Object(O.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(O.a)(Object(O.a)({},e),{},{filters:t.payload});case"setBot":return Object(O.a)(Object(O.a)({},e),{},{bots:Object(O.a)(Object(O.a)({},e.bots),{},Object(h.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var B={deals:{}};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getDealsList":return Object(O.a)(Object(O.a)({},e),{},{deals:Object(O.a)(Object(O.a)({},e.deals),{},Object(h.a)({},t.payload.botId,Object(O.a)(Object(O.a)({},e.deals[t.payload.botId]),{},{list:t.payload.deals,period:t.payload.periodInDays})))});case"setOffset":return Object(O.a)(Object(O.a)({},e),{},{deals:Object(O.a)(Object(O.a)({},e.deals),{},Object(h.a)({},t.payload.botId,Object(O.a)(Object(O.a)({},e.deals[t.payload.botId]),{},{offset:t.payload.offset})))});case"resetDeals":if(t.payload.botId in e.deals){var a=y.a.omit(e.deals,[t.payload.botId]);return Object(O.a)(Object(O.a)({},e),{},{deals:a})}return Object(O.a)({},e);default:throw new Error}}var C=a(150),I=a.n(C),w=a(151),T=a.n(w),k=new T.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),D={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},F=new URLSearchParams(window.location.search).get("api_key")||"",M=new URLSearchParams(window.location.search).get("secret")||"",P=new T.a(D);function A(e){P=new T.a(Object(O.a)(Object(O.a)({},D),{},{id:e}))}function L(){return P}function H(e,t){return I.a.algo.HMAC.create(I.a.algo.SHA256,t).update(e).finalize().toString(I.a.enc.Hex)}var E=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return a.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:F,Signature:H(t,M)}})}))},R=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n,c,s){var i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>6&&void 0!==p[6]&&p[6],o=r.split("-"),l=Object(j.a)(o,2),u=l[0],b=l[1],f=function(){return"/public/api/ver1/bots?offset=".concat(i?0:t,"&limit=").concat(a,"&sort_by=").concat(u,"&sort_direction=").concat(b).concat(n?"&scope=".concat(n):"").concat(c?"&strategy=".concat(c):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",E("GET",f()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c,s){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n,c){var s,i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>5&&void 0!==p[5]?p[5]:"enabled",i=r.split("-"),o=Object(j.a)(i,2),l=o[0],u=o[1],b=c.map((function(e){return"&account_types[]=".concat(e)})).join(""),f=function(){return"/public/api/ver1/grid_bots?offset=".concat(t,"&limit=").concat(a,"&sort_by=").concat(l,"&sort_direction=").concat(u).concat(n?"&account_ids[]=".concat(n):b).concat(s?"&state=".concat(s):"")},e.abrupt("return",E("GET",f()).then((function(e){return e.json()})));case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n,c,s,i,o){var l,u,b,f,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.split("-"),u=Object(j.a)(l,2),b=u[0],f=u[1],p=function(){return"/public/api/v2/smart_trades?page=".concat(t,"&per_page=").concat(a,"&order_by=").concat(b,"&order_direction=").concat(f).concat(n?"&account_id=".concat(n):"").concat(c?"&type=".concat(c):"").concat(s?"&pair=".concat(s):"","&status=").concat(i).concat(o?"&from=".concat(o):"")},e.abrupt("return",E("GET",p()).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c,s,i,o){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/v2/smart_trades/".concat(t,"/trades")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/bots/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/grid_bots/".concat(t,"/profits")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/grid_bots/".concat(t,"/market_orders")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/deals/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/accounts").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(r,"&scope=").concat(n,"&order=").concat(c),P).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=a(26),X=(a(244),a(183)),ee=(a(245),function(){var e=Object(r.useState)("DCA"),t=Object(j.a)(e,2),a=t[0],n=t[1],c=Object(l.g)(),s=Object(l.f)();return Object(r.useEffect)((function(){"/"===s.pathname?n("DCA"):"/gridbots"===s.pathname?n("grid"):"/smarttrades"===s.pathname&&n("smarttrades")}),[s]),Object(m.jsx)("div",{className:"NavBar",children:Object(m.jsxs)("div",{className:"NavBarContainer",children:[Object(m.jsx)("div",{className:"LogoContainer",children:Object(m.jsx)("img",{className:"Logo",src:"BotAn__icon.png",alt:"logo"})}),Object(m.jsx)("div",{className:"Navigation",children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(X.a.Item,{children:Object(m.jsx)(X.a.Link,{active:"DCA"===a,onClick:function(){c({pathname:"/",search:window.location.search})},children:"DCA Bots"})}),Object(m.jsx)(X.a.Item,{children:Object(m.jsx)(X.a.Link,{active:"grid"===a,onClick:function(){c({pathname:"/gridbots",search:window.location.search})},children:"Grid Bots"})}),Object(m.jsx)(X.a.Item,{children:Object(m.jsx)(X.a.Link,{active:"smarttrades"===a,onClick:function(){c({pathname:"/smarttrades",search:window.location.search})},children:"Smart Trades"})})]})}),Object(m.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(m.jsx)("span",{className:"SupportLabel",children:"Community"}),Object(m.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]})})}),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=null;try{t=JSON.parse(localStorage.getItem("GridBotsFiltersState"))}catch(a){}return t?Object(O.a)(Object(O.a)({},e),{},{filters:t}):e},ae={list:[],hasMore:!0,limit:10,offset:0,filters:{accountType:"spot",account:"",sorting:"created_at-desc"},gridBots:{}};function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewGridBotsList":var a=t.payload.map((function(e){return e.id})),r=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:a,gridBots:r});case"setHasMore":return Object(O.a)(Object(O.a)({},e),{},{hasMore:t.payload});case"addToGridBotsList":var n=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(n)),gridBots:Object(O.a)(Object(O.a)({},e.gridBots),c)});case"setGridBotsOffset":return Object(O.a)(Object(O.a)({},e),{},{offset:t.payload});case"setGridBotsFilters":return Object(O.a)(Object(O.a)({},e),{},{filters:t.payload});case"setGridBot":return Object(O.a)(Object(O.a)({},e),{},{gridBots:Object(O.a)(Object(O.a)({},e.gridBots),{},Object(h.a)({},t.payload.gridBotId,t.payload.gridBot))});default:throw new Error}}var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=null;try{t=JSON.parse(localStorage.getItem("smartTradesFiltersState"))}catch(a){}return t?Object(O.a)(Object(O.a)({},e),{},{filters:t}):e},ce={list:[],hasMore:!0,limit:100,offset:1,filters:{accountId:"",sorting:"created_at-desc",type:"",status:"all",from:{label:"month",from:"",to:""},pair:""},smartTrades:{}};function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewSmartTradesList":var a=t.payload.map((function(e){return e.id})),r=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:a,smartTrades:r});case"setHasMore":return Object(O.a)(Object(O.a)({},e),{},{hasMore:t.payload});case"addToSmartTradesList":var n=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(n)),smartTrades:Object(O.a)(Object(O.a)({},e.smartTrades),c)});case"setSmartTradesOffset":return Object(O.a)(Object(O.a)({},e),{},{offset:t.payload});case"setSmartTradesFilters":return Object(O.a)(Object(O.a)({},e),{},{filters:t.payload});case"setSmartTrade":return Object(O.a)(Object(O.a)({},e),{},{smartTrades:Object(O.a)(Object(O.a)({},e.smartTrades),{},Object(h.a)({},t.payload.smartTradeId,t.payload.smartTrade))});default:throw new Error}}Z.f.register(Z.e,Z.n,Z.l,Z.c,Z.s,Z.t,Z.k,Z.i,Z.r,Z.h,Z.a);var ie={accounts:[]},oe={strategies:[]},le={errors:[]};function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var a=new Set(e.errors);return a.add(t.payload),{errors:Object(f.a)(Array.from(a))};case"cleanErrors":return{errors:[]};default:throw new Error}}function de(){var e=arguments.length>1?arguments[1]:void 0;if("setAccounts"===e.type)return{accounts:Object(f.a)(e.payload)};throw new Error}function be(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(f.a)(e.payload)};throw new Error}var je=Object(r.createContext)({accountsState:ie,accountsDispatch:function(e){}}),fe=Object(r.createContext)({strategiesState:oe,strategiesDispatch:function(e){}}),pe=Object(r.createContext)({errorsState:le,errorsDispatch:function(e){}}),me=Object(r.createContext)({botsState:_,botsDispatch:function(e){}}),ve=Object(r.createContext)({gridBotsState:ae,gridBotsDispatch:function(e){}}),he=Object(r.createContext)({smartTradesState:ce,smartTradesDispatch:function(e){}}),Oe=Object(r.createContext)({dealsState:B,dealsDispatch:function(e){}});var xe=function(){var e=Object(r.useReducer)(S,_,g),t=Object(j.a)(e,2),a=t[0],n=t[1],c=Object(r.useReducer)(re,ae,te),s=Object(j.a)(c,2),i=s[0],o=s[1],u=Object(r.useReducer)(de,ie),f=Object(j.a)(u,2),p=f[0],h=f[1],O=Object(r.useReducer)(be,oe),x=Object(j.a)(O,2),y=x[0],C=x[1],I=Object(r.useReducer)(ue,le),w=Object(j.a)(I,2),T=w[0],k=w[1],D=Object(r.useReducer)(se,ce,ne),F=Object(j.a)(D,2),M=F[0],P=F[1],A=Object(r.useReducer)(N,B),L=Object(j.a)(A,2),H=L[0],E=L[1],R=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q();case 3:t=e.sent,h({type:"setAccounts",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),h({type:"setAccounts",payload:[]}),k({type:"addError",payload:"Error when fetching accounts list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,C({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C({type:"setStrategies",payload:[]}),k({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){R(),Y()}),[]),Object(m.jsx)(pe.Provider,{value:{errorsState:T,errorsDispatch:k},children:Object(m.jsx)(fe.Provider,{value:{strategiesState:y,strategiesDispatch:C},children:Object(m.jsx)(je.Provider,{value:{accountsState:p,accountsDispatch:h},children:Object(m.jsx)(me.Provider,{value:{botsState:a,botsDispatch:n},children:Object(m.jsx)(he.Provider,{value:{smartTradesState:M,smartTradesDispatch:P},children:Object(m.jsx)(ve.Provider,{value:{gridBotsState:i,gridBotsDispatch:o},children:Object(m.jsx)(Oe.Provider,{value:{dealsState:H,dealsDispatch:E},children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(ee,{}),Object(m.jsx)(l.a,{}),Object(m.jsx)(v,{})]})})})})})})})})},ye=a(7),ge=a.n(ye),_e=a(180),Se=a(353),Be=a(354),Ne=a(355),Ce=a(43);function Ie(e,t){return we.apply(this,arguments)}function we(){return(we=Object(b.a)(d.a.mark((function e(t,a){var r,n,c,s,i,o,l,u,b,j,f,p,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&a.id){e.next=2;break}return e.abrupt("return",0);case 2:if(r=parseInt(t.max_active_deals),n=parseFloat(t.base_order_volume),c=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),i=parseFloat(t.leverage_custom_value),o=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],u=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,ke(a.market_code,l,n,s);case 13:b=e.sent,n=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,ke(a.market_code,u,n,s);case 21:j=e.sent,n=j.baseOrderVolume,s=j.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,De(t.account_id,l,u,a.market_code,t.strategy,n,s);case 29:f=e.sent,n=f.baseOrderVolume,s=f.safetyOrderVolume;case 32:return i&&(n/=i,s/=i),p=0,1!==o&&c>1?(m=s*(1-Math.pow(o,c))/(1-o),p=(m+n)*r):p=(c*s+n)*r,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Te=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(1));case 4:return e.next=6,E("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t,a);case 2:return c=e.sent,e.abrupt("return",{baseOrderVolume:r*c,safetyOrderVolume:n*c});case 4:case"end":return e.stop()}}),e)})));return function(t,a,r,n){return e.apply(this,arguments)}}(),De=function(){var e=Object(b.a)(d.a.mark((function e(t,a,r,n,c,s,i){var o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Fe(n)&&"short"===c?r:a,e.next=3,E("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,u=l.find((function(e){return e.currency_code===o})),b=0,u&&(b=(parseFloat(u.equity)-parseFloat(u.on_orders))*parseFloat(u.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*b/100,safetyOrderVolume:i*b/100});case 8:case"end":return e.stop()}}),e)})));return function(t,a,r,n,c,s,i){return e.apply(this,arguments)}}(),Fe=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function Me(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}var Pe=function(e){var t=e.value,a=e.currency,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return a.includes("BTC")?new Intl.NumberFormat("en-IN",{maximumFractionDigits:6,signDisplay:r}).format(t):"marketPrice"===a?new Intl.NumberFormat("en-IN",{maximumFractionDigits:8,signDisplay:r}).format(t):new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,signDisplay:r}).format(t)};function Ae(){return(Ae=Object(b.a)(d.a.mark((function e(t,a){var r,n,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.pairs[0].split("_")[0],n=t.pairs[0].split("_")[1],c=r,s=0,!t.maxUsage){e.next=8;break}s=t.maxUsage,e.next=11;break;case 8:return e.next=10,Ie(t,a);case 10:s=e.sent;case 11:return c="short"===t.strategy&&Fe(a.market_code)?n:r,e.next=14,Te(a.market_code,c);case 14:return i=e.sent,e.abrupt("return",{value:s/i,currency:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var He=function(e,t){return Math.ceil(e.diff(t)/36e5)},Ee=function(e,t){return Math.ceil(e.diff(t)/864e5)},Re=function(e){return He(ge()(),ge()(e.closed_at))},Ye=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,r,n,c,s,i,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:30,r=l.length>2&&void 0!==l[2]?l[2]:function(e){},n=24*a,c=1e3,s=0,i=[],o=function(){var e=Object(b.a)(d.a.mark((function e(){var a,l,u,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t,s,c,"finished","closed_at");case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(l=a.slice(-1),u=Object(j.a)(l,1),b=u[0],!(a.length===c&&Re(b)<=n)){e.next=14;break}return s+=c,i=[].concat(Object(f.a)(i),Object(f.a)(a)),r(s),e.next=12,o();case 12:e.next=16;break;case 14:p=a.filter((function(e){return Re(e)<=n})),i=[].concat(Object(f.a)(i),Object(f.a)(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,o();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ue=function(e){var t=y.a.groupBy(e,(function(e){return ge()(e.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Object(f.a)(new Array(e)).map((function(e,t){return ge()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse()},ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Ge(t),r=a.map((function(t){return t in e?e[t]:0})),n=a.map((function(e){return ge()(e,"YYYY-MM-DD")}));return[n,r]},Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=ze(e,t),r=0,n=a[1].map((function(e){var t=r+e;return r=t,t}));return[a[0],n]},qe=function(e){var t=Ue(e),a=e.length>0?Ee(ge()(),ge()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return ze(t,a<30?30:a+1)},$e=function(e){var t=function(e){var t=y.a.groupBy(e,"pair");return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e),a=y()(t).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[a.map((function(e){return e[0].split("_").reverse().join("/")})),a.map((function(e){return e[1]}))]},Qe=1e5,Ke=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=30},We=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=Qe},Je=function(e,t){return Ke(e,t)?e.deals[t].list.filter((function(e){return Re(e)<=720})):[]},Ze=function(e,t){return We(e,t)?e.deals[t].list:[]},Xe=function(e){return{type:"setNewBotsList",payload:e}},et=function(e){return{type:"setHasMore",payload:e}},tt=function(e){return{type:"addToBotsList",payload:e}},at=function(e){return{type:"setBotsOffset",payload:e}},rt=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function nt(e,t,a){return ct.apply(this,arguments)}function ct(){return ct=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s,i,o,l,u,b,j,f,p,m=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.length>3&&void 0!==m[3]&&m[3],c=m.length>4?m[4]:void 0,t(et(!0)),s=a.offset,i=a.limit,o=a.filters,l=o.sorting,u=o.scope,b=o.type,j=o.account,f=c||i,e.prev=5,e.next=8,R(s,f,l,u,b,j,n);case 8:p=e.sent,n?(t(at(f)),t(Xe(p))):(t(at(s+f)),t(tt(p))),p.length<f&&t(et(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(Xe([])),t(at(f)),t(et(!1)),r({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),ct.apply(this,arguments)}function st(){return(st=Object(b.a)(d.a.mark((function e(t,a,r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(n);case 3:c=e.sent,t(rt(n,c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:"addError",payload:"Error when fetching bot ".concat(n)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function it(){return(it=Object(b.a)(d.a.mark((function e(t,a,r,n,c){var s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.bots,i=s[n],e.prev=2,"maxUsage"in s[n]){e.next=9;break}return e.next=6,Ie(i,c);case 6:o=e.sent,l=Object(O.a)(Object(O.a)({},i),{},{maxUsage:o}),t(rt(i.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),u=Object(O.a)(Object(O.a)({},i),{},{maxUsage:0}),t(rt(i.id,u)),r({type:"addError",payload:"Error when fetching max usage for bot ".concat(i.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function ot(){return(ot=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.bots,s=c[n],e.prev=2,"fundsLocked"in c[n]){e.next=12;break}return e.next=6,J(n);case 6:i=e.sent,o=i.profits_in_usd,l=o.today_usd_profit,u=o.funds_locked_in_active_deals,b=Object(O.a)(Object(O.a)({},s),{},{fundsLocked:u,todayUsdProfit:l}),t(rt(s.id,b));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j=Object(O.a)(Object(O.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(rt(s.id,j)),r({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function lt(){return(lt=Object(b.a)(d.a.mark((function e(t,a,r,n,c){var s,i,o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.bots,i=s[c];try{o=Je(r,c),l=i.maxUsage,u=Object(O.a)(Object(O.a)({},i),{},{returns:Le(l,o)}),t(rt(i.id,u))}catch(d){b=Object(O.a)(Object(O.a)({},i),{},{returns:0}),t(rt(i.id,b)),n({type:"addError",payload:"Error when getting returns for bot ".concat(i.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=function(e,t,a){return{type:"getDealsList",payload:{deals:e,botId:t,periodInDays:a}}},dt=function(e,t){return{type:"setOffset",payload:{botId:e,offset:t}}},bt=function(e){return{type:"resetDeals",payload:{botId:e}}};function jt(e,t,a,r){return ft.apply(this,arguments)}function ft(){return(ft=Object(b.a)(d.a.mark((function e(t,a,r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ke(t,n)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ye(n,30);case 5:c=e.sent,a(ut(c,n,30)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||r({type:"addError",payload:"Error when fetching deals for bot ".concat(n)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function pt(e,t,a,r){return mt.apply(this,arguments)}function mt(){return mt=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.length>4&&void 0!==i[4]&&i[4],e.prev=1,!We(t,n)||c){e.next=4;break}return e.abrupt("return");case 4:return c&&a(bt(n)),e.next=7,jt(t,a,r,n);case 7:return e.next=9,Ye(n,Qe,(function(e){a(dt(n,e))}));case 9:s=e.sent,a(ut(s,n,Qe)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||r({type:"addError",payload:"Error when fetching deals for bot ".concat(n)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),mt.apply(this,arguments)}var vt=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(a,0,1e3,"active","closed_at");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||t({type:"addError",payload:"Error when fetching active deals for bot ".concat(a)}),e.abrupt("return",Promise.resolve([]));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}(),ht=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current},Ot=function(e){var t="YYYY-MM-DD",a=e.label;return"today"===a?ge()().subtract(1,"day").format(t):"week"===a?ge()().subtract(1,"week").format(t):"month"===a?ge()().subtract(1,"months").format(t):"custom"===a?e.from?ge()(e.from).format(t):ge()().format(t):""},xt=(a(248),a(33)),yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(O.a)({},t&&{label:t})}}}},gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(O.a)({},t&&{label:t})}}}},_t=function(e,t){return{indexAxis:"y",scales:{x:{stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(e){return t[e].length>35?t[e].slice(0,33)+"...":t[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"y"}}}},St=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scales:{x:{type:"time",time:{unit:t?"week":"month",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0,ticks:{stepSize:1}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},Bt=(a(249),function(e){var t,a,r,n=e.deals,c=(e.timeRangeValue,e.dateLabelsDays),s=function(e,t){var a=y.a.groupBy(e,(function(e){return ge()(e.closed_at).format("YYYY-MM-DD")})),r=y.a.mapValues(a,(function(e){return e.length}));return t.map((function(e){return e in r?r[e]:0}))}(n,c),i=function(e){var t=y.a.countBy(e,(function(e){return e.localized_status})),a=["Cancelled","StopLoss","Failed","Completed","Closed at Market Price","Liquidated","Switched"],r=a.map((function(e){return t[e]}));return[a,r]}(n),o=function(e){var t=e.map((function(e){var t=ge()(e.created_at),a=e.closed_at?ge()(e.closed_at):ge()();return He(a,t)})),a=y.a.countBy(t),r=y.a.keys(a).map((function(e){return parseInt(e)})),n=r.map((function(e){return a[e]}));return[r,n]}(n);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:St("Finished deals per day",c.length<70),data:{labels:c,datasets:[{label:"Finished deals",data:s,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.b,{options:{aspectRatio:1.7,plugins:{title:{display:!0,text:"Finished deals by Status"},tooltip:{callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return t?e+t:e}),0),r=t.data[e.dataIndex],n=Math.floor(r/a*100+.5),c=e.label;return"".concat(c,": ").concat(r," (").concat(n,"%)")}}},legend:{labels:{filter:function(e,t){return t.datasets[0].data[e.index]}}}}},width:300,data:{labels:i[0],datasets:[{data:i[1],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(39, 47, 148, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(39, 47, 148, 1)"],borderWidth:1}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:(t="Finished deals duration histogram, hours",a="Duration, hours",r="Number of deals",{barPercentage:1.25,scales:{x:{type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:r}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x",callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return e+t})),r=t.data[e.dataIndex],n=Math.floor(r/a*100+.5);return" ".concat(r," deals (").concat(n,"%)")},title:function(e){var t=parseInt(e[0].label);return"Duration from ".concat(t-1," to ").concat(t," hours")}}}}}),data:{labels:o[0],datasets:[{label:"Finished deals",data:o[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Nt=(a(250),function(e){var t=e.deals,a=(e.timeRangeValue,e.dateLabelsDays,e.bot),n=Object(r.useState)([[],[]]),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)([[],[]]),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)([[],[]]),f=Object(j.a)(b,2),p=f[0],v=f[1];return Object(r.useEffect)((function(){i(function(e){var t=Ue(e),a=e.length>0?Ee(ge()(),ge()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Ve(t,a<30?30:a+1)}(t)),d(qe(t)),v($e(t))}),[t]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.c,{options:gt("Accumulative Profit, $"),data:{labels:s[0],datasets:[{label:"Accumulative Profit, $",data:s[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:yt("Daily Profit, $"),data:{labels:u[0],datasets:[{label:"Profit, $",data:u[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),"Bot::SingleBot"!==a.type&&Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:_t("Pairs leaderboard by profit",p[0]),data:{labels:p[0],datasets:[{label:"Profit, $",data:p[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Ct=(a(251),function(e){var t=e.bot,a=e.deals,n=e.account,c=e.infoKey,s=e.timeRangeValue,i=Object(r.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1];return Object(r.useEffect)((function(){if(a)if("allTime"===s){var e=a.length>0?Math.ceil((t=a.slice(-1).pop(),Ee(ge()(),ge()(t.created_at)))):0;u(Ge(e>30?e:30))}else"30d"===s&&u(Ge(30));var t}),[a]),Object(m.jsx)(m.Fragment,{children:a&&l&&t&&n&&Object(m.jsxs)("div",{className:"DCABotDetailsCharts",children:["main"===c&&Object(m.jsx)(Bt,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"settings"===c&&Object(m.jsx)(Bt,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"profits"===c&&Object(m.jsx)(Nt,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t})]})})}),It=a(69),wt=(a(253),a(349)),Tt=a(350),kt=a(360),Dt=a(357),Ft={Cancelled:"secondary",StopLoss:"danger",Failed:"warning",Completed:"success","Closed at Market Price":"dark",Liquidated:"dark",Switched:"secondary"},Mt=function(e){e.bot;var t=e.deals,a=n.a.useMemo((function(){return[{Header:"ID",accessor:"id",disableSortBy:!0},{Header:"Pair",accessor:function(e,t){return e.pair.split("_").reverse().join("/")},id:"pair",disableSortBy:!0},{Header:"Status",accessor:"localized_status",Cell:function(e){var t=e.cell.value;return Object(m.jsx)(wt.a,{style:{fontSize:"12px"},bg:Ft[t],children:t})},disableSortBy:!0},{Header:"Start",accessor:function(e,t){return new Date(e.created_at)},id:"created_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:ge()(t).format("D MMM, YYYY")}),Object(m.jsx)("div",{children:ge()(t).format("HH:mm")})]})}},{Header:"End",accessor:function(e,t){return new Date(e.closed_at)},id:"closed_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:ge()(t).format("D MMM, YYYY")}),Object(m.jsx)("div",{children:ge()(t).format("HH:mm")})]})}},{Header:"Duration",accessor:function(e,t){var a=ge.a.utc(e.created_at);return(e.closed_at?ge.a.utc(e.closed_at):ge.a.utc()).diff(a)},id:"duration",Cell:function(e){var t=e.cell.value,a=ge.a.duration(t),r=Math.floor(a.asDays()),n=r?"".concat(r,"d "):"",c=a.hours(),s="".concat(c,"h "),i=a.minutes(),o="".concat(i,"m");return"".concat(n," ").concat(s," ").concat(o)}},{Header:"Avg. entry price",id:"bought_average_price",accessor:function(e,t){return"long"===e.strategy?e.bought_average_price:e.sold_average_price},Cell:function(e){var t=e.cell.value;return t?Pe({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Close price",id:"sold_average_price",accessor:function(e,t){return"long"===e.strategy?e.sold_average_price:e.bought_average_price},Cell:function(e){var t=e.cell.value;return t?Pe({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],r=e.pair.split("_")[1],n="long"===e.strategy?Pe({value:e.bought_amount,currency:r}):Pe({value:e.sold_amount,currency:r}),c="long"===e.strategy?Pe({value:e.bought_volume,currency:a}):Pe({value:e.sold_volume,currency:a});return"".concat(n," ").concat(r,"!").concat(c," ").concat(a)},id:"volume",Cell:function(e){var t=e.cell.value.split("!");return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:t[0]}),Object(m.jsx)("div",{children:t[1]})]})},disableSortBy:!0},{Header:"Filled SO",id:"completed_safety_orders_count",accessor:function(e,t){return"".concat(e.completed_safety_orders_count).concat(e.completed_manual_safety_orders_count?" (+".concat(e.completed_manual_safety_orders_count,")"):"")},disableSortBy:!0},{Header:"Profit, %",accessor:"final_profit_percentage",Cell:function(e){var t=e.cell.value;return"".concat(t,"%")},disableSortBy:!0},{Header:"Profit, $",accessor:"usd_final_profit",sortType:function(e,t){return(e=Number(e.original.usd_final_profit))>(t=Number(t.original.usd_final_profit))?1:-1},Cell:function(e){var t=e.cell.value,a=parseFloat(t);return Object(m.jsx)(wt.a,{style:{fontSize:"13px"},bg:a>=0?"success":"danger",children:"".concat(Pe({value:a,currency:"USD"},"always")," $")})}},{Header:"Profit in Base",id:"profitBase",accessor:function(e,t){return"".concat(parseFloat(e.bought_amount)-parseFloat(e.sold_amount),"!").concat(e.pair.split("_")[1])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),r=t.split("!")[1];return Object(m.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(Pe({value:a,currency:r},"always")," ").concat(r)})},disableSortBy:!0},{Header:"Profit in Quote",id:"profitQuote",accessor:function(e,t){return"".concat(parseFloat(e.sold_volume)-parseFloat(e.bought_volume),"!").concat(e.pair.split("_")[0])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),r=t.split("!")[1];return Object(m.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(Pe({value:a,currency:r},"always")," ").concat(r)})},disableSortBy:!0}]}),[]),r=Object(It.useTable)({columns:a,data:t,disableSortRemove:!0,autoResetPage:!0,autoResetSortBy:!1,initialState:{pageSize:50,sortBy:[{id:"closed_at",desc:!0}]}},It.useSortBy,It.usePagination),c=r.getTableProps,s=r.getTableBodyProps,i=r.headerGroups,o=r.prepareRow,l=r.page,u=r.pageCount,d=r.gotoPage,b=r.nextPage,f=r.previousPage,p=r.state.pageIndex,v=n.a.useState(!1),h=Object(j.a)(v,2),x=h[0],y=h[1],g=n.a.useState(null),_=Object(j.a)(g,2),S=_[0],B=_[1];return Object(m.jsxs)("div",{className:"DCABotDetailsDealsTable",children:[Object(m.jsx)(At,{modalIsOpen:x,setModalIsOpen:y,dealId:S}),u>1&&Object(m.jsx)(Pt,{pageIndex:p,pageCount:u,gotoPage:d,nextPage:b,previousPage:f}),Object(m.jsxs)(Tt.a,Object(O.a)(Object(O.a)({striped:!0,bordered:!0},c()),{},{hover:!0,children:[Object(m.jsx)("thead",{style:{fontSize:"14px"},children:i.map((function(e){return Object(m.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsx)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(m.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(m.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(m.jsx)("tbody",Object(O.a)(Object(O.a)({style:{fontSize:"14px"}},s()),{},{children:l.map((function(e,t){return o(e),Object(m.jsx)("tr",Object(O.a)(Object(O.a)({},e.getRowProps()),{},{onClick:function(){B(e.original.id),y(!0)},style:{cursor:"pointer"},children:e.cells.map((function(e){return Object(m.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})},Pt=function(e){var t=e.pageIndex,a=e.pageCount,r=e.gotoPage,n=e.nextPage,c=e.previousPage,s=function(e,t){return Array(t-e+1).fill(0).map((function(t,a){return e+a}))},i=function(e,t){return Object(m.jsx)(kt.a.Item,{active:e===t,onClick:function(){r(e)},children:e+1},e)},o=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(kt.a.First,{onClick:function(){r(0)}}),Object(m.jsx)(kt.a.Prev,{onClick:function(){c()}}),t-2<4&&i(t-2,t),t-1<4&&i(t-1,t)]})},l=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(kt.a.Next,{onClick:function(){n()}}),Object(m.jsx)(kt.a.Last,{onClick:function(){r(a-1)}})]})};return Object(m.jsxs)(m.Fragment,{children:[a<=16&&Object(m.jsx)(kt.a,{children:s(0,a-1).map((function(e){return i(e,t)}))}),a>16&&Object(m.jsxs)(kt.a,{children:[t<7&&Object(m.jsxs)(m.Fragment,{children:[s(0,6).map((function(e){return i(e,t)})),l()]}),t>=7&&t<=a-8&&Object(m.jsxs)(m.Fragment,{children:[o(),i(t-2,t),i(t-1,t),Object(m.jsx)(kt.a.Item,{active:!0,children:t+1}),i(t+1,t),i(t+2,t),l()]}),a-t<8&&Object(m.jsxs)(m.Fragment,{children:[o(),s(a-7,a-1).map((function(e){return i(e,t)}))]})]})]})},At=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,c=e.dealId,s=n.a.useState(null),i=Object(j.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){c&&$(c).then((function(e){l(e)}))}),[c]),Object(m.jsx)(m.Fragment,{children:o&&Object(m.jsxs)(Dt.a,{show:t,onHide:function(){a(!1)},scrollable:!0,size:"lg",children:[Object(m.jsx)(Dt.a.Header,{closeButton:!0,children:Object(m.jsx)(Dt.a.Title,{children:o.id})}),Object(m.jsxs)(Dt.a.Body,{children:[o.bot_events.length>0&&Object(m.jsxs)(Tt.a,{striped:!0,hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Date/Time"}),Object(m.jsx)("th",{children:"Message"})]})}),Object(m.jsx)("tbody",{children:o.bot_events.map((function(e){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:ge()(e.created_at).format("D MMM, YYYY HH:mm")}),Object(m.jsx)("td",{children:e.message})]},e.created_at)}))})]}),0===o.bot_events.length&&Object(m.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(m.jsxs)("p",{children:["\u201cNothing can last forever. There isn't any memory, no matter how intense, that doesn't fade out at last.\u201d"," "]}),Object(m.jsx)("footer",{className:"blockquote-footer",children:"Juan Rulfo"})]})]}),Object(m.jsx)(Dt.a.Footer,{children:Object(m.jsx)(_e.a,{variant:"primary",onClick:function(){window.open("https://3commas.io/deals/".concat(c),"_blank")},children:"Open in 3commas"})})]})})},Lt=a(352),Ht=a(361),Et=a(358),Rt=a(351),Yt=(a(254),{nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TV",buy_or_strong_buy:"Buy",strong_buy:"Strong Buy",sell_or_strong_sell:"Sell",strong_sell:"Strong Sell",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"}),Ut=function(e,t){if(t in Yt)return Yt[t];var a=e.strategies.find((function(e){return e.strategy_key===t}));return a?a.name:t},Gt=function(e){var t=e.botItem,a=e.account,n=Object(r.useContext)(Oe),c=n.dealsState,s=n.dealsDispatch,i=Object(r.useContext)(me),o=i.botsState,u=i.botsDispatch,f=Object(r.useContext)(pe).errorsDispatch,p=Object(r.useContext)(fe).strategiesState,v=Object(r.useState)(!1),h=Object(j.a)(v,2),O=h[0],x=h[1],y=Object(l.g)(),g=c.deals;Object(r.useEffect)((function(){(function(e,t,a,r){return ot.apply(this,arguments)})(u,o,f,t.id).then((function(){x(!0)}))}),[t]),Object(r.useEffect)((function(){O&&function(e,t,a,r,n){return it.apply(this,arguments)}(u,o,f,t.id,a).then()}),[a,t,O]),Object(r.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&Ke(c,t.id)&&function(e,t,a,r,n){lt.apply(this,arguments)}(u,o,c,f,t.id)}),[g,t]);var _=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(Math.random()),jt(c,s,f,t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=Ee(ge()(),ge()(t.created_at)),B=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=1===t.strategy_list.length?Ut(p,t.strategy_list[0].strategy):"Combined";return Object(m.jsx)("div",{className:"BotPreview",children:Object(m.jsxs)("div",{className:"BotPreviewRow",children:[Object(m.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:["market_icon"in a&&Object(m.jsx)(zt,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:a.market_icon}),Object(m.jsx)(qt,{strategy:t.strategy,age:S,is_enabled:t.is_enabled}),Object(m.jsx)("div",{className:"BotReturns",children:Object(m.jsx)($t,{returns:t.returns,getReturns:_,maxUsage:t.maxUsage,botId:t.id})})]}),Object(m.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(m.jsx)(Vt,{name:t.name}),Object(m.jsx)(Tt.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(m.jsxs)("tbody",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(m.jsx)("td",{children:a.name})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(m.jsx)("td",{children:t.id})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(m.jsx)("td",{children:N})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(m.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(m.jsx)("td",{children:B.format(t.todayUsdProfit)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(m.jsx)("td",{children:B.format(t.finished_deals_profit_usd)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(m.jsx)("td",{children:"".concat(B.format(Me(t)),"/").concat(B.format(t.maxUsage))})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(m.jsx)("td",{children:B.format(t.active_deals_usd_profit)})]})]})}),Object(m.jsx)("div",{className:"BotPreviewButtons",children:Object(m.jsx)(_e.a,{variant:"primary",onClick:function(){y({pathname:"/".concat(t.id),search:window.location.search})},children:"View"})})]})]})})},zt=function(e){var t=e.botType,a=e.strategy,r=e.botId,n=e.marketIcon;return Object(m.jsxs)("div",{className:"IconsSetContainer",children:[Object(m.jsx)("div",{className:"BotTypeIconContainer",children:"Bot::SingleBot"===t?"S":"M"}),Object(m.jsx)("div",{className:"BotMarketIconContainer",children:Object(m.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(n,")")}})}),Object(m.jsx)("div",{className:"RobotsIconContainer",children:Object(m.jsx)("img",{src:"/robotsIcons/robots-vector-free-icon-set-".concat("short"===a?"2":"3").concat(String(r).slice(-1),".png"),alt:"logo",className:"RobotsIcon"})})]})},Vt=function(e){var t=e.name;return Object(m.jsx)("div",{className:"BotNameContainer",children:Object(m.jsx)("span",{className:"BotName",children:t})})},qt=function(e){var t=e.strategy,a=e.age,r=e.is_enabled;return Object(m.jsxs)("div",{className:"BotInfoContainer",children:[Object(m.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(m.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(m.jsx)(wt.a,{bg:"success",children:"Long"}):Object(m.jsx)(wt.a,{bg:"danger",children:"Short"})]}),Object(m.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(m.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(m.jsx)("div",{className:"BotInfoValue",children:"".concat(a," days")})]}),!r&&Object(m.jsx)("div",{className:"BotInfoRecordContainer",children:Object(m.jsx)(wt.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},$t=function(e){var t=e.returns,a=e.getReturns,r=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),n=t||0===t;return Object(m.jsx)(Et.a,{placement:"right",delay:{show:100,hide:200},overlay:Object(m.jsx)(Rt.a,{children:"30 days profit / Max usage"}),children:Object(m.jsxs)("div",{className:"BotReturnsContainer",children:[n&&Object(m.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(r.format(t||0))}),Object(m.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!n&&Object(m.jsx)(_e.a,{onClick:function(){a()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},Qt=(a(255),function(e){var t=e.account,a=e.bot,n=e.deals,c=Object(r.useContext)(fe).strategiesState,s=Object(r.useContext)(pe).errorsDispatch,i=Object(r.useState)({value:0,currency:""}),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(0),b=Object(j.a)(d,2),f=b[0],p=b[1],v=Object(r.useState)({value:0,currency:""}),h=Object(j.a)(v,2),O=h[0],x=h[1],g=Object(r.useState)({value:0,currency:""}),_=Object(j.a)(g,2),S=_[0],B=_[1],N=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),C=1===a.pairs.length?a.pairs[0].split("_").reverse().join("/"):"".concat(a.pairs.length," pairs"),I=1===a.pairs.length?"":"".concat(a.pairs[0].split("_")[0]," market"),w=a.strategy_list.map((function(e){return Object(m.jsx)("div",{children:"".concat(Ut(c,e.strategy)).concat(e.options.type?", ".concat(Ut(c,e.options.type)):"").concat(e.options.percent?", ".concat(e.options.percent,"%"):"").concat(e.options.time?", ".concat(e.options.time):"").concat(e.options.points?", ".concat(e.options.points):"")},"".concat(Math.random()))}));Object(r.useEffect)((function(){a.id&&t.id&&(function(e,t){return Ae.apply(this,arguments)}(a,t).then((function(e){x(e)})),vt(s,a.id).then((function(e){B(function(e,t,a){var r=t.pairs[0].split("_")[0],n=t.pairs[0].split("_")[1],c=r,s=0;return"short"===t.strategy&&Fe(a.market_code)?(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_base_funds.toString())}),0),c=n):(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_quote_funds.toString())}),0),c=r),{value:s,currency:c}}(e,a,t)),u(function(e,t,a){var r=t.pairs[0].split("_")[0],n=t.pairs[0].split("_")[1],c=0,s=r;"long"===t.strategy?(c=e.reduce((function(e,t){return e+parseFloat(t.bought_volume)}),0),s=r):"short"===t.strategy&&Fe(a.market_code)?(c=e.reduce((function(e,t){return e+parseFloat(t.sold_amount)}),0),s=n):"short"!==t.strategy||Fe(a.market_code)||(c=e.reduce((function(e,t){return e+parseFloat(t.sold_volume)}),0),s=r);var i=parseFloat(t.leverage_custom_value);return{value:i?c/i:c,currency:s}}(e,a,t))})))}),[a,t]),Object(r.useEffect)((function(){O.value&&l.value&&p(l.value/O.value)}),[O,l]);var T=function(e){var t=e.map((function(e){var t=ge()(e.created_at);return(e.closed_at?ge()(e.closed_at):ge()()).diff(t)})),a=y.a.sum(t)/t.length||0;return ge.a.utc(a).format("HH:mm")}(n);return Object(m.jsxs)("div",{className:"BotInfoTable",children:[Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Account"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:t.name})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Bot pairs"}),Object(m.jsxs)("div",{className:"BotInfoTableRow",children:[Object(m.jsx)("div",{children:C}),Object(m.jsx)("div",{children:I})]})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Deal start condition"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:w})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Active deals/Max"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.active_deals_count,"/").concat(a.max_active_deals)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Funds used"}),Object(m.jsxs)("div",{className:"BotInfoTableRow",children:[Object(m.jsx)("div",{children:"".concat(Pe(l)," ").concat(l.currency)}),Object(m.jsx)("div",{style:{fontSize:"10px"},children:"".concat(N.format(f)," of max usage")})]})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Max usage"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Pe(O)," ").concat(O.currency)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Reserved funds"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Pe(S)," ").concat(O.currency)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Total finished deals"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:n.length})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Avg deal duration"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(T," hrs")})]})]})}),Kt=(a(256),function(e){e.account;var t=e.bot,a=e.deals,n=e.fromFilter,c=e.toFilter,s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"}),i=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),o=Object(r.useState)({value:0,currency:""}),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(r.useState)({value:0,currency:""}),p=Object(j.a)(b,2),v=p[0],h=p[1],O=Object(r.useState)({value:0,currency:""}),x=Object(j.a)(O,2),g=x[0],_=x[1],S=Object(r.useState)({value:0,currency:""}),B=Object(j.a)(S,2),N=B[0],C=B[1],I=Object(r.useState)(0),w=Object(j.a)(I,2),T=w[0],k=w[1];return Object(r.useEffect)((function(){d(function(e){return{value:y.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.final_profit_percentage)})))||0,currency:"%"}}(a)),h(function(e){return{value:y.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.usd_final_profit)})))||0,currency:"$"}}(a)),_(function(e,t,a,r){var n=ge.a.utc(e),c=ge.a.utc(a).startOf("day"),s=ge.a.utc(r).startOf("day"),i=ge.a.max([c,n]),o=y.a.unzip(y.a.zip.apply(y.a,Object(f.a)(qe(t))).filter((function(e){return!e[0].isBefore(i,"day")&&!e[0].isAfter(s,"day")})));return{value:y.a.mean(o[1]),currency:"$"}}(t.created_at,a,n,c)),t.maxUsage&&C({value:Le(t.maxUsage,a),currency:"%"}),k(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0}(a))}),[a,t]),Object(m.jsxs)("div",{className:"BotInfoTable",children:[Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Today's profit/loss"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat((t.todayUsdProfit||0)<0?"showRed":"showGreen"),children:s.format(t.todayUsdProfit||0)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Total profit/loss"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(T<0?"showRed":"showGreen"),children:s.format(T)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Current uPnL"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(parseFloat(t.active_deals_usd_profit)<0?"showRed":"showGreen"),children:s.format(parseFloat(t.active_deals_usd_profit))})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Average TP, %"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(u.value<0?"showRed":"showGreen"),children:"".concat(Pe(u),"%")})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Average profit from deal"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(v.value<0?"showRed":"showGreen"),children:s.format(v.value||0)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Average daily profit"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(g.value<0?"showRed":"showGreen"),children:s.format(g.value)})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Returns"}),Object(m.jsx)("div",{className:"BotInfoTableRow ".concat(N.value<0?"showRed":"showGreen"),children:i.format(N.value)})]})]})}),Wt=(a(257),function(e){var t=e.account,a=e.bot,n=Object(r.useState)({value:0,currency:"",additionalCurrency:""}),c=Object(j.a)(n,2),s=c[0],i=c[1],o=Object(r.useState)({value:0,currency:"",additionalCurrency:""}),l=Object(j.a)(o,2),u=l[0],d=l[1];Object(r.useEffect)((function(){a.id&&t.id&&(i(function(e,t){var a=e.pairs[0].split("_")[0],r=e.pairs[0].split("_")[1],n=a,c="";return"percent"===e.base_order_volume_type?(n="%",c="short"===e.strategy&&Fe(t.market_code)?r:""):n="quote_currency"===e.base_order_volume_type?a:r,{value:parseFloat(e.base_order_volume),currency:n,additionalCurrency:c}}(a,t)),d(function(e,t){var a=e.pairs[0].split("_")[0],r=e.pairs[0].split("_")[1],n=a,c="";return"percent"===e.safety_order_volume_type?(n="%",c="short"===e.strategy&&Fe(t.market_code)?r:""):n="quote_currency"===e.safety_order_volume_type?a:r,{value:parseFloat(e.safety_order_volume),currency:n,additionalCurrency:c}}(a,t)))}),[a,t]);var b=a.leverage_custom_value?parseInt(a.leverage_custom_value):"",f="not_specified"!==a.leverage_type?a.leverage_type:"";return Object(m.jsxs)("div",{className:"BotInfoTable",children:[Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Profit currency"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"quote_currency"===a.profit_currency?"Quote":"Base"})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Take profit (type)"}),Object(m.jsxs)("div",{className:"BotInfoTableRow",children:[Object(m.jsx)("div",{children:"".concat(Pe({value:parseFloat(a.take_profit),currency:"%"}),"%")}),Object(m.jsx)("div",{children:"total"===a.take_profit_type?"(from total volume)":"(from base volume)"})]})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Trailing"}),Object(m.jsxs)("div",{className:"BotInfoTableRow",children:[a.trailing_enabled&&"".concat(Pe({value:parseFloat(a.trailing_deviation),currency:"%"}),"%"),!a.trailing_enabled&&"OFF"]})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Stop loss (timeout)"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Pe({value:parseFloat(a.stop_loss_percentage),currency:"%"}),"% (").concat(a.stop_loss_timeout_in_seconds," s)")})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Base order size (type)"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:"".concat(Pe(s)," ").concat(s.currency).concat(s.additionalCurrency?" (".concat(s.additionalCurrency,")"):"")}),Object(m.jsx)("div",{children:"(".concat(a.start_order_type,")")})]})})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Leverage (type)"}),Object(m.jsxs)("div",{className:"BotInfoTableRow",children:[Object(m.jsx)("div",{children:b||"0"}),Object(m.jsx)("div",{children:f})]})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Max safety trades (active)"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.max_safety_orders," (").concat(a.active_safety_orders_count,")")})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"Price devition to open SO"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Pe({value:parseFloat(a.safety_order_step_percentage),currency:"%"}),"%")})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"SO size"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Pe(u)," ").concat(u.currency).concat(u.additionalCurrency?" (".concat(u.additionalCurrency,")"):"")})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"SO volume scale"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_volume_coefficient})]}),Object(m.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(m.jsx)("div",{className:"BotInfoTableHeader",children:"SO step scale"}),Object(m.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_step_coefficient})]})]})}),Jt=(a(258),function(e){var t=e.bot,a=e.deals,r=e.account,n=e.infoKey,c=e.setInfoKey,s=e.fromFilter,i=e.toFilter,o=Ee(ge()(),ge()(t.created_at));return Object(m.jsxs)("div",{className:"DCABotDetailsInfo",children:[Object(m.jsxs)("div",{className:"DCABotDetailsInfoLogo",children:[Object(m.jsx)(zt,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:r.market_icon}),Object(m.jsx)(qt,{strategy:t.strategy,age:o,is_enabled:t.is_enabled})]}),Object(m.jsx)("div",{className:"DCABotDetailsInfoTable",children:Object(m.jsxs)(Lt.a,{activeKey:n,onSelect:function(e){return c(e)},children:[Object(m.jsx)(Ht.a,{eventKey:"main",title:"Main",tabClassName:"InfoTab",children:Object(m.jsx)(Qt,{account:r,bot:t,deals:a})}),Object(m.jsx)(Ht.a,{eventKey:"settings",title:"Settings",tabClassName:"InfoTab",children:Object(m.jsx)(Wt,{account:r,bot:t})}),Object(m.jsx)(Ht.a,{eventKey:"profits",title:"Profits",tabClassName:"InfoTab",children:Object(m.jsx)(Kt,{account:r,bot:t,deals:a,fromFilter:s,toFilter:i})})]})})]})}),Zt=a(105),Xt=a.n(Zt),ea=(a(259),[{value:"all",label:"All"},{value:"Cancelled",label:"Cancelled"},{value:"StopLoss",label:"StopLoss"},{value:"Failed",label:"Failed"},{value:"Completed",label:"Completed"},{value:"Closed at Market Price",label:"Closed at Market Price"},{value:"Liquidated",label:"Liquidated"},{value:"Switched",label:"Switched"}]),ta=function(){var e=Object(l.h)(),t=Object(l.g)(),a=Object(r.useContext)(me),n=a.botsState,c=a.botsDispatch,s=Object(r.useContext)(Oe),i=s.dealsState,o=s.dealsDispatch,u=Object(r.useContext)(me).botsState.bots,d=Object(r.useContext)(pe).errorsDispatch,b=Object(r.useContext)(je).accountsState.accounts,p=Object(r.useState)("30d"),v=Object(j.a)(p,2),h=v[0],x=v[1],y=Object(r.useState)(NaN),g=Object(j.a)(y,2),_=g[0],S=g[1],B=ht(_),N=Object(r.useState)(null),C=Object(j.a)(N,2),I=C[0],w=C[1],T=Object(r.useState)([]),k=Object(j.a)(T,2),D=k[0],F=k[1],M=Object(r.useState)(!1),P=Object(j.a)(M,2),H=P[0],E=P[1],R=Object(r.useState)(!1),Y=Object(j.a)(R,2),U=Y[0],G=Y[1],z=Object(r.useState)({}),V=Object(j.a)(z,2),q=V[0],$=V[1],Q=Object(r.useState)("main"),K=Object(j.a)(Q,2),W=K[0],J=K[1],Z=Object(r.useState)(0),X=Object(j.a)(Z,2),ee=X[0],te=X[1],ae=Object(r.useState)("all"),re=Object(j.a)(ae,2),ne=re[0],ce=re[1],se=Object(r.useState)("all"),ie=Object(j.a)(se,2),oe=ie[0],le=ie[1],ue=Object(r.useState)([]),de=Object(j.a)(ue,2),be=de[0],fe=de[1],ve=Object(r.useState)(new Date("2018-04-02")),he=Object(j.a)(ve,2),xe=he[0],ye=he[1],Ie=Object(r.useState)(new Date),we=Object(j.a)(Ie,2),Te=we[0],ke=we[1],De=function(){ce("all"),le("all"),ye(new Date("2018-04-02")),ke(new Date)},Fe=function(){A(Math.random()),function(e,t,a,r){st.apply(this,arguments)}(c,n,d,_),pt(i,o,d,_,!0)};return Object(r.useEffect)((function(){e.botId&&S(parseInt(e.botId))}),[e]),Object(r.useEffect)((function(){A(Math.random()),_&&!B&&pt(i,o,d,_)}),[_]),Object(r.useEffect)((function(){var e;I&&b.length>0&&$((e=I.account_id,b.find((function(t){return t.id===e}))))}),[I,b]),Object(r.useEffect)((function(){_&&w(u[_])}),[_,u]),Object(r.useEffect)((function(){_&&("30d"===h?E(!Ke(i,_)):"allTime"===h&&E(!We(i,_)),G(!We(i,_)))}),[i,h,_]),Object(r.useEffect)((function(){if(_){var e=[];"30d"===h?e=Je(i,_):"allTime"===h&&(e=Ze(i,_)),De(),F(e)}}),[H,U,h,_]),Object(r.useEffect)((function(){if(_){var e=[];"30d"===h?e=Je(i,_):"allTime"===h&&(e=Ze(i,_)),e=function(e,t){return!t||ge()("01-04-2018","MM-DD-YYYY").isAfter(t,"day")?e:e.filter((function(e){return ge()(e.closed_at).isSame(t,"day")||ge()(e.closed_at).isAfter(t)}))}(e=function(e,t){return!t||ge()().isSame(t,"day")?e:e.filter((function(e){return ge()(e.closed_at).isSame(t,"day")||ge()(e.closed_at).isBefore(t)}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.localized_status===t}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.pair===t}))}(e,oe),ne),Te),xe),F(e)}}),[oe,ne,xe,Te]),Object(r.useEffect)((function(){if(_&&I&&i.deals[_]&&i.deals[_].offset){var e=i.deals[_].offset||0;te(Math.ceil(100*e/parseFloat(I.finished_deals_count)))}}),[i,_,I]),Object(r.useEffect)((function(){I&&fe([{value:"all",label:"All"}].concat(Object(f.a)(I.pairs.map((function(e){return{value:e,label:e.split("_").reverse().join("/")}})))))}),[I]),Object(r.useEffect)((function(){return function(){var e=L();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(m.jsxs)("div",{className:"DCABotDetails",children:[Object(m.jsx)(_e.a,{variant:"primary",size:"sm",className:"DCABotDetailsGetBackButton",onClick:function(){t(-1)},children:"< Back to bots list"}),!U&&Object(m.jsx)(_e.a,{variant:"primary",size:"sm",onClick:function(){Fe()},children:"Refresh data"}),H&&!ee&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(m.jsx)(Se.a,{now:100,animated:!0,className:"BotDetailsProgressBar"})})}),H&&!!ee&&Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(m.jsx)(Se.a,{now:ee,label:"".concat(ee,"%"),className:"BotDetailsProgressBar"})})}),!H&&I&&q&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ct,{bot:I,deals:D,account:q,infoKey:W,timeRangeValue:h}),Object(m.jsxs)("div",{className:"BotDetailsControlsContainer",children:[Object(m.jsx)("div",{className:"BotDetailsControl",children:Object(m.jsx)(Be.a,{children:[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}].map((function(e,t){return Object(m.jsx)(Ne.a,{id:"radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:h===e.value,onChange:function(e){return x(e.currentTarget.value)},children:e.name},t)}))})}),Object(m.jsxs)("div",{className:"BotDetailsControl",children:[Object(m.jsx)("div",{className:"BotDetailsFilterTitle",children:"Status:"}),Object(m.jsx)(Ce.a,{onChange:function(e){ce(e.value)},value:ea.find((function(e){return e.value===ne})),className:"BotDetailsStatusFilter",theme:function(e){return Object(O.a)(Object(O.a)({},e),{},{colors:Object(O.a)(Object(O.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})},options:ea})]}),I&&I.pairs.length>1&&Object(m.jsxs)("div",{className:"BotDetailsControl",children:[Object(m.jsx)("div",{className:"BotDetailsFilterTitle",children:"Pair:"}),Object(m.jsx)(Ce.a,{onChange:function(e){le(e.value)},value:be.find((function(e){return e.value===oe})),className:"BotDetailsPairFilter",options:be,theme:function(e){return Object(O.a)(Object(O.a)({},e),{},{colors:Object(O.a)(Object(O.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})}})]}),"allTime"===h&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"BotDetailsControl",children:[Object(m.jsx)("div",{className:"BotDetailsFilterTitle",children:"From:"}),Object(m.jsx)(Xt.a,{dateFormat:"dd/MM/yyyy",selected:xe,onChange:function(e){ye(e)},selectsStart:!0,startDate:xe,endDate:Te,className:"BotDetailsDateFilter",strictParsing:!0})]}),Object(m.jsxs)("div",{className:"BotDetailsControl",children:[Object(m.jsx)("div",{className:"BotDetailsFilterTitle",children:"To:"}),Object(m.jsx)(Xt.a,{dateFormat:"dd/MM/yyyy",selected:Te,onChange:function(e){return ke(e)},selectsEnd:!0,startDate:xe,endDate:Te,minDate:xe,className:"BotDetailsDateFilter",strictParsing:!0})]})]}),Object(m.jsx)("div",{className:"BotDetailsControl",children:Object(m.jsx)(_e.a,{variant:"primary",onClick:function(){De()},children:"Clear filters"})})]}),Object(m.jsxs)("div",{className:"DCABotInfoGroup",children:[Object(m.jsx)("div",{className:"DCABotName",children:I.name}),Object(m.jsx)("div",{className:"DCABotId",children:"(Bot ID: ".concat(I.id,")")}),Object(m.jsx)("div",{className:"DCABotLinkTo3Commas",children:Object(m.jsx)(_e.a,{onClick:function(){window.open("https://3commas.io/bots/".concat(_),"_blank")},variant:"link",size:"sm",active:!0,children:"Open in 3Commas"})})]}),Object(m.jsx)(Jt,{bot:I,deals:D,account:q,infoKey:W,setInfoKey:J,fromFilter:xe,toFilter:Te}),D.length>0&&Object(m.jsx)(Mt,{bot:I,deals:D})]})]})},aa=(a(317),function(){var e=Object(r.useContext)(me),t=e.botsState,a=e.botsDispatch,n=Object(r.useContext)(je).accountsState.accounts,c=t.filters,s=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setBotsFilters",payload:Object(O.a)(Object(O.a)({},t.filters),r)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(n.map((function(e){return{value:e.id,label:Object(m.jsxs)("div",{className:"AccountFilterItem",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(m.jsx)("span",{children:e.name})]}),label_id:e.name}})))),o=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],l=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],u=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(r.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(c))}catch(e){}}),[c]),Object(m.jsxs)("div",{className:"BotsFilters",children:[Object(m.jsxs)("div",{className:"BotsFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(m.jsx)(Ce.a,{onChange:function(e){s({account:e.value})},value:i.find((function(e){return e.value===c.account})),options:i,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(m.jsxs)("div",{className:"BotsFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(m.jsx)(Ce.a,{onChange:function(e){s({scope:e.value})},value:o.find((function(e){return e.value===c.scope})),options:o,className:"ScopeFilter"})]}),Object(m.jsxs)("div",{className:"BotsFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(m.jsx)(Ce.a,{onChange:function(e){s({type:e.value})},value:l.find((function(e){return e.value===c.type})),options:l,className:"TypeFilter"})]}),Object(m.jsxs)("div",{className:"BotsFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(m.jsx)(Ce.a,{onChange:function(e){s({sorting:e.value})},value:u.find((function(e){return e.value===c.sorting})),options:u,className:"Sorting"})]})]})}),ra=a(182),na=(a(318),a(356)),ca=a(20),sa=(a(319),function(){var e=Object(r.useContext)(me),t=e.botsState,a=e.botsDispatch,n=Object(r.useContext)(Oe),c=n.dealsState,s=n.dealsDispatch,i=c.deals,o=t.list,l=t.hasMore,u=t.offset,f=t.bots,p=Object(r.useContext)(pe).errorsDispatch,v=Object(r.useState)(!1),h=Object(j.a)(v,2),O=h[0],x=h[1],g=Object(r.useState)(!1),_=Object(j.a)(g,2),S=_[0],B=_[1],N=Object(r.useState)(0),C=Object(j.a)(N,2),I=C[0],w=C[1],T=Object(r.useState)([[],[]]),k=Object(j.a)(T,2),D=k[0],F=k[1],M=Object(r.useState)([[],[]]),P=Object(j.a)(M,2),H=P[0],E=P[1],R=Object(r.useState)([[],[],[]]),Y=Object(j.a)(R,2),U=Y[0],G=Y[1],z=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||0===u){e.next=3;break}return e.next=3,nt(a,t,p,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){z().then((function(){l||B(!0)}))}),[u]);var V=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(Math.random()),t=Object(ca.a)(o),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}if(r=a.value,Ke(c,r)){e.next=9;break}return e.next=9,jt(c,s,p,r);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){S&&V().then((function(){x(!0)}))}),[S]),Object(r.useEffect)((function(){if(O){var e=function(e,t){return t.reduce((function(t,a){var r=Ue(Je(e,a));return y.a.mergeWith(r,t,(function(e,t){return(e=e||0)+(t||0)}))}),{})}(c,o);F(ze(e)),E(Ve(e)),G(function(e){var t=e.list.map((function(t){var a=e.bots[t];return{maxUsage:a.maxUsage||0,name:a.name,fundsLocked:Me(a)}})),a=y.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[a.map((function(e){return e.name})),a.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),a.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[O,f]),Object(r.useEffect)((function(){return function(){var e=L();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(r.useEffect)((function(){var e=o.filter((function(e){return Ke(c,e)}));w(e.length/o.length*100)}),[i]),Object(m.jsxs)("div",{className:"BotsListCharts",children:[!O&&Object(m.jsx)("div",{className:"ProgressBar",children:S?Object(m.jsx)(Se.a,{now:Math.ceil(I),label:"".concat(Math.ceil(I),"%")}):Object(m.jsx)(Se.a,{animated:!0,now:100})}),O&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"ChartContainer",children:Object(m.jsx)(xt.c,{options:gt("Total Accumulative Profit (30 days), $"),data:{labels:H[0],datasets:[{label:"Accumulative Profit, $",data:H[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(m.jsx)("div",{className:"ChartContainer",children:Object(m.jsx)(xt.a,{options:yt("Total Profit (30 days), $"),data:{labels:D[0],datasets:[{label:"Profit, $",data:D[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(m.jsx)("div",{className:"ChartContainer",children:Object(m.jsx)(xt.a,{options:_t("Funds locked/Max usage, $",U[0]),data:{labels:U[0],datasets:[{label:"Funds locked, $",data:U[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:U[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})}),ia=function(){var e=Object(r.useContext)(me),t=e.botsState,a=e.botsDispatch,n=Object(r.useContext)(Oe).dealsState.deals,c=t.list,s=t.hasMore,i=t.filters,o=t.bots,l=Object(r.useContext)(je).accountsState.accounts,u=Object(r.useContext)(pe).errorsDispatch,f=Object(r.useState)(!1),p=Object(j.a)(f,2),v=p[0],h=p[1],O=!s&&0===c.length,x=ht(i);return Object(r.useEffect)((function(){!x&&c.length?h(function(e,t){return e.every((function(e){return e in t}))}(c,n)):(h(!1),nt(a,t,u,!0).then())}),[i]),O?Object(m.jsx)("div",{className:"FallbackContainer",children:Object(m.jsx)("p",{style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"No results found =("})})}):Object(m.jsxs)(ra.a,{dataLength:c.length,next:Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.length){e.next=3;break}return e.next=3,nt(a,t,u,!1);case 3:case"end":return e.stop()}}),e)}))),hasMore:s,loader:Object(m.jsx)("div",{className:"SpinnerContainer",children:Object(m.jsx)(na.a,{animation:"grow"})}),endMessage:Object(m.jsx)("p",{style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"Yay! You have seen it all"})}),children:[v?Object(m.jsx)(sa,{}):Object(m.jsx)("div",{className:"ShowChartsButtonContainer",children:Object(m.jsx)(_e.a,{className:"ShowChartsButton",onClick:function(){h(!0)},children:"Calculate profits"})}),Object(m.jsx)("div",{className:"BotsList",children:l.length>0&&c.map((function(e){return Object(m.jsx)(Gt,{botItem:o[e],account:(t=o[e].account_id,l.find((function(e){return e.id===t})))},e);var t}))})]})},oa=(a(320),function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(aa,{}),Object(m.jsx)(ia,{})]})}),la=(a(321),{BTC:"bitcoin",ETH:"ethereum",BNB:"binancecoin",USDT:"tether",USDC:"usd-coin",XRP:"ripple",TRX:"tron",BUSD:"binance-usd",DOGE:"dogecoin"}),ua=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,r,n,c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=parseFloat(t.start_price),r=parseFloat(t.quantity_per_grid),(n=t.grid_lines.slice().sort((function(e,t){return Math.abs(a-parseFloat(e.price))-Math.abs(a-parseFloat(t.price))})).slice()).shift(),c=y.a.sum(n.filter((function(e){return parseFloat(e.price)>a})).map((function(e){return r}))),s=y.a.sum(n.filter((function(e){return parseFloat(e.price)<a})).map((function(e){return parseFloat(e.price)*r}))),i=s+c*a,o=0,l=t.pair.split("_")[0],u=ge.a.utc(t.updated_at),!l.includes("USD")){e.next=14;break}o=i,e.next=26;break;case 14:if(!(l in la)){e.next=21;break}return e.next=17,fetch("https://api.coingecko.com/api/v3/coins/".concat(la[l],"/history?date=").concat(u.format("DD-MM-YYYY"),"&localization=false")).then((function(e){return e.json()}));case 17:b=e.sent,o=i*b.market_data.current_price.usd,e.next=26;break;case 21:if(!(ge()().utc().diff(u,"days")<366)){e.next=26;break}return e.next=24,fetch("https://api.currconv.com/api/v7/convert?apiKey=8ae78b023a9240049d4d56f97c81020a&q=".concat(l,"_USD&compact=ultra&date=").concat(u.format("YYYY-MM-DD"),"&apiKey=e4dcebf8eb9df2180846")).then((function(e){return e.json()}));case 24:j=e.sent,o=i*j["".concat(l,"_USD")][u.format("YYYY-MM-DD")];case 26:return e.abrupt("return",{baseInvestment:c,quoteInvestment:s,allInQuote:i,allInUsd:o});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),da=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,r,n,c,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=parseFloat(t.current_price),r=parseFloat(t.investment_base_currency),n=parseFloat(t.investment_quote_currency),c=n+r*a,s=0,!(i=t.pair.split("_")[0]).includes("USD")){e.next=10;break}s=c,e.next=21;break;case 10:if(!(i in la)&&"EUR"!==i){e.next=17;break}return e.next=13,fetch("https://api.3commas.io/public/api/ver1/accounts/currency_rates?market_code=binance&pair=USDT_".concat(i)).then((function(e){return e.json()}));case 13:o=e.sent,s=c*parseFloat(o.last),e.next=21;break;case 17:return e.next=19,fetch("https://api.3commas.io/public/api/ver1/accounts/currency_rates?market_code=binance&pair=".concat(i,"_USDT")).then((function(e){return e.json()}));case 19:l=e.sent,s=c/parseFloat(l.last);case 21:return e.abrupt("return",{baseInvestment:r,quoteInvestment:n,allInQuote:c,allInUsd:s});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ba=function(e){return e.filter((function(e){return function(e){return He(ge()(),ge()(e.created_at))}(e)<=720}))},ja=function(e){return e.grid_lines_orders.filter((function(e){return function(e){return He(ge()(),ge()(e.created_at))}(e)<=720}))},fa=function(e,t,a){var r=y.a.groupBy(e,(function(e){return ge()(e.created_at).format("YYYY-MM-DD")})),n=y.a.groupBy(t,(function(e){return ge()(e.updated_at).format("YYYY-MM-DD")})),c=y.a.mapValues(r,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit)})))})),s=y.a.mapValues(n,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.total)})))*a*.01*-1}));return y.a.mergeWith({},c,s,y.a.add)},pa=function(e){return{type:"setNewGridBotsList",payload:e}},ma=function(e){return{type:"setHasMore",payload:e}},va=function(e){return{type:"addToGridBotsList",payload:e}},ha=function(e,t){return{type:"setGridBot",payload:{gridBotId:e,gridBot:t}}},Oa=["Account::BinanceAccount","Accounts::Ftx","Account::HuobiAccount","Account::OkexAccount","Account::KucoinAccount","Account::GateIoAccount","Account::KrakenAccount","Account::BitfinexAccount","Account::BinanceUsAccount","Account::BitstampAccount","Accounts::GeminiAccount","Account::BittrexAccount","Account::GdaxAccount","Account::PaperTradingAccount"];function xa(){return(xa=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(ma(!0)),t(pa([])),c=a.limit,s=a.filters,i=s.sorting,o=s.account,l=n||c,e.prev=4,u=0,b=!0;case 7:if(!b){e.next=18;break}return e.next=10,Y(u,l,i,o,Oa);case 10:if(!(j=e.sent).error){e.next=13;break}return e.abrupt("break",18);case 13:t(va(j)),u+=l,j.length<l&&(b=!1),e.next=7;break;case 18:t(ma(!1)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),t(pa([])),t(ma(!1)),r({type:"addError",payload:"Error when fetching grid bots list"});case 26:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function ya(e,t,a){return ga.apply(this,arguments)}function ga(){return(ga=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.gridBots,c=n[r],e.prev=2,"initialInvestments"in c&&c.initialInvestments){e.next=10;break}return e.next=6,ua(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",c.initialInvestments);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching initial investments for grid bot ".concat(c.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function _a(e,t,a){return Sa.apply(this,arguments)}function Sa(){return(Sa=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.gridBots,c=n[r],e.prev=2,"currentInvestments"in c&&c.currentInvestments){e.next=10;break}return e.next=6,da(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",c.currentInvestments);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching current investments for grid bot ".concat(c.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Ba(e,t,a){return Na.apply(this,arguments)}function Na(){return(Na=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.gridBots,c=n[r],e.prev=2,"profits"in c&&c.profits){e.next=10;break}return e.next=6,V(r);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",c.profits);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching profits for grid bot ".concat(c.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Ca(e,t,a){return Ia.apply(this,arguments)}function Ia(){return(Ia=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.gridBots,c=n[r],e.prev=2,"marketOrders"in c&&c.marketOrders){e.next=10;break}return e.next=6,q(r);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",c.marketOrders);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(c.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function wa(e,t,a,r){return Ta.apply(this,arguments)}function Ta(){return(Ta=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ya(a,r,n);case 2:return c=e.sent,e.next=5,_a(a,r,n);case 5:return s=e.sent,e.next=8,Ba(a,r,n);case 8:return i=e.sent,o=a.gridBots,l=o[n],u=Object(O.a)(Object(O.a)({},l),{},{initialInvestments:c,currentInvestments:s,profits:i}),e.next=14,t(ha(n,u));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(){return(ka=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ca(a,r,n);case 2:return c=e.sent,s=a.gridBots,i=s[n],o=Object(O.a)(Object(O.a)({},i),{},{marketOrders:c}),e.next=8,t(ha(n,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(322),a(323),a(324);var Da=function(e){var t=e.currency,a=e.size,r=void 0===a?15:a,n=t.length>5?t.replace("USDT","").replace("BUSD","").replace("-PERP","").replace("USD",""):t;return Object(m.jsx)("div",{className:"CurrencyIcon",style:{width:r,height:r,borderRadius:r,backgroundSize:r,backgroundImage:"url(https://3commas.io/currency/icon/".concat(n.toLowerCase(),".png)")}})},Fa=function(e){var t=e.accounts,a=e.values,c=e.investment,s=e.setModalGridBotId,i=Object(r.useContext)(ve).gridBotsState,o=i.list,l=i.gridBots,u=n.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account_id},disableSortBy:!0,Cell:function(e){var a=e.cell.value,r=t.filter((function(e){return e.id===a}))[0];return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(r.market_icon,")")}}),Object(m.jsx)("div",{style:{width:"100px"},children:r.name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:a}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Price range",accessor:function(e,t){return"".concat(e.upper_price,"_").concat(e.lower_price,"_").concat(e.grids_quantity," levels")},id:"price_range",disableSortBy:!0,Cell:function(e){var t=e.cell.value.split("_");return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{style:{color:"#00A59A"},children:t[0]}),Object(m.jsx)("div",{style:{color:"#EE7D8B"},children:t[1]}),Object(m.jsx)("div",{style:{fontSize:"12px"},children:t[2]})]})}},{Header:"Start price",accessor:"start_price",disableSortBy:!0},{Header:"Current price",accessor:"current_price",disableSortBy:!0},{Header:"Active orders",accessor:function(e,t){var a=e.grid_lines.length,r=e.grid_lines.filter((function(e){return e.order_placed&&"sell"===e.side})).length,n=e.grid_lines.filter((function(e){return e.order_placed&&"buy"===e.side})).length;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{style:{marginBottom:"3px"},children:Object(m.jsx)(wt.a,{style:{fontSize:"14px"},bg:"danger",children:r})}),Object(m.jsx)("div",{style:{marginBottom:"3px"},children:Object(m.jsx)(wt.a,{style:{fontSize:"14px"},bg:"success",children:n})}),r+n!==a-1&&Object(m.jsx)("div",{style:{marginBottom:"3px"},children:Object(m.jsx)(Et.a,{placement:"right",overlay:Object(m.jsx)(Rt.a,{id:"tooltip-".concat(e.id),children:"Bot was unable to place all orders on the exchange. This may heavily impact your trading results and PnL reports on this page. Please contact 3commas support to check the error details."}),children:Object(m.jsx)(wt.a,{style:{fontSize:"16px"},bg:"warning",children:"\u26a0"})},"right")})]})},id:"activeOrder",disableSortBy:!0},{Header:"Initial investment",accessor:function(e,t){var r=e.pair.split("_")[0],n=e.pair.split("_")[1];if(e.initialInvestments){if("balances"===c)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:n}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.initialInvestments.baseInvestment,currency:n})," ").concat(n)})]}),Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:r}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.initialInvestments.quoteInvestment,currency:r})," ").concat(r)})]})]});var s="usd"===a?"USD":r,i="usd"===a?e.initialInvestments.allInUsd:e.initialInvestments.allInQuote;return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:s}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:i,currency:s})," ").concat(s)})]})}return""},id:"initial_investment",disableSortBy:!0},{Header:"Current investment",accessor:function(e,t){var r=e.pair.split("_")[0],n=e.pair.split("_")[1];if(e.currentInvestments){if("balances"===c)return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:n}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.currentInvestments.baseInvestment,currency:n})," ").concat(n)})]}),Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:r}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.currentInvestments.quoteInvestment,currency:r})," ").concat(r)})]})]});var s="usd"===a?"USD":r,i="usd"===a?e.currentInvestments.allInUsd:e.currentInvestments.allInQuote;return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:s}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:i,currency:s})," ").concat(s)})]})}return""},id:"current_investment",disableSortBy:!0},{Header:"Investment change",accessor:function(e,t){var r=e.pair.split("_")[0];if(e.currentInvestments&&e.initialInvestments){if("balances"===c||"quote"===a){var n=e.currentInvestments.allInQuote-e.initialInvestments.allInQuote;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:"".concat(Pe({value:n,currency:r})," ").concat(r)})}),Object(m.jsx)("div",{className:n>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:e.currentInvestments.allInQuote?n/e.currentInvestments.allInQuote*100:0,currency:"USD"})," %")})]})}var s=e.currentInvestments.allInUsd-e.initialInvestments.allInUsd;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{children:"".concat(Pe({value:s,currency:"USD"})," USD")})}),Object(m.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:e.currentInvestments.allInUsd?s/e.currentInvestments.allInUsd*100:0,currency:"USD"})," %")})]})}return""},id:"investment_change",disableSortBy:!0},{Header:"Bot profit",accessor:function(e,t){var r=e.pair.split("_")[0];if(e.profits){if("balances"===c||"quote"===a){var n=y.a.sum(e.profits.map((function(e){return parseFloat(e.profit)}))),s=n/e.initialInvestments.allInQuote*100;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"".concat(Pe({value:n,currency:r})," ").concat(r)}),Object(m.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:s,currency:"USD"})," %")})]})}var i=y.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)}))),o=i/e.initialInvestments.allInUsd*100;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"".concat(Pe({value:i,currency:"USD"})," USD")}),Object(m.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:o,currency:"USD"})," %")})]})}return""},id:"bot_profit",disableSortBy:!0},{Header:"Total PnL",accessor:function(e,t){var r=e.pair.split("_")[0];if(e.profits&&e.currentInvestments&&e.initialInvestments){if("balances"===c||"quote"===a){var n=y.a.sum(e.profits.map((function(e){return parseFloat(e.profit)})))+e.currentInvestments.allInQuote-e.initialInvestments.allInQuote,s=n/e.initialInvestments.allInQuote*100;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"".concat(Pe({value:n,currency:r})," ").concat(r)}),Object(m.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:s,currency:"USD"})," %")})]})}var i=y.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)})))+e.currentInvestments.allInUsd-e.initialInvestments.allInUsd,o=i/e.initialInvestments.allInUsd*100;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:"".concat(Pe({value:i,currency:"USD"})," USD")}),Object(m.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:o,currency:"USD"})," %")})]})}return""},id:"total_PnL",disableSortBy:!0},{Header:"Stats",Cell:function(e){e.cell.value;return Object(m.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(m.jsx)("img",{className:"stats",src:"stats.png",alt:"stats"})})},id:"stats",disableSortBy:!0}]}),[c,a]),d=Object(It.useTable)({columns:u,data:o.map((function(e){return l[e]}))}),b=d.getTableProps,j=d.getTableBodyProps,f=d.headerGroups,p=d.rows,v=d.prepareRow;return Object(m.jsx)("div",{className:"GridBotsListTable",children:Object(m.jsxs)(Tt.a,Object(O.a)(Object(O.a)({hover:!0},b()),{},{children:[Object(m.jsx)("thead",{style:{fontSize:"14px"},children:f.map((function(e){return Object(m.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsx)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps()),{},{children:Object(m.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(m.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(m.jsx)("tbody",Object(O.a)(Object(O.a)({style:{fontSize:"14px"}},j()),{},{children:p.map((function(e,t){return v(e),Object(m.jsx)("tr",Object(O.a)(Object(O.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){s(e.original.id)},children:e.cells.map((function(e){return Object(m.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},Ma=a(359),Pa=a(362),Aa=(a(325),a(326),function(e){var t=e.gridBotId,a=e.profits,n=e.marketOrders,c=e.tradingFee,s=e.timeRangeValue,i=Object(r.useContext)(ve).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(r.useState)([[],[]]),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(r.useState)([[],[]]),p=Object(j.a)(f,2),v=p[0],h=p[1],O=function(e){return"".concat(e.dataset.label,": ").concat(Pe({value:e.parsed.y,currency:o}))};return Object(r.useEffect)((function(){b(function(e,t,a,r,n){var c=fa(e,r,n),s="30d"===a?31:Math.max(Ee(ge()(),ge()(t.created_at))+1,31);return Ve(c,s)}(a,i,s,n,c)),h(function(e,t,a,r,n){var c=fa(e,r,n),s="30d"===a?31:Math.max(Ee(ge()(),ge()(t.created_at))+1,31);return ze(c,s)}(a,i,s,n,c))}),[a,n,c]),Object(m.jsxs)("div",{className:"GridBotDetailsCharts",children:[Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.c,{options:gt("Accumulative Profit, ".concat(o),O),data:{labels:d[0],datasets:[{label:"Accumulative Profit, ".concat(o),data:d[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:yt("Daily Profit, ".concat(o),O),data:{labels:v[0],datasets:[{label:"Profit, ".concat(o),data:v[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),La=(a(327),function(e){var t=e.gridBotId,a=e.profits,n=e.marketOrders,c=e.tradingFee,s=e.timeRangeValue,i=Object(r.useContext)(ve).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(r.useState)(0),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(r.useState)(0),p=Object(j.a)(f,2),v=p[0],h=p[1],O=Object(r.useState)(0),x=Object(j.a)(O,2),g=x[0],_=x[1],S=Object(r.useState)(0),B=Object(j.a)(S,2),N=B[0],C=B[1];return Object(r.useEffect)((function(){var e=y.a.sum(a.map((function(e){return parseFloat(e.profit)}))),t=e-y.a.sum(n.map((function(e){return parseFloat(e.total)})))*c*.01,r=1,o=(r="30d"===s&&N>30?30:N)?t/r:0,l=i.initialInvestments?i.initialInvestments.allInQuote:0,u=l?100*t/l:0,d=ge.a.utc(i.created_at),j=i.closed_at?ge.a.utc(i.closed_at):ge.a.utc();b(t),h(o),_(u),C(j.diff(d,"days"))}),[i,a,n,c,s]),a&&n&&Object(m.jsxs)(Tt.a,{hover:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Days running"}),Object(m.jsx)("th",{children:"Transactions"}),Object(m.jsx)("th",{children:"Avg. daily"}),Object(m.jsx)("th",{children:"Bot profit"}),Object(m.jsx)("th",{children:"Returns"})]})}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:N}),Object(m.jsx)("td",{children:a?a.length:""}),Object(m.jsx)("td",{children:"".concat(Pe({value:v,currency:o})," ").concat(o)}),Object(m.jsx)("td",{children:"".concat(Pe({value:d,currency:o})," ").concat(o)}),Object(m.jsx)("td",{children:"".concat(Pe({value:g,currency:"USD"})," %")})]})})]})}),Ha=[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}],Ea=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,n=e.gridBotId,c=Object(r.useContext)(ve),s=c.gridBotsState,i=c.gridBotsDispatch,o=Object(r.useContext)(pe).errorsDispatch,l=s.gridBots[n],u=Object(r.useState)(0),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(r.useState)("30d"),v=Object(j.a)(p,2),h=v[0],O=v[1],x=Object(r.useState)([]),y=Object(j.a)(x,2),g=y[0],_=y[1],S=Object(r.useState)([]),B=Object(j.a)(S,2),N=B[0],C=B[1];return Object(r.useEffect)((function(){l&&l.profits&&!l.marketOrders&&function(e,t,a,r){return ka.apply(this,arguments)}(i,s,o,n).then()}),[l]),Object(r.useEffect)((function(){l&&l.profits&&l.marketOrders&&("30d"===h?(_(ja(l.marketOrders).filter((function(e){return"Filled"===e.status_string}))),C(ba(l.profits))):(_(l.marketOrders.grid_lines_orders.filter((function(e){return"Filled"===e.status_string}))),C(l.profits)))}),[l,h]),Object(m.jsx)(m.Fragment,{children:l&&Object(m.jsxs)(Dt.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(m.jsx)(Dt.a.Header,{closeButton:!0,children:Object(m.jsx)(Dt.a.Title,{children:"GridBot: ".concat(l.pair.split("_").reverse().join("/")," (ID: ").concat(n,")")})}),Object(m.jsxs)(Dt.a.Body,{children:[Object(m.jsxs)("div",{className:"GridBotsDetailsFilters",children:[Object(m.jsxs)("div",{className:"GridBotListControl",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Time range"}),Object(m.jsx)(Be.a,{children:Ha.map((function(e,t){return Object(m.jsx)(Ne.a,{id:"detail-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:h===e.value,onChange:function(e){return O(e.currentTarget.value)},children:e.name},t)}))})]}),Object(m.jsxs)("div",{className:"GridBotListControl",style:{width:"150px",marginLeft:"auto"},children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Trading fee"}),Object(m.jsxs)(Ma.a,{children:[Object(m.jsx)(Pa.a,{onChange:function(e){e.target.value>=0&&e.target.value<=100&&f(e.target.value)},value:b,type:"number"}),Object(m.jsx)(Ma.a.Text,{children:"%"})]})]})]}),Object(m.jsx)(La,{gridBotId:n,profits:N,marketOrders:g,tradingFee:b,timeRangeValue:h}),Object(m.jsx)(Aa,{gridBotId:n,profits:N,marketOrders:g,tradingFee:b,timeRangeValue:h})]})]})})},Ra=(a(328),function(){var e=Object(r.useContext)(ve),t=e.gridBotsState,a=(e.gridBotsDispatch,t.list),n=t.hasMore,c=t.gridBots,s=Object(r.useState)(0),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)(0),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(r.useState)(0),v=Object(j.a)(p,2),h=v[0],O=v[1],x=Object(r.useState)(!0),g=Object(j.a)(x,2),_=g[0],S=g[1];return Object(r.useEffect)((function(){if(!n){var e=a.every((function(e){return c[e].initialInvestments})),t=a.every((function(e){return c[e].currentInvestments})),r=a.every((function(e){return c[e].profits}));if(a&&e&&r&&t){var s=y.a.sum(a.map((function(e){return c[e].initialInvestments.allInUsd}))),i=y.a.sum(a.map((function(e){return c[e].currentInvestments.allInUsd}))),o=y.a.sum(a.map((function(e){return y.a.sum(c[e].profits.map((function(e){return parseFloat(e.usd_profit)})))})));S(!1),l(s),f(o),O(o+i-s)}}}),[a,n,c]),_?Object(m.jsx)("div",{className:"SpinnerContainer",children:Object(m.jsx)(na.a,{animation:"grow"})}):Object(m.jsx)("div",{className:"GridBotListMetrics",children:Object(m.jsxs)("div",{className:"GridBotListMetricsContainer",children:[Object(m.jsxs)("div",{className:"GridBotListMetric",children:[Object(m.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Investment"}),Object(m.jsx)("div",{className:"GridBotListMetricBody",children:"".concat(Pe({value:o,currency:"USD"})," $")})]}),Object(m.jsxs)("div",{className:"GridBotListMetric",children:[Object(m.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Bot Profits"}),Object(m.jsx)("div",{className:"GridBotListMetricBody ".concat(b>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(Pe({value:b,currency:"USD"})," $")})]}),Object(m.jsxs)("div",{className:"GridBotListMetric",children:[Object(m.jsx)("div",{className:"GridBotListMetricHeader",children:"Total PnL"}),Object(m.jsx)("div",{className:"GridBotListMetricBody ".concat(h>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(Pe({value:h,currency:"USD"})," $")})]})]})})}),Ya=[{name:"Value",value:"value"},{name:"Balances",value:"balances"}],Ua=[{name:"USD",value:"usd"},{name:"Quote",value:"quote"}],Ga=function(){var e=Object(r.useContext)(ve),t=e.gridBotsState,a=e.gridBotsDispatch,n=t.list,c=t.hasMore,s=t.filters,i=Object(r.useContext)(je).accountsState.accounts,o=Object(r.useContext)(pe).errorsDispatch,l=Object(r.useState)("value"),u=Object(j.a)(l,2),p=u[0],v=u[1],h=Object(r.useState)("usd"),x=Object(j.a)(h,2),y=x[0],g=x[1],_=Object(r.useState)(""),S=Object(j.a)(_,2),B=S[0],N=S[1],C=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setGridBotsFilters",payload:Object(O.a)(Object(O.a)({},t.filters),r)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=!c&&0===n.length,w=[{value:"",label:"All spot accounts",label_id:"All"}].concat(Object(f.a)(i.filter((function(e){return Fe(e.market_code)})).map((function(e){return{value:e.id,label:Object(m.jsxs)("div",{className:"AccountFilterItem",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(m.jsx)("span",{children:e.name})]}),label_id:e.name}}))));return Object(r.useEffect)((function(){(function(e,t,a,r){return xa.apply(this,arguments)})(a,t,o).then()}),[s]),Object(r.useEffect)((function(){if(!c){var e,r=Object(ca.a)(n);try{for(r.s();!(e=r.n()).done;){var s=e.value;wa(a,t,o,s).then()}}catch(i){r.e(i)}finally{r.f()}}}),[c,n]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Ra,{}),Object(m.jsxs)("div",{className:"GridBotsFilters",children:[Object(m.jsxs)("div",{className:"GridBotsFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(m.jsx)(Ce.a,{onChange:function(e){C({account:e.value})},value:w.find((function(e){return e.value===s.account})),options:w,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(m.jsxs)("div",{className:"GridBotListControl",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Investment"}),Object(m.jsx)(Be.a,{id:"foo",children:Ya.map((function(e,t){return Object(m.jsx)(Ne.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioInvestment",value:e.value,checked:p===e.value,onChange:function(e){v(e.currentTarget.value)},children:e.name},e.value)}))})]}),"value"===p&&Object(m.jsxs)("div",{className:"GridBotListControl",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Show values in"}),Object(m.jsx)(Be.a,{id:"bar",children:Ua.map((function(e,t){return Object(m.jsx)(Ne.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioValues",value:e.value,checked:y===e.value,onChange:function(e){return g(e.currentTarget.value)},children:e.name},e.value)}))})]})]}),I?Object(m.jsx)("div",{className:"FallbackContainer",children:Object(m.jsx)("p",{style:{textAlign:"center"},children:Object(m.jsx)("b",{children:"No results found =("})})}):Object(m.jsxs)("div",{className:"GridBotsList",children:[i.length>0&&Object(m.jsx)(Fa,{accounts:i,values:y,investment:p,setModalGridBotId:N}),!!B&&Object(m.jsx)(Ea,{modalIsOpen:!!B,setModalIsOpen:N,gridBotId:B})]})]})},za=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(Ga,{})})},Va=function(e){return{type:"setNewSmartTradesList",payload:e}},qa=function(e){return{type:"setHasMore",payload:e}},$a=function(e){return{type:"addToSmartTradesList",payload:e}},Qa=function(e,t){return{type:"setSmartTrade",payload:{smartTradeId:e,smartTrade:t}}};function Ka(){return(Ka=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o,l,u,b,j,f,p,m,v,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(qa(!0)),t(Va([])),c=a.limit,s=a.filters,i=s.sorting,o=s.accountId,l=s.type,u=s.pair,b=s.status,j=s.from,f=n||c,p=Ot(j),e.prev=5,m=!0,v=1;case 8:if(!m){e.next=19;break}return e.next=11,U(v,f,i,o,l,u,b,p);case 11:if(!(h=e.sent).error){e.next=14;break}return e.abrupt("break",19);case 14:t($a(h)),v+=1,h.length<f&&(m=!1),e.next=8;break;case 19:t(qa(!1)),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(5),t(Va([])),t(qa(!1)),r({type:"addError",payload:"Error when fetching grid bots list"});case 27:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}function Wa(e,t,a){return Ja.apply(this,arguments)}function Ja(){return(Ja=Object(b.a)(d.a.mark((function e(t,a,r){var n,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.smartTrades,c=n[r],e.prev=2,"trades"in c&&c.trades){e.next=10;break}return e.next=6,G(r);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",c.trades);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(c.id)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Za(){return(Za=Object(b.a)(d.a.mark((function e(t,a,r,n){var c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wa(a,r,n);case 2:return c=e.sent,s=a.smartTrades,i=s[n],o=Object(O.a)(Object(O.a)({},i),{},{trades:c}),e.next=8,t(Qa(n,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(329),a(330),a(331);var Xa=function(e){var t=e.smartTradeId,a=Object(r.useContext)(he).smartTradesState.smartTrades[t];return Object(m.jsx)("div",{className:"SmartTradeDetailsStatusTable",children:a&&Object(m.jsxs)(Tt.a,{striped:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Average entry"}),Object(m.jsx)("th",{children:"Average close"}),Object(m.jsx)("th",{children:"Current price"}),Object(m.jsx)("th",{children:"PnL, $"})]})}),Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(m.jsx)("td",{children:"".concat("smart_sell"===a.data.type||"smart_buy"===a.data.type?a.position.price.value:a.data.average_enter_price)}),Object(m.jsx)("td",{children:"".concat(a.data.average_close_price?a.data.average_close_price:"")}),Object(m.jsx)("td",{children:"".concat(a.data.current_price?a.data.current_price.last:"")}),Object(m.jsx)("td",{children:a.profit.usd?Object(m.jsx)(wt.a,{bg:a.profit.usd>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(Pe({value:a.profit.usd,currency:"USD"}),"$")}):""})]})})]})})},er=(a(332),function(e){e.smartTradeId;var t=e.trades,a={less:"<",less_or_equal:"<=",greater_or_equal:">=",greater:">"};return t&&Object(m.jsxs)(Tt.a,{striped:!0,children:[Object(m.jsx)("thead",{children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Order"}),Object(m.jsx)("th",{children:"Price"}),Object(m.jsx)("th",{children:"Amount"}),Object(m.jsx)("th",{children:"Total"}),Object(m.jsx)("th",{children:"Trigger"}),Object(m.jsx)("th",{children:"Trailing"}),Object(m.jsx)("th",{children:"Status"}),Object(m.jsx)("th",{children:"Created"}),Object(m.jsx)("th",{children:"Updated"})]})}),Object(m.jsx)("tbody",{children:t.map((function(e){return Object(m.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(m.jsx)("td",{children:"".concat(e.order_type," ").concat(e.order_side)}),Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{children:"Desired: ".concat(e.initial_price?e.initial_price:"")}),Object(m.jsx)("div",{children:"Real: ".concat(e.realised_price?e.realised_price:"")})]}),Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{children:"Desired: ".concat(e.initial_amount?e.initial_amount:"")}),Object(m.jsx)("div",{children:"Real: ".concat(e.realised_amount?e.realised_amount:"")})]}),Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{children:"Desired: ".concat(e.initial_total?e.initial_total:"")}),Object(m.jsx)("div",{children:"Real: ".concat(e.realised_total?e.realised_total:"")})]}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:"".concat(e.trigger_condition?a[e.trigger_condition]:""," ").concat(e.trigger_price?e.trigger_price:"")})}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:"".concat(e.trail_value?e.trail_value:""," ").concat(e.trail_percentage?"(".concat(e.trail_percentage,"%)"):"")})}),Object(m.jsx)("td",{children:Object(m.jsx)("div",{children:"".concat(e.status?e.status:"")})}),Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{children:"".concat(e.updated_at?ge()(e.created_at).format("DD/MM/YYYY"):"")}),Object(m.jsx)("div",{children:"".concat(e.updated_at?ge()(e.created_at).format("HH:mm"):"")})]}),Object(m.jsxs)("td",{children:[Object(m.jsx)("div",{children:"".concat(e.updated_at?ge()(e.updated_at).format("DD/MM/YYYY"):"")}),Object(m.jsx)("div",{children:"".concat(e.updated_at?ge()(e.updated_at).format("HH:mm"):"")})]})]},e.id)}))})]})}),tr=[{name:"Position",value:"position"},{name:"Take profit",value:"take_profit"},{name:"Reduce funds",value:"reduce_funds"},{name:"Stop loss",value:"stop_loss"},{name:"Panic",value:"panic"},{name:"All",value:""}],ar=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,n=e.smartTradeId,c=Object(r.useContext)(he),s=c.smartTradesState,i=c.smartTradesDispatch,o=s.smartTrades[n],l=Object(r.useContext)(pe).errorsDispatch,u=Object(r.useState)(""),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(r.useState)([]),v=Object(j.a)(p,2),h=v[0],O=v[1];return Object(r.useEffect)((function(){n&&function(e,t,a,r){return Za.apply(this,arguments)}(i,s,l,n).then()}),[n]),Object(r.useEffect)((function(){o&&o.trades&&O(o.trades)}),[o]),Object(r.useEffect)((function(){b?O(o.trades.filter((function(e){return e.trade_purpose===b}))):o&&o.trades&&O(o.trades)}),[b]),Object(m.jsx)(m.Fragment,{children:o&&Object(m.jsxs)(Dt.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(m.jsx)(Dt.a.Header,{closeButton:!0,children:Object(m.jsx)(Dt.a.Title,{children:"".concat(o.pair.split("_").reverse().join("/")," (Trade ID: ").concat(n,")")})}),Object(m.jsxs)(Dt.a.Body,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(m.jsx)(Xa,{smartTradeId:n})}),Object(m.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(m.jsx)(Be.a,{children:tr.map((function(e,t){return Object(m.jsx)(Ne.a,{id:"detail-position-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio-detail-position",value:e.value,checked:b===e.value,onChange:function(e){return f(e.currentTarget.value)},children:e.name},t)}))})})]}),h&&Object(m.jsx)(er,{smartTradeId:n,trades:h})]})]})})},rr=function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,(function(e){return ge()(e.data.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))}))},nr=(a(333),function(){var e=Object(r.useContext)(he).smartTradesState,t=e.list,a=e.hasMore,n=e.smartTrades,c=e.filters,s=Object(r.useState)([[],[]]),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)([[],[]]),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(r.useState)([[],[]]),v=Object(j.a)(p,2),h=v[0],O=v[1],x=function(e){return"".concat(e.dataset.label,": ").concat(Pe({value:e.parsed.y,currency:"USD"}))};return Object(r.useEffect)((function(){l(function(e,t){var a=Ot(t),r=rr(e);if(a)return Ve(r,Ee(ge()(),ge()(a)));var n=ge.a.min(y.a.keys(r).map((function(e){return ge()(e)})));return Ve(r,Ee(ge()(),n))}(t.map((function(e){return n[e]})),c.from)),f(function(e,t){var a=Ot(t),r=rr(e);if(a)return ze(r,Ee(ge()(),ge()(a)));var n=ge.a.min(y.a.keys(r).map((function(e){return ge()(e)})));return ze(r,Ee(ge()(),n))}(t.map((function(e){return n[e]})),c.from)),O(function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,"pair"),r=y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))})),n=y()(r).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[n.map((function(e){return e[0].split("_").reverse().join("/")})),n.map((function(e){return e[1]}))]}(t.map((function(e){return n[e]}))))}),[t]),a?Object(m.jsx)("div",{className:"SmartTradesChartsSpiner",children:Object(m.jsx)(na.a,{animation:"grow"})}):Object(m.jsxs)("div",{className:"SmartTradesCharts",children:[Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.c,{options:gt("Accumulative Profit, $",x),data:{labels:o[0],datasets:[{label:"Accumulative Profit, $",data:o[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:yt("Daily Profit, $",x),data:{labels:b[0],datasets:[{label:"Profit, $",data:b[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(m.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(m.jsx)(xt.a,{options:_t("Pairs leaderboard by profit",h[0]),data:{labels:h[0],datasets:[{label:"Profit, $",data:h[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),cr=(a(334),[{name:"Today",value:"today"},{name:"Week",value:"week"},{name:"Month",value:"month"},{name:"All time",value:"allTime"},{name:"Custom",value:"custom"}]),sr=function(){var e=Object(r.useContext)(he),t=e.smartTradesState,a=e.smartTradesDispatch,n=Object(r.useContext)(je).accountsState.accounts,c=t.filters,s=t.hasMore,i=t.list,o=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setSmartTradesFilters",payload:Object(O.a)(Object(O.a)({},t.filters),r)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(n.map((function(e){return{value:e.id,label:Object(m.jsxs)("div",{className:"AccountFilterItem",children:[Object(m.jsx)("div",{children:Object(m.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(m.jsx)("span",{children:e.name})]}),label_id:e.name}})))),u=[{value:"",label:"All"},{value:"simple_buy",label:"Simple buy"},{value:"simple_sell",label:"Simple sell"},{value:"smart_sell",label:"Smart sell"},{value:"smart_cover",label:"Smart cover"},{value:"smart_buy",label:"Smart buy"}],j=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"finished",label:"Finished"},{value:"successfully_finished",label:"Successfully finished"},{value:"cancelled",label:"Cancelled"},{value:"failed",label:"Failed"}],p=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"profit_percentage-desc",label:"Profit percentage (Highest First)"},{value:"profit_percentage-asc",label:"Profit percentage (Lowest First)"},{value:"created_at-desc",label:"Opened (Youngest first)"},{value:"created_at-asc",label:"Opened (Oldest first)"},{value:"closed_at-desc",label:"Closed (Youngest first)"},{value:"closed_at-asc",label:"Closed (Oldest first)"},{value:"status-desc",label:"Status (Highest First)"},{value:"status-asc",label:"Status (Lowest First)"}];return Object(r.useEffect)((function(){try{localStorage.setItem("smartTradesFiltersState",JSON.stringify(c))}catch(e){}}),[c]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"SmartTradesFilters",children:[Object(m.jsx)("div",{className:"SmartTradesTimeRangeContainer",children:Object(m.jsx)(Be.a,{children:cr.map((function(e,t){return Object(m.jsx)(Ne.a,{id:"radio-".concat(t),type:"radio",disabled:s,variant:"outline-primary",name:"radio",value:e.value,checked:c.from.label===e.value,onChange:function(e){o({from:Object(O.a)(Object(O.a)({},c.from),{},{label:e.currentTarget.value})})},children:e.name},t)}))})}),"custom"===c.from.label&&Object(m.jsxs)("div",{className:"SmartTradesTimeRangeContainer",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"From"}),Object(m.jsx)(Xt.a,{dateFormat:"yyyy-MM-dd",disabled:s,selected:c.from.from?ge()(c.from.from).toDate():ge()().toDate(),onChange:function(e){o({from:{label:"custom",from:ge()(e).format("YYYY-MM-DD")}})},selectsStart:!0,className:"SmartTradesDateFilter",strictParsing:!0})]}),Object(m.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(m.jsx)(Ce.a,{isDisabled:s,onChange:function(e){o({accountId:e.value})},value:l.find((function(e){return e.value===c.accountId})),options:l,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(m.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(m.jsx)(Ce.a,{isDisabled:s,onChange:function(e){o({status:e.value})},value:j.find((function(e){return e.value===c.status})),options:j,className:"TypeFilter"})]}),Object(m.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Type"}),Object(m.jsx)(Ce.a,{isDisabled:s,onChange:function(e){o({type:e.value})},value:u.find((function(e){return e.value===c.type})),options:u,className:"TypeFilter"})]}),Object(m.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(m.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(m.jsx)(Ce.a,{isDisabled:s,onChange:function(e){o({sorting:e.value})},value:p.find((function(e){return e.value===c.sorting})),options:p,className:"Sorting"})]})]}),!s&&Object(m.jsx)("div",{className:"SmartTradesFilters",children:"Total: ".concat(i.length)})]})},ir=(a(335),a(336),{simple_buy:"Simple Buy",simple_sell:"Simple Sell",smart_sell:"Smart Sell",smart_trade:"Smart Trade",smart_cover:"Smart Cover",smart_buy:"Smart Buy"}),or=function(e){var t=e.accounts,a=e.setModalSmartTradeId,c=Object(r.useContext)(he).smartTradesState,s=c.list,i=c.smartTrades,o=n.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account.id},disableSortBy:!0,Cell:function(e){var a=e.cell.value,r=t.filter((function(e){return e.id===a}))[0];return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(r.market_icon,")")}}),Object(m.jsx)("div",{style:{width:"100px"},children:r.name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:a}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Side",accessor:function(e,t){return"buy"===e.position.type?"LONG":"SHORT"},id:"side",disableSortBy:!0},{Header:"Type",accessor:function(e,t){return ir[e.data.type]},id:"type",disableSortBy:!0},{Header:"Status",accessor:function(e,t){return e.status.title},id:"status",disableSortBy:!0},{Header:"PnL, %",accessor:function(e,t){var a=parseFloat(e.profit.percent);return a?Object(m.jsx)("div",{className:a>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:a,currency:"USD"}),"%")}):""},id:"pnl_percent",disableSortBy:!0},{Header:"PnL",accessor:function(e,t){var a=e.pair.split("_")[0],r=parseFloat(e.profit.volume);return r?Object(m.jsx)("div",{className:r>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Pe({value:r,currency:a})," ").concat(a)}):""},id:"pnl_quote",disableSortBy:!0},{Header:"PnL, $",accessor:function(e,t){var a=parseFloat(e.profit.usd);return a?Object(m.jsx)(wt.a,{bg:a>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(Pe({value:a,currency:"USD"}),"$")}):""},id:"pnl_usd",disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],r=e.pair.split("_")[1];return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:r}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.position.units.value,currency:r})," ").concat(r)})]}),Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Da,{currency:a}),Object(m.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Pe({value:e.position.total.value,currency:a})," ").concat(a)})]})]})},id:"volume",disableSortBy:!0},{Header:"Margin and Leverage",accessor:function(e,t){var a=e.pair.split("_")[1];return e.leverage.enabled?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{style:{display:"flex"},children:Object(m.jsx)("div",{children:"".concat(Pe({value:e.margin.total,currency:a})," ").concat(a)})}),Object(m.jsx)("div",{style:{display:"flex"},children:e.leverage&&Object(m.jsx)("div",{children:"x".concat(Math.floor(e.leverage.value)," ").concat(e.leverage.type)})})]}):""},id:"margin",disableSortBy:!0},{Header:"Created at",accessor:function(e,t){var a=ge()(e.data.created_at);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(m.jsx)("div",{children:a.format("HH:mm")})]})},id:"created_at",disableSortBy:!0},{Header:"Closed at",accessor:function(e,t){var a=ge()(e.data.closed_at);return e.data.closed_at&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(m.jsx)("div",{children:a.format("HH:mm")})]})},id:"closed_at",disableSortBy:!0}]}),[]),l=Object(It.useTable)({columns:o,data:s.map((function(e){return i[e]}))}),u=l.getTableProps,d=l.getTableBodyProps,b=l.headerGroups,j=l.rows,f=l.prepareRow;return Object(m.jsx)("div",{className:"SmartTradesTable",children:Object(m.jsxs)(Tt.a,Object(O.a)(Object(O.a)({hover:!0},u()),{},{children:[Object(m.jsx)("thead",{style:{fontSize:"14px"},children:b.map((function(e){return Object(m.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(m.jsx)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps()),{},{children:Object(m.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(m.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(m.jsx)("tbody",Object(O.a)(Object(O.a)({style:{fontSize:"14px"}},d()),{},{children:j.map((function(e,t){return f(e),Object(m.jsx)("tr",Object(O.a)(Object(O.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){a(e.original.id)},children:e.cells.map((function(e){return Object(m.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},lr=function(){var e=Object(r.useContext)(je).accountsState.accounts,t=Object(r.useState)(""),a=Object(j.a)(t,2),n=a[0],c=a[1];return Object(m.jsxs)("div",{className:"SmartTradesList",children:[Object(m.jsx)(nr,{}),Object(m.jsx)(sr,{}),e.length>0&&Object(m.jsx)(or,{accounts:e,setModalSmartTradeId:c}),!!n&&Object(m.jsx)(ar,{modalIsOpen:!!n,setModalIsOpen:c,smartTradeId:n})]})},ur=function(){var e=Object(r.useContext)(he),t=e.smartTradesState,a=e.smartTradesDispatch,n=Object(r.useContext)(pe).errorsDispatch,c=t.filters;return Object(r.useEffect)((function(){(function(e,t,a,r){return Ka.apply(this,arguments)})(a,t,n).then()}),[c]),Object(m.jsx)("div",{className:"SmartTrades",children:Object(m.jsx)(lr,{})})},dr=function(){return Object(m.jsx)(l.d,{children:Object(m.jsxs)(l.b,{path:"/",element:Object(m.jsx)(xe,{}),children:[Object(m.jsx)(l.b,{index:!0,element:Object(m.jsx)(oa,{})}),Object(m.jsx)(l.b,{path:":botId",element:Object(m.jsx)(ta,{})}),Object(m.jsx)(l.b,{path:"/gridbots",element:Object(m.jsx)(za,{})}),Object(m.jsx)(l.b,{path:"/smarttrades",element:Object(m.jsx)(ur,{})})]})})};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(dr,{})})}),document.getElementById("root")),i()}},[[337,1,2]]]);
//# sourceMappingURL=main.08231d74.chunk.js.map