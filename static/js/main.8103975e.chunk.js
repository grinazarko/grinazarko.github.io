(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{157:function(e,t,r){},160:function(e,t,r){},161:function(e,t,r){},162:function(e,t,r){},164:function(e,t,r){},167:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(23),s=r.n(c),o=(r(89),r(3)),i=r.n(o),u=r(11),l=r(5),d=r(12),b=(r(91),r(2)),f=r(49),j=(r(92),r(57)),p=r.n(j),h=r(58),O=r.n(h),v=new O.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),x={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},m=new O.a(x);function g(e,t){return p.a.algo.HMAC.create(p.a.algo.SHA256,t).update(e).finalize().toString(p.a.enc.Hex)}var y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v,n=new URLSearchParams(window.location.search).get("api_key")||"",a=new URLSearchParams(window.location.search).get("secret")||"";return r.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:n,Signature:g(t,a)}})}))},w=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,a,c,s){var o,u,d,b,f,j,p=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>6&&void 0!==p[6]&&p[6],u=n.split("-"),d=Object(l.a)(u,2),b=d[0],f=d[1],j=function(){return"/public/api/ver1/bots?offset=".concat(o?0:t,"&limit=").concat(r,"&sort_by=").concat(b,"&sort_direction=").concat(f).concat(a?"&scope=".concat(a):"").concat(c?"&strategy=".concat(c):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",y("GET",j()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a,c,s){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("GET","/public/api/ver1/accounts").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,a,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(r,"&limit=").concat(n,"&scope=").concat(a,"&order=").concat(c),m).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n,a,c){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=r(25),B=r.n(N);function I(e,t){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(i.a.mark((function e(t,r){var n,a,c,s,o,u,l,d,b,f,j,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r&&r.id){e.next=2;break}return e.abrupt("return",0);case 2:if(n=parseInt(t.max_active_deals),a=parseFloat(t.base_order_volume),c=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),o=parseFloat(t.leverage_custom_value),u=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],d=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,E(r.market_code,l,a,s);case 13:b=e.sent,a=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,E(r.market_code,d,a,s);case 21:f=e.sent,a=f.baseOrderVolume,s=f.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,L(t.account_id,l,d,r.market_code,t.strategy,a,s);case 29:j=e.sent,a=j.baseOrderVolume,s=j.safetyOrderVolume;case 32:return o&&(a/=o,s/=o),p=0,1!==u&&c>1?(h=s*(1-Math.pow(u,c))/(1-u),p=(h+a)*n):p=(c*s+a)*n,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(){var e=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(1));case 4:return e.next=6,y("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(r)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,a){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t,r);case 2:return c=e.sent,e.abrupt("return",{baseOrderVolume:n*c,safetyOrderVolume:a*c});case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(i.a.mark((function e(t,r,n,a,c,s,o){var u,l,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=M(a)&&"short"===c?n:r,e.next=3,y("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,d=l.find((function(e){return e.currency_code===u})),b=0,d&&(b=(parseFloat(d.equity)-parseFloat(d.on_orders))*parseFloat(d.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*b/100,safetyOrderVolume:o*b/100});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n,a,c,s,o){return e.apply(this,arguments)}}(),M=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function A(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}function T(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var P=function(e){return{type:"setNewBotsList",payload:e}},R=function(e){return{type:"setHasMore",payload:e}},U=function(e){return{type:"addToBotsList",payload:e}},Y=function(e){return{type:"setBotsOffset",payload:e}},V=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function G(e,t,r){return W.apply(this,arguments)}function W(){return W=Object(u.a)(i.a.mark((function e(t,r,n){var a,c,s,o,u,l,d,b,f,j,p,h=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]&&h[3],c=h.length>4?h[4]:void 0,t(R(!0)),s=r.offset,o=r.limit,u=r.filters,l=u.sorting,d=u.scope,b=u.type,f=u.account,j=c||o,e.prev=5,e.next=8,w(s,j,l,d,b,f,a);case 8:p=e.sent,a?(t(Y(j)),t(P(p))):(t(Y(s+j)),t(U(p))),p.length<j&&t(R(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(P([])),t(Y(j)),t(R(!1)),n({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),W.apply(this,arguments)}function H(){return(H=Object(u.a)(i.a.mark((function e(t,r,n,a,c){var s,o,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.bots,o=s[a],e.prev=2,"maxUsage"in s[a]){e.next=9;break}return e.next=6,I(o,c);case 6:u=e.sent,l=Object(b.a)(Object(b.a)({},o),{},{maxUsage:u}),t(V(o.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),d=Object(b.a)(Object(b.a)({},o),{},{maxUsage:0}),t(V(o.id,d)),n({type:"addError",payload:"Error when fetching max usage for bot ".concat(o.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function $(){return($=Object(u.a)(i.a.mark((function e(t,r,n,a){var c,s,o,u,l,d,f,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.bots,s=c[a],e.prev=2,"fundsLocked"in c[a]){e.next=12;break}return e.next=6,C(a);case 6:o=e.sent,u=o.profits_in_usd,l=u.today_usd_profit,d=u.funds_locked_in_active_deals,f=Object(b.a)(Object(b.a)({},s),{},{fundsLocked:d,todayUsdProfit:l}),t(V(s.id,f));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j=Object(b.a)(Object(b.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(V(s.id,j)),n({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function q(){return(q=Object(u.a)(i.a.mark((function e(t,r,n,a,c){var s,o,u,l,d,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=r.bots,o=s[c];try{u=n.deals[c].per30d,l=o.maxUsage,d=Object(b.a)(Object(b.a)({},o),{},{returns:T(l,u)}),t(V(o.id,d))}catch(i){f=Object(b.a)(Object(b.a)({},o),{},{returns:0}),t(V(o.id,f)),a({type:"addError",payload:"Error when getting returns for bot ".concat(o.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=r(1),K=function(){var e=Object(n.useContext)($e),t=e.botsState,r=e.botsDispatch,a=Object(n.useContext)(He).errorsDispatch,c=Object(n.useContext)(Ge).accountsState.accounts,s=t.filters,o=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:"setBotsFilters",payload:Object(b.a)(Object(b.a)({},t.filters),n)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=[{value:"",label:"All",label_id:"All"}].concat(Object(d.a)(c.map((function(e){return{value:e.id,label:Object(J.jsxs)("div",{className:"AccountFilterItem",children:[Object(J.jsx)("div",{children:Object(J.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(J.jsx)("span",{children:e.name})]}),label_id:e.name}})))),j=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],p=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],h=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(n.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(s))}catch(e){}G(r,t,a,!0).then()}),[s]),Object(J.jsxs)("div",{className:"BotsFilters",children:[Object(J.jsxs)("div",{className:"BotsFilterGroup",children:[Object(J.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(J.jsx)(f.a,{onChange:function(e){o({account:e.value})},value:l.find((function(e){return e.value===s.account})),options:l,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(J.jsxs)("div",{className:"BotsFilterGroup",children:[Object(J.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(J.jsx)(f.a,{onChange:function(e){o({scope:e.value})},value:j.find((function(e){return e.value===s.scope})),options:j,className:"ScopeFilter"})]}),Object(J.jsxs)("div",{className:"BotsFilterGroup",children:[Object(J.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(J.jsx)(f.a,{onChange:function(e){o({type:e.value})},value:p.find((function(e){return e.value===s.type})),options:p,className:"TypeFilter"})]}),Object(J.jsxs)("div",{className:"BotsFilterGroup",children:[Object(J.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(J.jsx)(f.a,{onChange:function(e){o({sorting:e.value})},value:h.find((function(e){return e.value===s.sorting})),options:h,className:"Sorting"})]})]})},z=r(172),Z=r(177),Q=r(174),X=r(173),ee=r(175),te=(r(157),r(20)),re=r.n(te),ne=function(e){return t=new Date,r=new Date(e.closed_at),Math.floor((t.getTime()-r.getTime())/36e5);var t,r},ae=function(){var e=Object(u.a)(i.a.mark((function e(t){var r,n,a,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=1e3,n=0,a=[],c=function(){var e=Object(u.a)(i.a.mark((function e(){var s,o,u,b,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t,n,r,"finished","closed_at");case 2:if(s=e.sent,o=s.slice(-1),u=Object(l.a)(o,1),b=u[0],!(s.length===r&&ne(b)<=720)){e.next=12;break}return f=s.filter((function(e){return ne(e)<=720})),n+=r,a=[].concat(Object(d.a)(a),Object(d.a)(f)),e.next=10,c();case 10:e.next=13;break;case 12:a=[].concat(Object(d.a)(a),Object(d.a)(s));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=6,c();case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e,t){return t.reduce((function(t,r){var n=function(e){var t=B.a.groupBy(e,(function(e){return re()(e.closed_at).format("YYYY-MM-DD")}));return B.a.mapValues(t,(function(e){return B.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e.deals[r].per30d);return B.a.mergeWith(n,t,(function(e,t){return(e=e||0)+(t=t||0)}))}),{})},se=function(e){var t=Object(d.a)(new Array(30)).map((function(e,t){return re()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse(),r=t.map((function(t){return t in e?e[t]:0}));return[t.map((function(e){return re()(e,"YYYY-MM-DD")})),r]},oe=function(e,t){return{type:"getDealsListForBotFor30Days",payload:{deals:e,botId:t}}};function ie(e,t,r,n){return ue.apply(this,arguments)}function ue(){return(ue=Object(u.a)(i.a.mark((function e(t,r,n,a){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.deals,e.prev=1,!(a in c)||!("per30d"in c[a])){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ae(a);case 6:s=e.sent,r(oe(s,a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||n({type:"addError",payload:"Error when fetching deals for bot ".concat(a)});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var le={nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TradingView Screener",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"},de=function(e){var t=e.botItem,r=e.account,a=Object(n.useContext)(qe),c=a.dealsState,s=a.dealsDispatch,o=Object(n.useContext)($e),d=o.botsState,b=o.botsDispatch,f=Object(n.useContext)(He).errorsDispatch,j=Object(n.useContext)(We).strategiesState,p=Object(n.useState)(!1),h=Object(l.a)(p,2),O=h[0],v=h[1],x=c.deals;Object(n.useEffect)((function(){(function(e,t,r,n){return $.apply(this,arguments)})(b,d,f,t.id).then((function(){v(!0)}))}),[t]),Object(n.useEffect)((function(){O&&function(e,t,r,n,a){return H.apply(this,arguments)}(b,d,f,t.id,r).then()}),[r,t,O]),Object(n.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&t.id in x&&"per30d"in x[t.id]&&function(e,t,r,n,a){q.apply(this,arguments)}(b,d,c,f,t.id)}),[x,t]);var m,g,y=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie(c,s,f,t.id);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=(m=new Date,g=new Date(t.created_at),Math.floor((m.getTime()-g.getTime())/864e5)),_=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),k=function(e,t,r){if(r.length>1)return"Combined";var n=r[0].strategy;if(n in t)return t[n];var a=e.strategies.find((function(e){return e.strategy_key===n}));return a?a.name:n}(j,le,t.strategy_list);return Object(J.jsx)("div",{className:"BotPreview",children:Object(J.jsxs)("div",{className:"BotPreviewRow",children:[Object(J.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:[Object(J.jsx)(be,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:r.market_icon}),Object(J.jsx)(je,{strategy:t.strategy,age:w,is_enabled:t.is_enabled}),Object(J.jsx)("div",{className:"BotReturns",children:Object(J.jsx)(pe,{returns:t.returns,getReturns:y,maxUsage:t.maxUsage,botId:t.id})})]}),Object(J.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(J.jsx)(fe,{name:t.name}),Object(J.jsx)(z.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(J.jsxs)("tbody",{children:[Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(J.jsx)("td",{children:r.name})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(J.jsx)("td",{children:t.id})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(J.jsx)("td",{children:k})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(J.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(J.jsx)("td",{children:_.format(t.todayUsdProfit)})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(J.jsx)("td",{children:_.format(t.finished_deals_profit_usd)})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(J.jsx)("td",{children:"".concat(_.format(A(t)),"/").concat(_.format(t.maxUsage))})]}),Object(J.jsxs)("tr",{children:[Object(J.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(J.jsx)("td",{children:_.format(t.active_deals_usd_profit)})]})]})})]})]})})},be=function(e){var t=e.botType,r=e.strategy,n=e.botId,a=e.marketIcon;return Object(J.jsxs)("div",{className:"IconsSetContainer",children:[Object(J.jsx)("div",{className:"BotTypeIconContainer",children:"Bot::SingleBot"===t?"S":"M"}),Object(J.jsx)("div",{className:"BotMarketIconContainer",children:Object(J.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(a,")")}})}),Object(J.jsx)("div",{className:"RobotsIconContainer",children:Object(J.jsx)("img",{src:"/robotsIcons/robots-vector-free-icon-set-".concat("short"===r?"2":"3").concat(String(n).slice(-1),".png"),alt:"logo",className:"RobotsIcon"})})]})},fe=function(e){var t=e.name;return Object(J.jsx)("div",{className:"BotNameContainer",children:Object(J.jsx)("span",{className:"BotName",children:t})})},je=function(e){var t=e.strategy,r=e.age,n=e.is_enabled;return Object(J.jsxs)("div",{className:"BotInfoContainer",children:[Object(J.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(J.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(J.jsx)(X.a,{bg:"success",children:"Long"}):Object(J.jsx)(X.a,{bg:"danger",children:"Short"})]}),Object(J.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(J.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(J.jsx)("div",{className:"BotInfoValue",children:"".concat(r," days")})]}),!n&&Object(J.jsx)("div",{className:"BotInfoRecordContainer",children:Object(J.jsx)(X.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},pe=function(e){var t=e.returns,r=e.getReturns,n=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),a=t||0===t;return Object(J.jsx)(Z.a,{placement:"right",delay:{show:100,hide:200},overlay:Object(J.jsx)(Q.a,{children:"30 days profit / Max usage"}),children:Object(J.jsxs)("div",{className:"BotReturnsContainer",children:[a&&Object(J.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(n.format(t||0))}),Object(J.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!a&&Object(J.jsx)(ee.a,{onClick:function(){r()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},he=r(83),Oe=(r(160),r(176)),ve=r(7),xe=r(180),me=function(e,t){return t in e.deals&&e.deals[t]&&"per30d"in e.deals[t]},ge=(r(161),r(59)),ye={scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Total Profit (30 days), $"},tooltip:{intersect:!1,mode:"x"}}},we={lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:"Total Accumulative Profit (30 days), $"},tooltip:{intersect:!1,mode:"x"}}},_e=function(){var e=Object(n.useContext)($e),t=e.botsState,r=e.botsDispatch,a=Object(n.useContext)(qe),c=a.dealsState,s=a.dealsDispatch,o=c.deals,d=t.list,f=t.hasMore,j=t.offset,p=t.bots,h=Object(n.useContext)(He).errorsDispatch,v=Object(n.useState)(!1),g=Object(l.a)(v,2),y=g[0],w=g[1],_=Object(n.useState)(!1),k=Object(l.a)(_,2),S=k[0],C=k[1],N=Object(n.useState)(0),I=Object(l.a)(N,2),F=I[0],D=I[1],E=Object(n.useState)([[],[]]),L=Object(l.a)(E,2),M=L[0],T=L[1],P=Object(n.useState)([[],[]]),R=Object(l.a)(P,2),U=R[0],Y=R[1],V=Object(n.useState)([[],[],[]]),W=Object(l.a)(V,2),H=W[0],$=W[1],q=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||0===j){e.next=3;break}return e.next=3,G(r,t,h,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){q().then((function(){f||C(!0)}))}),[j]);var K,z=function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Math.random(),m=new O.a(Object(b.a)(Object(b.a)({},x),{},{id:a})),t=Object(ve.a)(d),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=11;break}if(n=r.value,me(c,n)){e.next=9;break}return e.next=9,ie(c,s,h,n);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}var a}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S&&z().then((function(){w(!0)}))}),[S]),Object(n.useEffect)((function(){if(y){var e=ce(c,d);T(se(e)),Y(function(e){var t=se(e),r=0,n=t[1].map((function(e){var t=r+e;return r=t,t}));return[t[0],n]}(e)),$(function(e){var t=e.list.map((function(t){var r=e.bots[t];return{maxUsage:r.maxUsage||0,name:r.name,fundsLocked:A(r)}})),r=B.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[r.map((function(e){return e.name})),r.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),r.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[y,p]),Object(n.useEffect)((function(){return function(){var e=m;e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(n.useEffect)((function(){var e=d.filter((function(e){return me(c,e)}));D(e.length/d.length*100)}),[o]),Object(J.jsxs)("div",{className:"BotsListCharts",children:[!y&&Object(J.jsx)("div",{className:"ProgressBar",children:S?Object(J.jsx)(xe.a,{now:Math.ceil(F),label:"".concat(Math.ceil(F),"%")}):Object(J.jsx)(xe.a,{animated:!0,now:100})}),y&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)("div",{className:"ChartContainer",children:Object(J.jsx)(ge.b,{options:we,data:{labels:U[0],datasets:[{label:"Accumulative Profit, $",data:U[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(J.jsx)("div",{className:"ChartContainer",children:Object(J.jsx)(ge.a,{options:ye,data:{labels:M[0],datasets:[{label:"Profit, $",data:M[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(J.jsx)("div",{className:"ChartContainer",children:Object(J.jsx)(ge.a,{options:(K=H[0],{indexAxis:"y",scales:{x:{stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(e){return K[e].length>35?K[e].slice(0,33)+"...":K[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Funds locked/Max usage, $"},tooltip:{intersect:!1,mode:"y"}}}),data:{labels:H[0],datasets:[{label:"Funds locked, $",data:H[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:H[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})},ke=function(){var e=Object(n.useContext)($e),t=e.botsState,r=e.botsDispatch,a=t.list,c=t.hasMore,s=t.filters,o=t.bots,d=Object(n.useContext)(Ge).accountsState.accounts,b=Object(n.useContext)(He).errorsDispatch,f=Object(n.useState)(!1),j=Object(l.a)(f,2),p=j[0],h=j[1],O=!c&&0===a.length;return Object(n.useEffect)((function(){h(!1)}),[s]),O?Object(J.jsx)("div",{className:"FallbackContainer",children:Object(J.jsx)("p",{style:{textAlign:"center"},children:Object(J.jsx)("b",{children:"No results found =("})})}):Object(J.jsxs)(he.a,{dataLength:a.length,next:Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G(r,t,b,!1);case 2:case"end":return e.stop()}}),e)}))),hasMore:c,loader:Object(J.jsx)("div",{className:"SpinnerContainer",children:Object(J.jsx)(Oe.a,{animation:"grow"})}),endMessage:Object(J.jsx)("p",{style:{textAlign:"center"},children:Object(J.jsx)("b",{children:"Yay! You have seen it all"})}),children:[p?Object(J.jsx)(_e,{}):Object(J.jsxs)("div",{className:"ShowChartsButtonContainer",children:[Object(J.jsx)(ee.a,{className:"ShowChartsButton",onClick:function(){h(!0)},children:"Click to load charts"}),Object(J.jsx)("div",{className:"ShowChartsDisclamer",children:"Be careful, it can take a while if there are many bots in the list!"})]}),Object(J.jsx)("div",{className:"BotsList",children:d.length>0&&a.map((function(e){return Object(J.jsx)(de,{botItem:o[e],account:(t=o[e].account_id,d.find((function(e){return e.id===t})))},e);var t}))})]})},Se=r(179),Ce=(r(162),function(){var e=Object(n.useContext)(He),t=e.errorsState.errors,r=e.errorsDispatch;return Object(J.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(J.jsxs)(Se.a,{variant:"danger",onClose:function(){r({type:"cleanErrors"})},dismissible:!0,children:[Object(J.jsx)(Se.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(J.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(J.jsx)(Se.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})}),Ne=r(9),Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(r){}return t?Object(b.a)(Object(b.a)({},e),{},{filters:t}):e},Ie={list:[],hasMore:!0,limit:10,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var r=t.payload.map((function(e){return e.id})),n=B.a.keyBy(t.payload,"id");return Object(b.a)(Object(b.a)({},e),{},{list:r,bots:n});case"setHasMore":return Object(b.a)(Object(b.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var a=t.payload.map((function(e){return e.id})),c=B.a.keyBy(t.payload,"id");return Object(b.a)(Object(b.a)({},e),{},{list:[].concat(Object(d.a)(e.list),Object(d.a)(a)),bots:Object(b.a)(Object(b.a)({},e.bots),c)});case"setBotsOffset":return Object(b.a)(Object(b.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(b.a)(Object(b.a)({},e),{},{filters:t.payload});case"setBot":return Object(b.a)(Object(b.a)({},e),{},{bots:Object(b.a)(Object(b.a)({},e.bots),{},Object(Ne.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var De={deals:{}};function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;if("getDealsListForBotFor30Days"===t.type)return Object(b.a)(Object(b.a)({},e),{},{deals:Object(b.a)(Object(b.a)({},e.deals),{},Object(Ne.a)({},t.payload.botId,Object(b.a)(Object(b.a)({},e.deals[t.payload.botId]),{},{per30d:t.payload.deals})))});throw new Error}var Le=r(17),Me=(r(163),r(178)),Ae=(r(164),function(){return Object(J.jsx)("div",{className:"NavBar",children:Object(J.jsxs)("div",{className:"NavBarContainer",children:[Object(J.jsx)("div",{className:"LogoContainer",children:Object(J.jsx)("img",{className:"Logo",src:"BotAn__icon.png",alt:"logo"})}),Object(J.jsx)("div",{className:"Navigation",children:Object(J.jsxs)(Me.a,{activeKey:"/",children:[Object(J.jsx)(Me.a.Item,{children:Object(J.jsx)(Me.a.Link,{children:"DCA Bots"})}),Object(J.jsx)(Me.a.Item,{children:Object(J.jsx)(Me.a.Link,{eventKey:"link-1",disabled:!0,children:"Grid Bots"})}),Object(J.jsx)(Me.a.Item,{children:Object(J.jsx)(Me.a.Link,{eventKey:"link-2",disabled:!0,children:"Smart Trades"})}),Object(J.jsx)(Me.a.Item,{children:Object(J.jsx)(Me.a.Link,{eventKey:"disabled",disabled:!0,children:"Accounts"})})]})}),Object(J.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(J.jsx)("span",{className:"SupportLabel",children:"Support"}),Object(J.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]})})});Le.e.register(Le.d,Le.m,Le.k,Le.b,Le.r,Le.s,Le.j,Le.h,Le.q,Le.g);var Te={accounts:[]},Pe={strategies:[]},Re={errors:[]};function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var r=new Set(e.errors);return r.add(t.payload),{errors:Object(d.a)(Array.from(r))};case"cleanErrors":return{errors:[]};default:throw new Error}}function Ye(){var e=arguments.length>1?arguments[1]:void 0;if("setAccounts"===e.type)return{accounts:Object(d.a)(e.payload)};throw new Error}function Ve(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(d.a)(e.payload)};throw new Error}var Ge=Object(n.createContext)({accountsState:Te,accountsDispatch:function(e){}}),We=Object(n.createContext)({strategiesState:Pe,strategiesDispatch:function(e){}}),He=Object(n.createContext)({errorsState:Re,errorsDispatch:function(e){}}),$e=Object(n.createContext)({botsState:Ie,botsDispatch:function(e){}}),qe=Object(n.createContext)({dealsState:De,dealsDispatch:function(e){}});var Je=function(){var e=Object(n.useReducer)(Fe,Ie,Be),t=Object(l.a)(e,2),r=t[0],a=t[1],c=Object(n.useReducer)(Ye,Te),s=Object(l.a)(c,2),o=s[0],d=s[1],b=Object(n.useReducer)(Ve,Pe),f=Object(l.a)(b,2),j=f[0],p=f[1],h=Object(n.useReducer)(Ue,Re),O=Object(l.a)(h,2),v=O[0],x=O[1],m=Object(n.useReducer)(Ee,De),g=Object(l.a)(m,2),y=g[0],w=g[1],k=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:t=e.sent,d({type:"setAccounts",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),d({type:"setAccounts",payload:[]}),x({type:"addError",payload:"Error when fetching accounts list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:t=e.sent,p({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),p({type:"setStrategies",payload:[]}),x({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){k(),C()}),[]),Object(J.jsx)(He.Provider,{value:{errorsState:v,errorsDispatch:x},children:Object(J.jsx)(We.Provider,{value:{strategiesState:j,strategiesDispatch:p},children:Object(J.jsx)(Ge.Provider,{value:{accountsState:o,accountsDispatch:d},children:Object(J.jsx)($e.Provider,{value:{botsState:r,botsDispatch:a},children:Object(J.jsx)(qe.Provider,{value:{dealsState:y,dealsDispatch:w},children:Object(J.jsxs)("div",{className:"App",children:[Object(J.jsx)(Ae,{}),Object(J.jsx)(K,{}),Object(J.jsx)(ke,{}),Object(J.jsx)(Ce,{})]})})})})})})},Ke=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,181)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};s.a.render(Object(J.jsx)(a.a.StrictMode,{children:Object(J.jsx)(Je,{})}),document.getElementById("root")),Ke()},89:function(e,t,r){},91:function(e,t,r){},92:function(e,t,r){},93:function(e,t){}},[[167,1,2]]]);
//# sourceMappingURL=main.8103975e.chunk.js.map