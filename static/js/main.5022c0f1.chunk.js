(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{190:function(e,t,a){},192:function(e,t,a){},193:function(e,t,a){},197:function(e,t){},245:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},256:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(32),s=a.n(c),i=(a(190),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,355)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))}),o=a(70),l=a(21),u=a(6),d=a.n(u),b=a(13),j=a(4),f=a(19),p=(a(192),a(340)),v=(a(193),a(0)),m=function(){var e=Object(n.useContext)(ue),t=e.errorsState.errors,a=e.errorsDispatch;return Object(v.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(v.jsxs)(p.a,{variant:"danger",onClose:function(){a({type:"cleanErrors"})},dismissible:!0,children:[Object(v.jsx)(p.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(v.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(v.jsx)(p.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})},h=a(15),O=a(2),x=a(14),g=a.n(x),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(a){}return t?Object(O.a)(Object(O.a)({},e),{},{filters:t}):e},_={list:[],hasMore:!0,limit:15,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var a=t.payload.map((function(e){return e.id})),n=g.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:a,bots:n});case"setHasMore":return Object(O.a)(Object(O.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var r=t.payload.map((function(e){return e.id})),c=g.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),bots:Object(O.a)(Object(O.a)({},e.bots),c)});case"setBotsOffset":return Object(O.a)(Object(O.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(O.a)(Object(O.a)({},e),{},{filters:t.payload});case"setBot":return Object(O.a)(Object(O.a)({},e),{},{bots:Object(O.a)(Object(O.a)({},e.bots),{},Object(h.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var I={deals:{}};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getDealsList":return Object(O.a)(Object(O.a)({},e),{},{deals:Object(O.a)(Object(O.a)({},e.deals),{},Object(h.a)({},t.payload.botId,Object(O.a)(Object(O.a)({},e.deals[t.payload.botId]),{},{list:t.payload.deals,period:t.payload.periodInDays})))});case"setOffset":return Object(O.a)(Object(O.a)({},e),{},{deals:Object(O.a)(Object(O.a)({},e.deals),{},Object(h.a)({},t.payload.botId,Object(O.a)(Object(O.a)({},e.deals[t.payload.botId]),{},{offset:t.payload.offset})))});case"resetDeals":if(t.payload.botId in e.deals){var a=g.a.omit(e.deals,[t.payload.botId]);return Object(O.a)(Object(O.a)({},e),{},{deals:a})}return Object(O.a)({},e);default:throw new Error}}var C=a(149),w=a.n(C),S=a(150),k=a.n(S),D=new k.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),T={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},F=new URLSearchParams(window.location.search).get("api_key")||"",A=new URLSearchParams(window.location.search).get("secret")||"",M=new k.a(T);function P(e){M=new k.a(Object(O.a)(Object(O.a)({},T),{},{id:e}))}function E(){return M}function L(e,t){return w.a.algo.HMAC.create(w.a.algo.SHA256,t).update(e).finalize().toString(w.a.enc.Hex)}var R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D;return a.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:F,Signature:L(t,A)}})}))},H=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c,s){var i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>6&&void 0!==p[6]&&p[6],o=n.split("-"),l=Object(j.a)(o,2),u=l[0],b=l[1],f=function(){return"/public/api/ver1/bots?offset=".concat(i?0:t,"&limit=").concat(a,"&sort_by=").concat(u,"&sort_direction=").concat(b).concat(r?"&scope=".concat(r):"").concat(c?"&strategy=".concat(c):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",R("GET",f()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,s){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c){var s,i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>5&&void 0!==p[5]?p[5]:"enabled",i=n.split("-"),o=Object(j.a)(i,2),l=o[0],u=o[1],b=c.map((function(e){return"&account_types[]=".concat(e)})).join(""),f=function(){return"/public/api/ver1/grid_bots?offset=".concat(t,"&limit=").concat(a,"&sort_by=").concat(l,"&sort_direction=").concat(u).concat(r?"&account_ids[]=".concat(r):b).concat(s?"&state=".concat(s):"")},e.abrupt("return",R("GET",f()).then((function(e){return e.json()})));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/bots/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/grid_bots/".concat(t,"/profits")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/grid_bots/".concat(t,"/market_orders")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/deals/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/accounts").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(n,"&scope=").concat(r,"&order=").concat(c),M).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=a(26),J=(a(244),a(183)),Z=(a(245),function(){var e=Object(n.useState)("DCA"),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(l.g)(),s=Object(l.f)();return Object(n.useEffect)((function(){"/"===s.pathname?r("DCA"):"/gridbots"===s.pathname&&r("grid")}),[s]),Object(v.jsx)("div",{className:"NavBar",children:Object(v.jsxs)("div",{className:"NavBarContainer",children:[Object(v.jsx)("div",{className:"LogoContainer",children:Object(v.jsx)("img",{className:"Logo",src:"BotAn__icon.png",alt:"logo"})}),Object(v.jsx)("div",{className:"Navigation",children:Object(v.jsxs)(J.a,{children:[Object(v.jsx)(J.a.Item,{children:Object(v.jsx)(J.a.Link,{active:"DCA"===a,onClick:function(){c({pathname:"/",search:window.location.search})},children:"DCA Bots"})}),Object(v.jsx)(J.a.Item,{children:Object(v.jsx)(J.a.Link,{active:"grid"===a,onClick:function(){c({pathname:"/gridbots",search:window.location.search})},children:"Grid Bots"})})]})}),Object(v.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(v.jsx)("span",{className:"SupportLabel",children:"Community"}),Object(v.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]})})}),X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=null;try{t=JSON.parse(localStorage.getItem("GridBotsFiltersState"))}catch(a){}return t?Object(O.a)(Object(O.a)({},e),{},{filters:t}):e},ee={list:[],hasMore:!0,limit:10,offset:0,filters:{accountType:"spot",account:"",sorting:"created_at-desc"},gridBots:{}};function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewGridBotsList":var a=t.payload.map((function(e){return e.id})),n=g.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:a,gridBots:n});case"setHasMore":return Object(O.a)(Object(O.a)({},e),{},{hasMore:t.payload});case"addToGridBotsList":var r=t.payload.map((function(e){return e.id})),c=g.a.keyBy(t.payload,"id");return Object(O.a)(Object(O.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),gridBots:Object(O.a)(Object(O.a)({},e.gridBots),c)});case"setGridBotsOffset":return Object(O.a)(Object(O.a)({},e),{},{offset:t.payload});case"setGridBotsFilters":return Object(O.a)(Object(O.a)({},e),{},{filters:t.payload});case"setGridBot":return Object(O.a)(Object(O.a)({},e),{},{gridBots:Object(O.a)(Object(O.a)({},e.gridBots),{},Object(h.a)({},t.payload.gridBotId,t.payload.gridBot))});default:throw new Error}}W.f.register(W.e,W.n,W.l,W.c,W.s,W.t,W.k,W.i,W.r,W.h,W.a);var ae={accounts:[]},ne={strategies:[]},re={errors:[]};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var a=new Set(e.errors);return a.add(t.payload),{errors:Object(f.a)(Array.from(a))};case"cleanErrors":return{errors:[]};default:throw new Error}}function se(){var e=arguments.length>1?arguments[1]:void 0;if("setAccounts"===e.type)return{accounts:Object(f.a)(e.payload)};throw new Error}function ie(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(f.a)(e.payload)};throw new Error}var oe=Object(n.createContext)({accountsState:ae,accountsDispatch:function(e){}}),le=Object(n.createContext)({strategiesState:ne,strategiesDispatch:function(e){}}),ue=Object(n.createContext)({errorsState:re,errorsDispatch:function(e){}}),de=Object(n.createContext)({botsState:_,botsDispatch:function(e){}}),be=Object(n.createContext)({gridBotsState:ee,gridBotsDispatch:function(e){}}),je=Object(n.createContext)({dealsState:I,dealsDispatch:function(e){}});var fe=function(){var e=Object(n.useReducer)(B,_,y),t=Object(j.a)(e,2),a=t[0],r=t[1],c=Object(n.useReducer)(te,ee,X),s=Object(j.a)(c,2),i=s[0],o=s[1],u=Object(n.useReducer)(se,ae),f=Object(j.a)(u,2),p=f[0],h=f[1],O=Object(n.useReducer)(ie,ne),x=Object(j.a)(O,2),g=x[0],C=x[1],w=Object(n.useReducer)(ce,re),S=Object(j.a)(w,2),k=S[0],D=S[1],T=Object(n.useReducer)(N,I),F=Object(j.a)(T,2),A=F[0],M=F[1],P=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:t=e.sent,h({type:"setAccounts",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),h({type:"setAccounts",payload:[]}),D({type:"addError",payload:"Error when fetching accounts list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$();case 3:t=e.sent,C({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C({type:"setStrategies",payload:[]}),D({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){P(),E()}),[]),Object(v.jsx)(ue.Provider,{value:{errorsState:k,errorsDispatch:D},children:Object(v.jsx)(le.Provider,{value:{strategiesState:g,strategiesDispatch:C},children:Object(v.jsx)(oe.Provider,{value:{accountsState:p,accountsDispatch:h},children:Object(v.jsx)(de.Provider,{value:{botsState:a,botsDispatch:r},children:Object(v.jsx)(be.Provider,{value:{gridBotsState:i,gridBotsDispatch:o},children:Object(v.jsx)(je.Provider,{value:{dealsState:A,dealsDispatch:M},children:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(Z,{}),Object(v.jsx)(l.a,{}),Object(v.jsx)(m,{})]})})})})})})})},pe=a(9),ve=a.n(pe),me=a(180),he=a(345),Oe=a(346),xe=a(347),ge=a(60);function ye(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(b.a)(d.a.mark((function e(t,a){var n,r,c,s,i,o,l,u,b,j,f,p,v;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&a.id){e.next=2;break}return e.abrupt("return",0);case 2:if(n=parseInt(t.max_active_deals),r=parseFloat(t.base_order_volume),c=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),i=parseFloat(t.leverage_custom_value),o=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],u=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,Ie(a.market_code,l,r,s);case 13:b=e.sent,r=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,Ie(a.market_code,u,r,s);case 21:j=e.sent,r=j.baseOrderVolume,s=j.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,Ne(t.account_id,l,u,a.market_code,t.strategy,r,s);case 29:f=e.sent,r=f.baseOrderVolume,s=f.safetyOrderVolume;case 32:return i&&(r/=i,s/=i),p=0,1!==o&&c>1?(v=s*(1-Math.pow(o,c))/(1-o),p=(v+r)*n):p=(c*s+r)*n,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Be=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(1));case 4:return e.next=6,R("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(t,a);case 2:return c=e.sent,e.abrupt("return",{baseOrderVolume:n*c,safetyOrderVolume:r*c});case 4:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(b.a)(d.a.mark((function e(t,a,n,r,c,s,i){var o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ce(r)&&"short"===c?n:a,e.next=3,R("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,u=l.find((function(e){return e.currency_code===o})),b=0,u&&(b=(parseFloat(u.equity)-parseFloat(u.on_orders))*parseFloat(u.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*b/100,safetyOrderVolume:i*b/100});case 8:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,s,i){return e.apply(this,arguments)}}(),Ce=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function we(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}var Se=function(e){var t=e.value,a=e.currency,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return a.includes("BTC")?new Intl.NumberFormat("en-IN",{maximumFractionDigits:6,signDisplay:n}).format(t):"marketPrice"===a?new Intl.NumberFormat("en-IN",{maximumFractionDigits:8,signDisplay:n}).format(t):new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,signDisplay:n}).format(t)};function ke(){return(ke=Object(b.a)(d.a.mark((function e(t,a){var n,r,c,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=n,s=0,!t.maxUsage){e.next=8;break}s=t.maxUsage,e.next=11;break;case 8:return e.next=10,ye(t,a);case 10:s=e.sent;case 11:return c="short"===t.strategy&&Ce(a.market_code)?r:n,e.next=14,Be(a.market_code,c);case 14:return i=e.sent,e.abrupt("return",{value:s/i,currency:c});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var Te=function(e,t){return Math.ceil(e.diff(t)/36e5)},Fe=function(e,t){return Math.ceil(e.diff(t)/864e5)},Ae=function(e){return Te(ve()(),ve()(e.closed_at))},Me=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,r,c,s,i,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:30,n=l.length>2&&void 0!==l[2]?l[2]:function(e){},r=24*a,c=1e3,s=0,i=[],o=function(){var e=Object(b.a)(d.a.mark((function e(){var a,l,u,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,s,c,"finished","closed_at");case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(l=a.slice(-1),u=Object(j.a)(l,1),b=u[0],!(a.length===c&&Ae(b)<=r)){e.next=14;break}return s+=c,i=[].concat(Object(f.a)(i),Object(f.a)(a)),n(s),e.next=12,o();case 12:e.next=16;break;case 14:p=a.filter((function(e){return Ae(e)<=r})),i=[].concat(Object(f.a)(i),Object(f.a)(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,o();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(e){var t=g.a.groupBy(e,(function(e){return ve()(e.closed_at).format("YYYY-MM-DD")}));return g.a.mapValues(t,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Object(f.a)(new Array(e)).map((function(e,t){return ve()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse()},Le=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Ee(t),n=a.map((function(t){return t in e?e[t]:0})),r=a.map((function(e){return ve()(e,"YYYY-MM-DD")}));return[r,n]},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Le(e,t),n=0,r=a[1].map((function(e){var t=n+e;return n=t,t}));return[a[0],r]},He=function(e){var t=Pe(e),a=e.length>0?Fe(ve()(),ve()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Le(t,a<30?30:a+1)},Ue=function(e){var t=function(e){var t=g.a.groupBy(e,"pair");return g.a.mapValues(t,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e),a=g()(t).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[a.map((function(e){return e[0].split("_").reverse().join("/")})),a.map((function(e){return e[1]}))]},Ge=1e5,Ye=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=30},Ve=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=Ge},ze=function(e,t){return Ye(e,t)?e.deals[t].list.filter((function(e){return Ae(e)<=720})):[]},qe=function(e,t){return Ve(e,t)?e.deals[t].list:[]},Qe=function(e){return{type:"setNewBotsList",payload:e}},$e=function(e){return{type:"setHasMore",payload:e}},Ke=function(e){return{type:"addToBotsList",payload:e}},We=function(e){return{type:"setBotsOffset",payload:e}},Je=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function Ze(e,t,a){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s,i,o,l,u,b,j,f,p,v=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>3&&void 0!==v[3]&&v[3],c=v.length>4?v[4]:void 0,t($e(!0)),s=a.offset,i=a.limit,o=a.filters,l=o.sorting,u=o.scope,b=o.type,j=o.account,f=c||i,e.prev=5,e.next=8,H(s,f,l,u,b,j,r);case 8:p=e.sent,r?(t(We(f)),t(Qe(p))):(t(We(s+f)),t(Ke(p))),p.length<f&&t($e(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(Qe([])),t(We(f)),t($e(!1)),n({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),Xe.apply(this,arguments)}function et(){return(et=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(r);case 3:c=e.sent,t(Je(r,c)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n({type:"addError",payload:"Error when fetching bot ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function tt(){return(tt=Object(b.a)(d.a.mark((function e(t,a,n,r,c){var s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.bots,i=s[r],e.prev=2,"maxUsage"in s[r]){e.next=9;break}return e.next=6,ye(i,c);case 6:o=e.sent,l=Object(O.a)(Object(O.a)({},i),{},{maxUsage:o}),t(Je(i.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),u=Object(O.a)(Object(O.a)({},i),{},{maxUsage:0}),t(Je(i.id,u)),n({type:"addError",payload:"Error when fetching max usage for bot ".concat(i.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function at(){return(at=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=a.bots,s=c[r],e.prev=2,"fundsLocked"in c[r]){e.next=12;break}return e.next=6,K(r);case 6:i=e.sent,o=i.profits_in_usd,l=o.today_usd_profit,u=o.funds_locked_in_active_deals,b=Object(O.a)(Object(O.a)({},s),{},{fundsLocked:u,todayUsdProfit:l}),t(Je(s.id,b));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j=Object(O.a)(Object(O.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(Je(s.id,j)),n({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function nt(){return(nt=Object(b.a)(d.a.mark((function e(t,a,n,r,c){var s,i,o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.bots,i=s[c];try{o=ze(n,c),l=i.maxUsage,u=Object(O.a)(Object(O.a)({},i),{},{returns:De(l,o)}),t(Je(i.id,u))}catch(d){b=Object(O.a)(Object(O.a)({},i),{},{returns:0}),t(Je(i.id,b)),r({type:"addError",payload:"Error when getting returns for bot ".concat(i.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rt=function(e,t,a){return{type:"getDealsList",payload:{deals:e,botId:t,periodInDays:a}}},ct=function(e,t){return{type:"setOffset",payload:{botId:e,offset:t}}},st=function(e){return{type:"resetDeals",payload:{botId:e}}};function it(e,t,a,n){return ot.apply(this,arguments)}function ot(){return(ot=Object(b.a)(d.a.mark((function e(t,a,n,r){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ye(t,r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Me(r,30);case 5:c=e.sent,a(rt(c,r,30)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||n({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function lt(e,t,a,n){return ut.apply(this,arguments)}function ut(){return ut=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=i.length>4&&void 0!==i[4]&&i[4],e.prev=1,!Ve(t,r)||c){e.next=4;break}return e.abrupt("return");case 4:return c&&a(st(r)),e.next=7,it(t,a,n,r);case 7:return e.next=9,Me(r,Ge,(function(e){a(ct(r,e))}));case 9:s=e.sent,a(rt(s,r,Ge)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||n({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),ut.apply(this,arguments)}var dt=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q(a,0,1e3,"active","closed_at");case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||t({type:"addError",payload:"Error when fetching active deals for bot ".concat(a)}),e.abrupt("return",Promise.resolve([]));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,a){return e.apply(this,arguments)}}();function bt(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}a(248);var jt=a(41),ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(O.a)({},t&&{label:t})}}}},pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(O.a)({},t&&{label:t})}}}},vt=function(e,t){return{indexAxis:"y",scales:{x:{stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{callback:function(e){return t[e].length>35?t[e].slice(0,33)+"...":t[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"y"}}}},mt=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scales:{x:{type:"time",time:{unit:t?"week":"month",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0,ticks:{stepSize:1}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},ht=(a(249),function(e){var t,a,n,r=e.deals,c=(e.timeRangeValue,e.dateLabelsDays),s=function(e,t){var a=g.a.groupBy(e,(function(e){return ve()(e.closed_at).format("YYYY-MM-DD")})),n=g.a.mapValues(a,(function(e){return e.length}));return t.map((function(e){return e in n?n[e]:0}))}(r,c),i=function(e){var t=g.a.countBy(e,(function(e){return e.localized_status})),a=["Cancelled","StopLoss","Failed","Completed","Closed at Market Price","Liquidated","Switched"],n=a.map((function(e){return t[e]}));return[a,n]}(r),o=function(e){var t=e.map((function(e){var t=ve()(e.created_at),a=e.closed_at?ve()(e.closed_at):ve()();return Te(a,t)})),a=g.a.countBy(t),n=g.a.keys(a).map((function(e){return parseInt(e)})),r=n.map((function(e){return a[e]}));return[n,r]}(r);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.a,{options:mt("Finished deals per day",c.length<70),data:{labels:c,datasets:[{label:"Finished deals",data:s,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.b,{options:{aspectRatio:1.7,plugins:{title:{display:!0,text:"Finished deals by Status"},tooltip:{callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return t?e+t:e}),0),n=t.data[e.dataIndex],r=Math.floor(n/a*100+.5),c=e.label;return"".concat(c,": ").concat(n," (").concat(r,"%)")}}},legend:{labels:{filter:function(e,t){return t.datasets[0].data[e.index]}}}}},width:300,data:{labels:i[0],datasets:[{data:i[1],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(39, 47, 148, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(39, 47, 148, 1)"],borderWidth:1}]}})}),Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.a,{options:(t="Finished deals duration histogram, hours",a="Duration, hours",n="Number of deals",{barPercentage:1.25,scales:{x:{type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:n}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x",callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return e+t})),n=t.data[e.dataIndex],r=Math.floor(n/a*100+.5);return" ".concat(n," deals (").concat(r,"%)")},title:function(e){var t=parseInt(e[0].label);return"Duration from ".concat(t-1," to ").concat(t," hours")}}}}}),data:{labels:o[0],datasets:[{label:"Finished deals",data:o[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Ot=(a(250),function(e){var t=e.deals,a=(e.timeRangeValue,e.dateLabelsDays,e.bot),r=Object(n.useState)([[],[]]),c=Object(j.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)([[],[]]),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(n.useState)([[],[]]),f=Object(j.a)(b,2),p=f[0],m=f[1];return Object(n.useEffect)((function(){i(function(e){var t=Pe(e),a=e.length>0?Fe(ve()(),ve()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Re(t,a<30?30:a+1)}(t)),d(He(t)),m(Ue(t))}),[t]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.c,{options:pt("Accumulative Profit, $"),data:{labels:s[0],datasets:[{label:"Accumulative Profit, $",data:s[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.a,{options:ft("Daily Profit, $"),data:{labels:u[0],datasets:[{label:"Profit, $",data:u[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),"Bot::SingleBot"!==a.type&&Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.a,{options:vt("Pairs leaderboard by profit",p[0]),data:{labels:p[0],datasets:[{label:"Profit, $",data:p[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),xt=(a(251),function(e){var t=e.bot,a=e.deals,r=e.account,c=e.infoKey,s=e.timeRangeValue,i=Object(n.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1];return Object(n.useEffect)((function(){if(a)if("allTime"===s){var e=a.length>0?Math.ceil((t=a.slice(-1).pop(),Fe(ve()(),ve()(t.created_at)))):0;u(Ee(e>30?e:30))}else"30d"===s&&u(Ee(30));var t}),[a]),Object(v.jsx)(v.Fragment,{children:a&&l&&t&&r&&Object(v.jsxs)("div",{className:"DCABotDetailsCharts",children:["main"===c&&Object(v.jsx)(ht,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"settings"===c&&Object(v.jsx)(ht,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"profits"===c&&Object(v.jsx)(Ot,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t})]})})}),gt=a(94),yt=(a(253),a(341)),_t=a(342),Bt=a(352),It=a(349),Nt={Cancelled:"secondary",StopLoss:"danger",Failed:"warning",Completed:"success","Closed at Market Price":"dark",Liquidated:"dark",Switched:"secondary"},Ct=function(e){e.bot;var t=e.deals,a=r.a.useMemo((function(){return[{Header:"ID",accessor:"id",disableSortBy:!0},{Header:"Pair",accessor:function(e,t){return e.pair.split("_").reverse().join("/")},id:"pair",disableSortBy:!0},{Header:"Status",accessor:"localized_status",Cell:function(e){var t=e.cell.value;return Object(v.jsx)(yt.a,{style:{fontSize:"12px"},bg:Nt[t],children:t})},disableSortBy:!0},{Header:"Start",accessor:function(e,t){return new Date(e.created_at)},id:"created_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:ve()(t).format("D MMM, YYYY")}),Object(v.jsx)("div",{children:ve()(t).format("HH:mm")})]})}},{Header:"End",accessor:function(e,t){return new Date(e.closed_at)},id:"closed_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:ve()(t).format("D MMM, YYYY")}),Object(v.jsx)("div",{children:ve()(t).format("HH:mm")})]})}},{Header:"Duration",accessor:function(e,t){var a=ve.a.utc(e.created_at);return(e.closed_at?ve.a.utc(e.closed_at):ve.a.utc()).diff(a)},id:"duration",Cell:function(e){var t=e.cell.value,a=ve.a.duration(t),n=Math.floor(a.asDays()),r=n?"".concat(n,"d "):"",c=a.hours(),s="".concat(c,"h "),i=a.minutes(),o="".concat(i,"m");return"".concat(r," ").concat(s," ").concat(o)}},{Header:"Avg. entry price",id:"bought_average_price",accessor:function(e,t){return"long"===e.strategy?e.bought_average_price:e.sold_average_price},Cell:function(e){var t=e.cell.value;return t?Se({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Close price",id:"sold_average_price",accessor:function(e,t){return"long"===e.strategy?e.sold_average_price:e.bought_average_price},Cell:function(e){var t=e.cell.value;return t?Se({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],n=e.pair.split("_")[1],r="long"===e.strategy?Se({value:e.bought_amount,currency:n}):Se({value:e.sold_amount,currency:n}),c="long"===e.strategy?Se({value:e.bought_volume,currency:a}):Se({value:e.sold_volume,currency:a});return"".concat(r," ").concat(n,"!").concat(c," ").concat(a)},id:"volume",Cell:function(e){var t=e.cell.value.split("!");return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:t[0]}),Object(v.jsx)("div",{children:t[1]})]})},disableSortBy:!0},{Header:"Filled SO",id:"completed_safety_orders_count",accessor:function(e,t){return"".concat(e.completed_safety_orders_count).concat(e.completed_manual_safety_orders_count?" (+".concat(e.completed_manual_safety_orders_count,")"):"")},disableSortBy:!0},{Header:"Profit, %",accessor:"final_profit_percentage",Cell:function(e){var t=e.cell.value;return"".concat(t,"%")},disableSortBy:!0},{Header:"Profit, $",accessor:"usd_final_profit",sortType:function(e,t){return(e=Number(e.original.usd_final_profit))>(t=Number(t.original.usd_final_profit))?1:-1},Cell:function(e){var t=e.cell.value,a=parseFloat(t);return Object(v.jsx)(yt.a,{style:{fontSize:"13px"},bg:a>=0?"success":"danger",children:"".concat(Se({value:a,currency:"USD"},"always")," $")})}},{Header:"Profit in Base",id:"profitBase",accessor:function(e,t){return"".concat(parseFloat(e.bought_amount)-parseFloat(e.sold_amount),"!").concat(e.pair.split("_")[1])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),n=t.split("!")[1];return Object(v.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(Se({value:a,currency:n},"always")," ").concat(n)})},disableSortBy:!0},{Header:"Profit in Quote",id:"profitQuote",accessor:function(e,t){return"".concat(parseFloat(e.sold_volume)-parseFloat(e.bought_volume),"!").concat(e.pair.split("_")[0])},Cell:function(e){var t=e.cell.value,a=parseFloat(t.split("!")[0]),n=t.split("!")[1];return Object(v.jsx)("span",{style:{color:a>=0?"green":"red"},children:"".concat(Se({value:a,currency:n},"always")," ").concat(n)})},disableSortBy:!0}]}),[]),n=Object(gt.useTable)({columns:a,data:t,disableSortRemove:!0,autoResetPage:!0,autoResetSortBy:!1,initialState:{pageSize:50,sortBy:[{id:"closed_at",desc:!0}]}},gt.useSortBy,gt.usePagination),c=n.getTableProps,s=n.getTableBodyProps,i=n.headerGroups,o=n.prepareRow,l=n.page,u=n.pageCount,d=n.gotoPage,b=n.nextPage,f=n.previousPage,p=n.state.pageIndex,m=r.a.useState(!1),h=Object(j.a)(m,2),x=h[0],g=h[1],y=r.a.useState(null),_=Object(j.a)(y,2),B=_[0],I=_[1];return Object(v.jsxs)("div",{className:"DCABotDetailsDealsTable",children:[Object(v.jsx)(St,{modalIsOpen:x,setModalIsOpen:g,dealId:B}),u>1&&Object(v.jsx)(wt,{pageIndex:p,pageCount:u,gotoPage:d,nextPage:b,previousPage:f}),Object(v.jsxs)(_t.a,Object(O.a)(Object(O.a)({striped:!0,bordered:!0},c()),{},{hover:!0,children:[Object(v.jsx)("thead",{style:{fontSize:"14px"},children:i.map((function(e){return Object(v.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsx)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(v.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(v.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(v.jsx)("tbody",Object(O.a)(Object(O.a)({style:{fontSize:"14px"}},s()),{},{children:l.map((function(e,t){return o(e),Object(v.jsx)("tr",Object(O.a)(Object(O.a)({},e.getRowProps()),{},{onClick:function(){I(e.original.id),g(!0)},style:{cursor:"pointer"},children:e.cells.map((function(e){return Object(v.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})},wt=function(e){var t=e.pageIndex,a=e.pageCount,n=e.gotoPage,r=e.nextPage,c=e.previousPage,s=function(e,t){return Array(t-e+1).fill(0).map((function(t,a){return e+a}))},i=function(e,t){return Object(v.jsx)(Bt.a.Item,{active:e===t,onClick:function(){n(e)},children:e+1},e)},o=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Bt.a.First,{onClick:function(){n(0)}}),Object(v.jsx)(Bt.a.Prev,{onClick:function(){c()}}),t-2<4&&i(t-2,t),t-1<4&&i(t-1,t)]})},l=function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Bt.a.Next,{onClick:function(){r()}}),Object(v.jsx)(Bt.a.Last,{onClick:function(){n(a-1)}})]})};return Object(v.jsxs)(v.Fragment,{children:[a<=16&&Object(v.jsx)(Bt.a,{children:s(0,a-1).map((function(e){return i(e,t)}))}),a>16&&Object(v.jsxs)(Bt.a,{children:[t<7&&Object(v.jsxs)(v.Fragment,{children:[s(0,6).map((function(e){return i(e,t)})),l()]}),t>=7&&t<=a-8&&Object(v.jsxs)(v.Fragment,{children:[o(),i(t-2,t),i(t-1,t),Object(v.jsx)(Bt.a.Item,{active:!0,children:t+1}),i(t+1,t),i(t+2,t),l()]}),a-t<8&&Object(v.jsxs)(v.Fragment,{children:[o(),s(a-7,a-1).map((function(e){return i(e,t)}))]})]})]})},St=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,c=e.dealId,s=r.a.useState(null),i=Object(j.a)(s,2),o=i[0],l=i[1];return Object(n.useEffect)((function(){c&&z(c).then((function(e){l(e)}))}),[c]),Object(v.jsx)(v.Fragment,{children:o&&Object(v.jsxs)(It.a,{show:t,onHide:function(){a(!1)},scrollable:!0,size:"lg",children:[Object(v.jsx)(It.a.Header,{closeButton:!0,children:Object(v.jsx)(It.a.Title,{children:o.id})}),Object(v.jsxs)(It.a.Body,{children:[o.bot_events.length>0&&Object(v.jsxs)(_t.a,{striped:!0,hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Date/Time"}),Object(v.jsx)("th",{children:"Message"})]})}),Object(v.jsx)("tbody",{children:o.bot_events.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:ve()(e.created_at).format("D MMM, YYYY HH:mm")}),Object(v.jsx)("td",{children:e.message})]},e.created_at)}))})]}),0===o.bot_events.length&&Object(v.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(v.jsxs)("p",{children:["\u201cNothing can last forever. There isn't any memory, no matter how intense, that doesn't fade out at last.\u201d"," "]}),Object(v.jsx)("footer",{className:"blockquote-footer",children:"Juan Rulfo"})]})]}),Object(v.jsx)(It.a.Footer,{children:Object(v.jsx)(me.a,{variant:"primary",onClick:function(){window.open("https://3commas.io/deals/".concat(c),"_blank")},children:"Open in 3commas"})})]})})},kt=a(344),Dt=a(353),Tt=a(350),Ft=a(343),At=(a(254),{nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TV",buy_or_strong_buy:"Buy",strong_buy:"Strong Buy",sell_or_strong_sell:"Sell",strong_sell:"Strong Sell",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"}),Mt=function(e,t){if(t in At)return At[t];var a=e.strategies.find((function(e){return e.strategy_key===t}));return a?a.name:t},Pt=function(e){var t=e.botItem,a=e.account,r=Object(n.useContext)(je),c=r.dealsState,s=r.dealsDispatch,i=Object(n.useContext)(de),o=i.botsState,u=i.botsDispatch,f=Object(n.useContext)(ue).errorsDispatch,p=Object(n.useContext)(le).strategiesState,m=Object(n.useState)(!1),h=Object(j.a)(m,2),O=h[0],x=h[1],g=Object(l.g)(),y=c.deals;Object(n.useEffect)((function(){(function(e,t,a,n){return at.apply(this,arguments)})(u,o,f,t.id).then((function(){x(!0)}))}),[t]),Object(n.useEffect)((function(){O&&function(e,t,a,n,r){return tt.apply(this,arguments)}(u,o,f,t.id,a).then()}),[a,t,O]),Object(n.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&Ye(c,t.id)&&function(e,t,a,n,r){nt.apply(this,arguments)}(u,o,c,f,t.id)}),[y,t]);var _=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(Math.random()),it(c,s,f,t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=Fe(ve()(),ve()(t.created_at)),I=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=1===t.strategy_list.length?Mt(p,t.strategy_list[0].strategy):"Combined";return Object(v.jsx)("div",{className:"BotPreview",children:Object(v.jsxs)("div",{className:"BotPreviewRow",children:[Object(v.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:["market_icon"in a&&Object(v.jsx)(Et,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:a.market_icon}),Object(v.jsx)(Rt,{strategy:t.strategy,age:B,is_enabled:t.is_enabled}),Object(v.jsx)("div",{className:"BotReturns",children:Object(v.jsx)(Ht,{returns:t.returns,getReturns:_,maxUsage:t.maxUsage,botId:t.id})})]}),Object(v.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(v.jsx)(Lt,{name:t.name}),Object(v.jsx)(_t.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(v.jsx)("td",{children:a.name})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(v.jsx)("td",{children:t.id})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(v.jsx)("td",{children:N})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(v.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(v.jsx)("td",{children:I.format(t.todayUsdProfit)})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(v.jsx)("td",{children:I.format(t.finished_deals_profit_usd)})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(v.jsx)("td",{children:"".concat(I.format(we(t)),"/").concat(I.format(t.maxUsage))})]}),Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(v.jsx)("td",{children:I.format(t.active_deals_usd_profit)})]})]})}),Object(v.jsx)("div",{className:"BotPreviewButtons",children:Object(v.jsx)(me.a,{variant:"primary",onClick:function(){g({pathname:"/".concat(t.id),search:window.location.search})},children:"View"})})]})]})})},Et=function(e){var t=e.botType,a=e.strategy,n=e.botId,r=e.marketIcon;return Object(v.jsxs)("div",{className:"IconsSetContainer",children:[Object(v.jsx)("div",{className:"BotTypeIconContainer",children:"Bot::SingleBot"===t?"S":"M"}),Object(v.jsx)("div",{className:"BotMarketIconContainer",children:Object(v.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(r,")")}})}),Object(v.jsx)("div",{className:"RobotsIconContainer",children:Object(v.jsx)("img",{src:"/robotsIcons/robots-vector-free-icon-set-".concat("short"===a?"2":"3").concat(String(n).slice(-1),".png"),alt:"logo",className:"RobotsIcon"})})]})},Lt=function(e){var t=e.name;return Object(v.jsx)("div",{className:"BotNameContainer",children:Object(v.jsx)("span",{className:"BotName",children:t})})},Rt=function(e){var t=e.strategy,a=e.age,n=e.is_enabled;return Object(v.jsxs)("div",{className:"BotInfoContainer",children:[Object(v.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(v.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(v.jsx)(yt.a,{bg:"success",children:"Long"}):Object(v.jsx)(yt.a,{bg:"danger",children:"Short"})]}),Object(v.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(v.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(v.jsx)("div",{className:"BotInfoValue",children:"".concat(a," days")})]}),!n&&Object(v.jsx)("div",{className:"BotInfoRecordContainer",children:Object(v.jsx)(yt.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},Ht=function(e){var t=e.returns,a=e.getReturns,n=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),r=t||0===t;return Object(v.jsx)(Tt.a,{placement:"right",delay:{show:100,hide:200},overlay:Object(v.jsx)(Ft.a,{children:"30 days profit / Max usage"}),children:Object(v.jsxs)("div",{className:"BotReturnsContainer",children:[r&&Object(v.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(n.format(t||0))}),Object(v.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!r&&Object(v.jsx)(me.a,{onClick:function(){a()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},Ut=(a(255),function(e){var t=e.account,a=e.bot,r=e.deals,c=Object(n.useContext)(le).strategiesState,s=Object(n.useContext)(ue).errorsDispatch,i=Object(n.useState)({value:0,currency:""}),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(n.useState)(0),b=Object(j.a)(d,2),f=b[0],p=b[1],m=Object(n.useState)({value:0,currency:""}),h=Object(j.a)(m,2),O=h[0],x=h[1],y=Object(n.useState)({value:0,currency:""}),_=Object(j.a)(y,2),B=_[0],I=_[1],N=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),C=1===a.pairs.length?a.pairs[0].split("_").reverse().join("/"):"".concat(a.pairs.length," pairs"),w=1===a.pairs.length?"":"".concat(a.pairs[0].split("_")[0]," market"),S=a.strategy_list.map((function(e){return Object(v.jsx)("div",{children:"".concat(Mt(c,e.strategy)).concat(e.options.type?", ".concat(Mt(c,e.options.type)):"").concat(e.options.percent?", ".concat(e.options.percent,"%"):"").concat(e.options.time?", ".concat(e.options.time):"").concat(e.options.points?", ".concat(e.options.points):"")},"".concat(Math.random()))}));Object(n.useEffect)((function(){a.id&&t.id&&(function(e,t){return ke.apply(this,arguments)}(a,t).then((function(e){x(e)})),dt(s,a.id).then((function(e){I(function(e,t,a){var n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=n,s=0;return"short"===t.strategy&&Ce(a.market_code)?(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_base_funds.toString())}),0),c=r):(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_quote_funds.toString())}),0),c=n),{value:s,currency:c}}(e,a,t)),u(function(e,t,a){var n=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],c=0,s=n;"long"===t.strategy?(c=e.reduce((function(e,t){return e+parseFloat(t.bought_volume)}),0),s=n):"short"===t.strategy&&Ce(a.market_code)?(c=e.reduce((function(e,t){return e+parseFloat(t.sold_amount)}),0),s=r):"short"!==t.strategy||Ce(a.market_code)||(c=e.reduce((function(e,t){return e+parseFloat(t.sold_volume)}),0),s=n);var i=parseFloat(t.leverage_custom_value);return{value:i?c/i:c,currency:s}}(e,a,t))})))}),[a,t]),Object(n.useEffect)((function(){O.value&&l.value&&p(l.value/O.value)}),[O,l]);var k=function(e){var t=e.map((function(e){var t=ve()(e.created_at);return(e.closed_at?ve()(e.closed_at):ve()()).diff(t)})),a=g.a.sum(t)/t.length||0;return ve.a.utc(a).format("HH:mm")}(r);return Object(v.jsxs)("div",{className:"BotInfoTable",children:[Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Account"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:t.name})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Bot pairs"}),Object(v.jsxs)("div",{className:"BotInfoTableRow",children:[Object(v.jsx)("div",{children:C}),Object(v.jsx)("div",{children:w})]})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Deal start condition"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:S})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Active deals/Max"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.active_deals_count,"/").concat(a.max_active_deals)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Funds used"}),Object(v.jsxs)("div",{className:"BotInfoTableRow",children:[Object(v.jsx)("div",{children:"".concat(Se(l)," ").concat(l.currency)}),Object(v.jsx)("div",{style:{fontSize:"10px"},children:"".concat(N.format(f)," of max usage")})]})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Max usage"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Se(O)," ").concat(O.currency)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Reserved funds"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Se(B)," ").concat(O.currency)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Total finished deals"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:r.length})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Avg deal duration"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(k," hrs")})]})]})}),Gt=(a(256),function(e){e.account;var t=e.bot,a=e.deals,r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"}),c=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),s=Object(n.useState)({value:0,currency:""}),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)({value:0,currency:""}),d=Object(j.a)(u,2),b=d[0],p=d[1],m=Object(n.useState)({value:0,currency:""}),h=Object(j.a)(m,2),O=h[0],x=h[1],y=Object(n.useState)({value:0,currency:""}),_=Object(j.a)(y,2),B=_[0],I=_[1],N=Object(n.useState)(0),C=Object(j.a)(N,2),w=C[0],S=C[1];return Object(n.useEffect)((function(){l(function(e){return{value:g.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.final_profit_percentage)})))||0,currency:"%"}}(a)),p(function(e){return{value:g.a.mean(e.filter((function(e){return"completed"===e.status})).map((function(e){return parseFloat(e.usd_final_profit)})))||0,currency:"$"}}(a)),x(function(e,t){var a=ve.a.utc(e),n=g.a.unzip(g.a.zip.apply(g.a,Object(f.a)(He(t))).filter((function(e){return!e[0].isBefore(a)})));return{value:g.a.mean(n[1]),currency:"$"}}(t.created_at,a)),t.maxUsage&&I({value:De(t.maxUsage,a),currency:"%"}),S(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0}(a))}),[a,t]),Object(v.jsxs)("div",{className:"BotInfoTable",children:[Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Today's profit/loss"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat((t.todayUsdProfit||0)<0?"showRed":"showGreen"),children:r.format(t.todayUsdProfit||0)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Total profit/loss"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(w<0?"showRed":"showGreen"),children:r.format(w)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Current uPnL"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(parseFloat(t.active_deals_usd_profit)<0?"showRed":"showGreen"),children:r.format(parseFloat(t.active_deals_usd_profit))})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Average TP, %"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(o.value<0?"showRed":"showGreen"),children:"".concat(Se(o),"%")})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Average profit from deal"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(b.value<0?"showRed":"showGreen"),children:r.format(b.value||0)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Average daily profit"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(O.value<0?"showRed":"showGreen"),children:r.format(O.value)})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Returns"}),Object(v.jsx)("div",{className:"BotInfoTableRow ".concat(B.value<0?"showRed":"showGreen"),children:c.format(B.value)})]})]})}),Yt=(a(257),function(e){var t=e.account,a=e.bot,r=Object(n.useState)({value:0,currency:"",additionalCurrency:""}),c=Object(j.a)(r,2),s=c[0],i=c[1],o=Object(n.useState)({value:0,currency:"",additionalCurrency:""}),l=Object(j.a)(o,2),u=l[0],d=l[1];Object(n.useEffect)((function(){a.id&&t.id&&(i(function(e,t){var a=e.pairs[0].split("_")[0],n=e.pairs[0].split("_")[1],r=a,c="";return"percent"===e.base_order_volume_type?(r="%",c="short"===e.strategy&&Ce(t.market_code)?n:""):r="quote_currency"===e.base_order_volume_type?a:n,{value:parseFloat(e.base_order_volume),currency:r,additionalCurrency:c}}(a,t)),d(function(e,t){var a=e.pairs[0].split("_")[0],n=e.pairs[0].split("_")[1],r=a,c="";return"percent"===e.safety_order_volume_type?(r="%",c="short"===e.strategy&&Ce(t.market_code)?n:""):r="quote_currency"===e.safety_order_volume_type?a:n,{value:parseFloat(e.safety_order_volume),currency:r,additionalCurrency:c}}(a,t)))}),[a,t]);var b=a.leverage_custom_value?parseInt(a.leverage_custom_value):"",f="not_specified"!==a.leverage_type?a.leverage_type:"";return Object(v.jsxs)("div",{className:"BotInfoTable",children:[Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Profit currency"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"quote_currency"===a.profit_currency?"Quote":"Base"})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Take profit (type)"}),Object(v.jsxs)("div",{className:"BotInfoTableRow",children:[Object(v.jsx)("div",{children:"".concat(Se({value:parseFloat(a.take_profit),currency:"%"}),"%")}),Object(v.jsx)("div",{children:"total"===a.take_profit_type?"(from total volume)":"(from base volume)"})]})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Trailing"}),Object(v.jsxs)("div",{className:"BotInfoTableRow",children:[a.trailing_enabled&&"".concat(Se({value:parseFloat(a.trailing_deviation),currency:"%"}),"%"),!a.trailing_enabled&&"OFF"]})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Stop loss (timeout)"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Se({value:parseFloat(a.stop_loss_percentage),currency:"%"}),"% (").concat(a.stop_loss_timeout_in_seconds," s)")})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Base order size (type)"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{children:"".concat(Se(s)," ").concat(s.currency).concat(s.additionalCurrency?" (".concat(s.additionalCurrency,")"):"")}),Object(v.jsx)("div",{children:"(".concat(a.start_order_type,")")})]})})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Leverage (type)"}),Object(v.jsxs)("div",{className:"BotInfoTableRow",children:[Object(v.jsx)("div",{children:b||"0"}),Object(v.jsx)("div",{children:f})]})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Max safety trades (active)"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.max_safety_orders," (").concat(a.active_safety_orders_count,")")})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"Price devition to open SO"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Se({value:parseFloat(a.safety_order_step_percentage),currency:"%"}),"%")})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"SO size"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:"".concat(Se(u)," ").concat(u.currency).concat(u.additionalCurrency?" (".concat(u.additionalCurrency,")"):"")})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"SO volume scale"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_volume_coefficient})]}),Object(v.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(v.jsx)("div",{className:"BotInfoTableHeader",children:"SO step scale"}),Object(v.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_step_coefficient})]})]})}),Vt=(a(258),function(e){var t=e.bot,a=e.deals,n=e.account,r=e.infoKey,c=e.setInfoKey,s=(e.timeRangeValue,Fe(ve()(),ve()(t.created_at)));return Object(v.jsxs)("div",{className:"DCABotDetailsInfo",children:[Object(v.jsxs)("div",{className:"DCABotDetailsInfoLogo",children:[Object(v.jsx)(Et,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:n.market_icon}),Object(v.jsx)(Rt,{strategy:t.strategy,age:s,is_enabled:t.is_enabled})]}),Object(v.jsx)("div",{className:"DCABotDetailsInfoTable",children:Object(v.jsxs)(kt.a,{activeKey:r,onSelect:function(e){return c(e)},children:[Object(v.jsx)(Dt.a,{eventKey:"main",title:"Main",tabClassName:"InfoTab",children:Object(v.jsx)(Ut,{account:n,bot:t,deals:a})}),Object(v.jsx)(Dt.a,{eventKey:"settings",title:"Settings",tabClassName:"InfoTab",children:Object(v.jsx)(Yt,{account:n,bot:t})}),Object(v.jsx)(Dt.a,{eventKey:"profits",title:"Profits",tabClassName:"InfoTab",children:Object(v.jsx)(Gt,{account:n,bot:t,deals:a})})]})})]})}),zt=a(168),qt=a.n(zt),Qt=(a(259),[{value:"all",label:"All"},{value:"Cancelled",label:"Cancelled"},{value:"StopLoss",label:"StopLoss"},{value:"Failed",label:"Failed"},{value:"Completed",label:"Completed"},{value:"Closed at Market Price",label:"Closed at Market Price"},{value:"Liquidated",label:"Liquidated"},{value:"Switched",label:"Switched"}]),$t=function(){var e=Object(l.h)(),t=Object(l.g)(),a=Object(n.useContext)(de),r=a.botsState,c=a.botsDispatch,s=Object(n.useContext)(je),i=s.dealsState,o=s.dealsDispatch,u=Object(n.useContext)(de).botsState.bots,d=Object(n.useContext)(ue).errorsDispatch,b=Object(n.useContext)(oe).accountsState.accounts,p=Object(n.useState)("30d"),m=Object(j.a)(p,2),h=m[0],x=m[1],g=Object(n.useState)(NaN),y=Object(j.a)(g,2),_=y[0],B=y[1],I=bt(_),N=Object(n.useState)(null),C=Object(j.a)(N,2),w=C[0],S=C[1],k=Object(n.useState)([]),D=Object(j.a)(k,2),T=D[0],F=D[1],A=Object(n.useState)(!1),M=Object(j.a)(A,2),L=M[0],R=M[1],H=Object(n.useState)(!1),U=Object(j.a)(H,2),G=U[0],Y=U[1],V=Object(n.useState)({}),z=Object(j.a)(V,2),q=z[0],Q=z[1],$=Object(n.useState)("main"),K=Object(j.a)($,2),W=K[0],J=K[1],Z=Object(n.useState)(0),X=Object(j.a)(Z,2),ee=X[0],te=X[1],ae=Object(n.useState)("all"),ne=Object(j.a)(ae,2),re=ne[0],ce=ne[1],se=Object(n.useState)("all"),ie=Object(j.a)(se,2),le=ie[0],be=ie[1],fe=Object(n.useState)([]),pe=Object(j.a)(fe,2),ye=pe[0],_e=pe[1],Be=Object(n.useState)(new Date("2018-04-02")),Ie=Object(j.a)(Be,2),Ne=Ie[0],Ce=Ie[1],we=Object(n.useState)(new Date),Se=Object(j.a)(we,2),ke=Se[0],De=Se[1],Te=function(){ce("all"),be("all"),Ce(new Date("2018-04-02")),De(new Date)},Fe=function(){P(Math.random()),function(e,t,a,n){et.apply(this,arguments)}(c,r,d,_),lt(i,o,d,_,!0)};return Object(n.useEffect)((function(){e.botId&&B(parseInt(e.botId))}),[e]),Object(n.useEffect)((function(){P(Math.random()),_&&!I&&lt(i,o,d,_)}),[_]),Object(n.useEffect)((function(){var e;w&&b.length>0&&Q((e=w.account_id,b.find((function(t){return t.id===e}))))}),[w,b]),Object(n.useEffect)((function(){_&&S(u[_])}),[_,u]),Object(n.useEffect)((function(){_&&("30d"===h?R(!Ye(i,_)):"allTime"===h&&R(!Ve(i,_)),Y(!Ve(i,_)))}),[i,h,_]),Object(n.useEffect)((function(){if(_){var e=[];"30d"===h?e=ze(i,_):"allTime"===h&&(e=qe(i,_)),Te(),F(e)}}),[L,G,h,_]),Object(n.useEffect)((function(){if(_){var e=[];"30d"===h?e=ze(i,_):"allTime"===h&&(e=qe(i,_)),e=function(e,t){return!t||ve()("01-04-2018","MM-DD-YYYY").isAfter(t,"day")?e:e.filter((function(e){return ve()(e.closed_at).isSame(t,"day")||ve()(e.closed_at).isAfter(t)}))}(e=function(e,t){return!t||ve()().isSame(t,"day")?e:e.filter((function(e){return ve()(e.closed_at).isSame(t,"day")||ve()(e.closed_at).isBefore(t)}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.localized_status===t}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.pair===t}))}(e,le),re),ke),Ne),F(e)}}),[le,re,Ne,ke]),Object(n.useEffect)((function(){if(_&&w&&i.deals[_]&&i.deals[_].offset){var e=i.deals[_].offset||0;te(Math.ceil(100*e/parseFloat(w.finished_deals_count)))}}),[i,_,w]),Object(n.useEffect)((function(){w&&_e([{value:"all",label:"All"}].concat(Object(f.a)(w.pairs.map((function(e){return{value:e,label:e.split("_").reverse().join("/")}})))))}),[w]),Object(n.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(v.jsxs)("div",{className:"DCABotDetails",children:[Object(v.jsx)(me.a,{variant:"primary",size:"sm",className:"DCABotDetailsGetBackButton",onClick:function(){t(-1)},children:"< Back to bots list"}),!G&&Object(v.jsx)(me.a,{variant:"primary",size:"sm",onClick:function(){Fe()},children:"Refresh data"}),L&&!ee&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(v.jsx)(he.a,{now:100,animated:!0,className:"BotDetailsProgressBar"})})}),L&&!!ee&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(v.jsx)(he.a,{now:ee,label:"".concat(ee,"%"),className:"BotDetailsProgressBar"})})}),!L&&w&&q&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(xt,{bot:w,deals:T,account:q,infoKey:W,timeRangeValue:h}),Object(v.jsxs)("div",{className:"BotDetailsControlsContainer",children:[Object(v.jsx)("div",{className:"BotDetailsControl",children:Object(v.jsx)(Oe.a,{children:[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}].map((function(e,t){return Object(v.jsx)(xe.a,{id:"radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:h===e.value,onChange:function(e){return x(e.currentTarget.value)},children:e.name},t)}))})}),Object(v.jsxs)("div",{className:"BotDetailsControl",children:[Object(v.jsx)("div",{className:"BotDetailsFilterTitle",children:"Status:"}),Object(v.jsx)(ge.a,{onChange:function(e){ce(e.value)},value:Qt.find((function(e){return e.value===re})),className:"BotDetailsStatusFilter",theme:function(e){return Object(O.a)(Object(O.a)({},e),{},{colors:Object(O.a)(Object(O.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})},options:Qt})]}),w&&w.pairs.length>1&&Object(v.jsxs)("div",{className:"BotDetailsControl",children:[Object(v.jsx)("div",{className:"BotDetailsFilterTitle",children:"Pair:"}),Object(v.jsx)(ge.a,{onChange:function(e){be(e.value)},value:ye.find((function(e){return e.value===le})),className:"BotDetailsPairFilter",options:ye,theme:function(e){return Object(O.a)(Object(O.a)({},e),{},{colors:Object(O.a)(Object(O.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})}})]}),"allTime"===h&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"BotDetailsControl",children:[Object(v.jsx)("div",{className:"BotDetailsFilterTitle",children:"From:"}),Object(v.jsx)(qt.a,{dateFormat:"dd/MM/yyyy",selected:Ne,onChange:function(e){Ce(e)},selectsStart:!0,startDate:Ne,endDate:ke,className:"BotDetailsDateFilter",strictParsing:!0})]}),Object(v.jsxs)("div",{className:"BotDetailsControl",children:[Object(v.jsx)("div",{className:"BotDetailsFilterTitle",children:"To:"}),Object(v.jsx)(qt.a,{dateFormat:"dd/MM/yyyy",selected:ke,onChange:function(e){return De(e)},selectsEnd:!0,startDate:Ne,endDate:ke,minDate:Ne,className:"BotDetailsDateFilter",strictParsing:!0})]})]}),Object(v.jsx)("div",{className:"BotDetailsControl",children:Object(v.jsx)(me.a,{variant:"primary",onClick:function(){Te()},children:"Clear filters"})})]}),Object(v.jsxs)("div",{className:"DCABotInfoGroup",children:[Object(v.jsx)("div",{className:"DCABotName",children:w.name}),Object(v.jsx)("div",{className:"DCABotId",children:"(Bot ID: ".concat(w.id,")")}),Object(v.jsx)("div",{className:"DCABotLinkTo3Commas",children:Object(v.jsx)(me.a,{onClick:function(){window.open("https://3commas.io/bots/".concat(_),"_blank")},variant:"link",size:"sm",active:!0,children:"Open in 3Commas"})})]}),Object(v.jsx)(Vt,{bot:w,deals:T,account:q,infoKey:W,setInfoKey:J,timeRangeValue:h}),T.length>0&&Object(v.jsx)(Ct,{bot:w,deals:T})]})]})},Kt=(a(317),function(){var e=Object(n.useContext)(de),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(oe).accountsState.accounts,c=t.filters,s=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setBotsFilters",payload:Object(O.a)(Object(O.a)({},t.filters),n)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(r.map((function(e){return{value:e.id,label:Object(v.jsxs)("div",{className:"AccountFilterItem",children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(v.jsx)("span",{children:e.name})]}),label_id:e.name}})))),o=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],l=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],u=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(n.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(c))}catch(e){}}),[c]),Object(v.jsxs)("div",{className:"BotsFilters",children:[Object(v.jsxs)("div",{className:"BotsFilterGroup",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(v.jsx)(ge.a,{onChange:function(e){s({account:e.value})},value:i.find((function(e){return e.value===c.account})),options:i,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(v.jsxs)("div",{className:"BotsFilterGroup",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(v.jsx)(ge.a,{onChange:function(e){s({scope:e.value})},value:o.find((function(e){return e.value===c.scope})),options:o,className:"ScopeFilter"})]}),Object(v.jsxs)("div",{className:"BotsFilterGroup",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(v.jsx)(ge.a,{onChange:function(e){s({type:e.value})},value:l.find((function(e){return e.value===c.type})),options:l,className:"TypeFilter"})]}),Object(v.jsxs)("div",{className:"BotsFilterGroup",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(v.jsx)(ge.a,{onChange:function(e){s({sorting:e.value})},value:u.find((function(e){return e.value===c.sorting})),options:u,className:"Sorting"})]})]})}),Wt=a(182),Jt=(a(318),a(348)),Zt=a(20),Xt=(a(319),function(){var e=Object(n.useContext)(de),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(je),c=r.dealsState,s=r.dealsDispatch,i=c.deals,o=t.list,l=t.hasMore,u=t.offset,f=t.bots,p=Object(n.useContext)(ue).errorsDispatch,m=Object(n.useState)(!1),h=Object(j.a)(m,2),O=h[0],x=h[1],y=Object(n.useState)(!1),_=Object(j.a)(y,2),B=_[0],I=_[1],N=Object(n.useState)(0),C=Object(j.a)(N,2),w=C[0],S=C[1],k=Object(n.useState)([[],[]]),D=Object(j.a)(k,2),T=D[0],F=D[1],A=Object(n.useState)([[],[]]),M=Object(j.a)(A,2),L=M[0],R=M[1],H=Object(n.useState)([[],[],[]]),U=Object(j.a)(H,2),G=U[0],Y=U[1],V=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||0===u){e.next=3;break}return e.next=3,Ze(a,t,p,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){V().then((function(){l||I(!0)}))}),[u]);var z=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(Math.random()),t=Object(Zt.a)(o),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}if(n=a.value,Ye(c,n)){e.next=9;break}return e.next=9,it(c,s,p,n);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){B&&z().then((function(){x(!0)}))}),[B]),Object(n.useEffect)((function(){if(O){var e=function(e,t){return t.reduce((function(t,a){var n=Pe(ze(e,a));return g.a.mergeWith(n,t,(function(e,t){return(e=e||0)+(t||0)}))}),{})}(c,o);F(Le(e)),R(Re(e)),Y(function(e){var t=e.list.map((function(t){var a=e.bots[t];return{maxUsage:a.maxUsage||0,name:a.name,fundsLocked:we(a)}})),a=g.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[a.map((function(e){return e.name})),a.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),a.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[O,f]),Object(n.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(n.useEffect)((function(){var e=o.filter((function(e){return Ye(c,e)}));S(e.length/o.length*100)}),[i]),Object(v.jsxs)("div",{className:"BotsListCharts",children:[!O&&Object(v.jsx)("div",{className:"ProgressBar",children:B?Object(v.jsx)(he.a,{now:Math.ceil(w),label:"".concat(Math.ceil(w),"%")}):Object(v.jsx)(he.a,{animated:!0,now:100})}),O&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"ChartContainer",children:Object(v.jsx)(jt.c,{options:pt("Total Accumulative Profit (30 days), $"),data:{labels:L[0],datasets:[{label:"Accumulative Profit, $",data:L[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(v.jsx)("div",{className:"ChartContainer",children:Object(v.jsx)(jt.a,{options:ft("Total Profit (30 days), $"),data:{labels:T[0],datasets:[{label:"Profit, $",data:T[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(v.jsx)("div",{className:"ChartContainer",children:Object(v.jsx)(jt.a,{options:vt("Funds locked/Max usage, $",G[0]),data:{labels:G[0],datasets:[{label:"Funds locked, $",data:G[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:G[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})}),ea=function(){var e=Object(n.useContext)(de),t=e.botsState,a=e.botsDispatch,r=Object(n.useContext)(je).dealsState.deals,c=t.list,s=t.hasMore,i=t.filters,o=t.bots,l=Object(n.useContext)(oe).accountsState.accounts,u=Object(n.useContext)(ue).errorsDispatch,f=Object(n.useState)(!1),p=Object(j.a)(f,2),m=p[0],h=p[1],O=!s&&0===c.length,x=bt(i);return Object(n.useEffect)((function(){!x&&c.length?h(function(e,t){return e.every((function(e){return e in t}))}(c,r)):(h(!1),Ze(a,t,u,!0).then())}),[i]),O?Object(v.jsx)("div",{className:"FallbackContainer",children:Object(v.jsx)("p",{style:{textAlign:"center"},children:Object(v.jsx)("b",{children:"No results found =("})})}):Object(v.jsxs)(Wt.a,{dataLength:c.length,next:Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.length){e.next=3;break}return e.next=3,Ze(a,t,u,!1);case 3:case"end":return e.stop()}}),e)}))),hasMore:s,loader:Object(v.jsx)("div",{className:"SpinnerContainer",children:Object(v.jsx)(Jt.a,{animation:"grow"})}),endMessage:Object(v.jsx)("p",{style:{textAlign:"center"},children:Object(v.jsx)("b",{children:"Yay! You have seen it all"})}),children:[m?Object(v.jsx)(Xt,{}):Object(v.jsx)("div",{className:"ShowChartsButtonContainer",children:Object(v.jsx)(me.a,{className:"ShowChartsButton",onClick:function(){h(!0)},children:"Calculate profits"})}),Object(v.jsx)("div",{className:"BotsList",children:l.length>0&&c.map((function(e){return Object(v.jsx)(Pt,{botItem:o[e],account:(t=o[e].account_id,l.find((function(e){return e.id===t})))},e);var t}))})]})},ta=(a(320),function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Kt,{}),Object(v.jsx)(ea,{})]})}),aa=(a(321),{BTC:"bitcoin",ETH:"ethereum",BNB:"binancecoin",USDT:"tether",USDC:"usd-coin",XRP:"ripple",TRX:"tron",BUSD:"binance-usd",DOGE:"dogecoin"}),na=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,r,c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=parseFloat(t.start_price),n=parseFloat(t.quantity_per_grid),(r=t.grid_lines.slice().sort((function(e,t){return Math.abs(a-parseFloat(e.price))-Math.abs(a-parseFloat(t.price))})).slice()).shift(),c=g.a.sum(r.filter((function(e){return parseFloat(e.price)>a})).map((function(e){return n}))),s=g.a.sum(r.filter((function(e){return parseFloat(e.price)<a})).map((function(e){return parseFloat(e.price)*n}))),i=s+c*a,o=0,l=t.pair.split("_")[0],u=ve.a.utc(t.updated_at),!l.includes("USD")){e.next=14;break}o=i,e.next=26;break;case 14:if(!(l in aa)){e.next=21;break}return e.next=17,fetch("https://api.coingecko.com/api/v3/coins/".concat(aa[l],"/history?date=").concat(u.format("DD-MM-YYYY"),"&localization=false")).then((function(e){return e.json()}));case 17:b=e.sent,o=i*b.market_data.current_price.usd,e.next=26;break;case 21:if(!(ve()().utc().diff(u,"days")<366)){e.next=26;break}return e.next=24,fetch("https://free.currconv.com/api/v7/convert?q=".concat(l,"_USD&compact=ultra&date=").concat(u.format("YYYY-MM-DD"),"&apiKey=e4dcebf8eb9df2180846")).then((function(e){return e.json()}));case 24:j=e.sent,o=i*j["".concat(l,"_USD")][u.format("YYYY-MM-DD")];case 26:return e.abrupt("return",{baseInvestment:c,quoteInvestment:s,allInQuote:i,allInUsd:o});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ra=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,n,r,c,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=parseFloat(t.current_price),n=parseFloat(t.investment_base_currency),r=parseFloat(t.investment_quote_currency),c=r+n*a,s=0,!(i=t.pair.split("_")[0]).includes("USD")){e.next=10;break}s=c,e.next=21;break;case 10:if(!(i in aa)){e.next=17;break}return e.next=13,fetch("https://api.3commas.io/public/api/ver1/accounts/currency_rates?market_code=binance&pair=USDT_".concat(i)).then((function(e){return e.json()}));case 13:o=e.sent,s=c*parseFloat(o.last),e.next=21;break;case 17:return e.next=19,fetch("https://api.3commas.io/public/api/ver1/accounts/currency_rates?market_code=binance&pair=".concat(i,"_USDT")).then((function(e){return e.json()}));case 19:l=e.sent,s=c/parseFloat(l.last);case 21:return e.abrupt("return",{baseInvestment:n,quoteInvestment:r,allInQuote:c,allInUsd:s});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ca=function(e){return e.filter((function(e){return function(e){return Te(ve()(),ve()(e.created_at))}(e)<=720}))},sa=function(e){return e.grid_lines_orders.filter((function(e){return function(e){return Te(ve()(),ve()(e.created_at))}(e)<=720}))},ia=function(e,t,a){var n=g.a.groupBy(e,(function(e){return ve()(e.created_at).format("YYYY-MM-DD")})),r=g.a.groupBy(t,(function(e){return ve()(e.updated_at).format("YYYY-MM-DD")})),c=g.a.mapValues(n,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.profit)})))})),s=g.a.mapValues(r,(function(e){return g.a.sum(e.map((function(e){return parseFloat(e.total)})))*a*.01*-1}));return g.a.mergeWith({},c,s,g.a.add)},oa=function(e){return{type:"setNewGridBotsList",payload:e}},la=function(e){return{type:"setHasMore",payload:e}},ua=function(e){return{type:"addToGridBotsList",payload:e}},da=function(e,t){return{type:"setGridBot",payload:{gridBotId:e,gridBot:t}}},ba=["Account::BinanceAccount","Accounts::Ftx","Account::HuobiAccount","Account::OkexAccount","Account::KucoinAccount","Account::GateIoAccount","Account::KrakenAccount","Account::BitfinexAccount","Account::BinanceUsAccount","Account::BitstampAccount","Accounts::GeminiAccount","Account::BittrexAccount","Account::GdaxAccount","Account::PaperTradingAccount"];function ja(){return(ja=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(la(!0)),t(oa([])),c=a.limit,s=a.filters,i=s.sorting,o=s.account,l=r||c,e.prev=4,u=0,b=!0;case 7:if(!b){e.next=16;break}return e.next=10,U(u,l,i,o,ba);case 10:j=e.sent,t(ua(j)),u+=l,j.length<l&&(b=!1),e.next=7;break;case 16:t(la(!1)),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(4),t(oa([])),t(la(!1)),n({type:"addError",payload:"Error when fetching grid bots list"});case 24:case"end":return e.stop()}}),e,null,[[4,19]])})))).apply(this,arguments)}function fa(e,t,a){return pa.apply(this,arguments)}function pa(){return(pa=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,c=r[n],e.prev=2,"initialInvestments"in c){e.next=8;break}return e.next=6,na(c);case 6:return s=e.sent,e.abrupt("return",s);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching initial investments for grid bot ".concat(c.name)}),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function va(e,t,a){return ma.apply(this,arguments)}function ma(){return(ma=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,c=r[n],e.prev=2,"currentInvestments"in c){e.next=8;break}return e.next=6,ra(c);case 6:return s=e.sent,e.abrupt("return",s);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching current investments for grid bot ".concat(c.name)}),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function ha(e,t,a){return Oa.apply(this,arguments)}function Oa(){return(Oa=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,c=r[n],e.prev=2,"profits"in c){e.next=8;break}return e.next=6,Y(n);case 6:return s=e.sent,e.abrupt("return",s);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching profits for grid bot ".concat(c.name)}),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function xa(e,t,a){return ga.apply(this,arguments)}function ga(){return(ga=Object(b.a)(d.a.mark((function e(t,a,n){var r,c,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,c=r[n],e.prev=2,"marketOrders"in c){e.next=8;break}return e.next=6,V(n);case 6:return s=e.sent,e.abrupt("return",s);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(c.name)}),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}function ya(e,t,a,n){return _a.apply(this,arguments)}function _a(){return(_a=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(a,n,r);case 2:return c=e.sent,e.next=5,va(a,n,r);case 5:return s=e.sent,e.next=8,ha(a,n,r);case 8:return i=e.sent,o=a.gridBots,l=o[r],u=Object(O.a)(Object(O.a)({},l),{},{initialInvestments:c,currentInvestments:s,profits:i}),e.next=14,t(da(r,u));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ba(){return(Ba=Object(b.a)(d.a.mark((function e(t,a,n,r){var c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xa(a,n,r);case 2:return c=e.sent,s=a.gridBots,i=s[r],o=Object(O.a)(Object(O.a)({},i),{},{marketOrders:c}),e.next=8,t(da(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(322),a(323),a(324);var Ia=function(e){var t=e.currency,a=e.size,n=void 0===a?15:a;return Object(v.jsx)("div",{className:"CurrencyIcon",style:{width:n,height:n,backgroundImage:"url(https://botanapp.s3.amazonaws.com/coinicons/".concat(n,"/").concat(t.toLowerCase(),".png)")}})},Na=function(e){var t=e.accounts,a=e.values,c=e.investment,s=e.setModalGridBotId,i=Object(n.useContext)(be).gridBotsState,o=i.list,l=i.gridBots,u=r.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account_id},disableSortBy:!0,Cell:function(e){var a=e.cell.value,n=t.filter((function(e){return e.id===a}))[0];return Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(n.market_icon,")")}}),Object(v.jsx)("div",{style:{width:"100px"},children:n.name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:a}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Price range",accessor:function(e,t){return"".concat(e.upper_price,"_").concat(e.lower_price,"_").concat(e.grids_quantity," levels")},id:"price_range",disableSortBy:!0,Cell:function(e){var t=e.cell.value.split("_");return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:{color:"#00A59A"},children:t[0]}),Object(v.jsx)("div",{style:{color:"#EE7D8B"},children:t[1]}),Object(v.jsx)("div",{style:{fontSize:"12px"},children:t[2]})]})}},{Header:"Start price",accessor:"start_price",disableSortBy:!0},{Header:"Current price",accessor:"current_price",disableSortBy:!0},{Header:"Active orders",accessor:function(e,t){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{style:{marginBottom:"3px"},children:Object(v.jsx)(yt.a,{style:{fontSize:"14px"},bg:"danger",children:e.grid_lines.filter((function(e){return e.order_placed&&"sell"===e.side})).length})}),Object(v.jsx)("div",{children:Object(v.jsx)(yt.a,{style:{fontSize:"14px"},bg:"success",children:e.grid_lines.filter((function(e){return e.order_placed&&"buy"===e.side})).length})})]})},id:"activeOrder",disableSortBy:!0},{Header:"Initial investment",accessor:function(e,t){var n=e.pair.split("_")[0],r=e.pair.split("_")[1];if(e.initialInvestments){if("balances"===c)return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:r}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:e.initialInvestments.baseInvestment,currency:r})," ").concat(r)})]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:n}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:e.initialInvestments.quoteInvestment,currency:n})," ").concat(n)})]})]});var s="usd"===a?"USD":n,i="usd"===a?e.initialInvestments.allInUsd:e.initialInvestments.allInQuote;return Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:s}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:i,currency:s})," ").concat(s)})]})}return""},id:"initial_investment",disableSortBy:!0},{Header:"Current investment",accessor:function(e,t){var n=e.pair.split("_")[0],r=e.pair.split("_")[1];if(e.currentInvestments){if("balances"===c)return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:r}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:e.currentInvestments.baseInvestment,currency:r})," ").concat(r)})]}),Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:n}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:e.currentInvestments.quoteInvestment,currency:n})," ").concat(n)})]})]});var s="usd"===a?"USD":n,i="usd"===a?e.currentInvestments.allInUsd:e.currentInvestments.allInQuote;return Object(v.jsxs)("div",{style:{display:"flex"},children:[Object(v.jsx)(Ia,{currency:s}),Object(v.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(Se({value:i,currency:s})," ").concat(s)})]})}return""},id:"current_investment",disableSortBy:!0},{Header:"Investment change",accessor:function(e,t){var n=e.pair.split("_")[0];if(e.currentInvestments&&e.initialInvestments){if("balances"===c||"quote"===a){var r=e.currentInvestments.allInQuote-e.initialInvestments.allInQuote;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:"".concat(Se({value:r,currency:n})," ").concat(n)})}),Object(v.jsx)("div",{className:r>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:e.currentInvestments.allInQuote?r/e.currentInvestments.allInQuote*100:0,currency:"USD"})," %")})]})}var s=e.currentInvestments.allInUsd-e.initialInvestments.allInUsd;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{children:"".concat(Se({value:s,currency:"USD"})," USD")})}),Object(v.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:e.currentInvestments.allInUsd?s/e.currentInvestments.allInUsd*100:0,currency:"USD"})," %")})]})}return""},id:"investment_change",disableSortBy:!0},{Header:"Bot profit",accessor:function(e,t){var n=e.pair.split("_")[0];if(e.profits){if("balances"===c||"quote"===a){var r=g.a.sum(e.profits.map((function(e){return parseFloat(e.profit)}))),s=r/e.initialInvestments.allInQuote*100;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"".concat(Se({value:r,currency:n})," ").concat(n)}),Object(v.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:s,currency:"USD"})," %")})]})}var i=g.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)}))),o=i/e.initialInvestments.allInUsd*100;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"".concat(Se({value:i,currency:"USD"})," USD")}),Object(v.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:o,currency:"USD"})," %")})]})}return""},id:"bot_profit",disableSortBy:!0},{Header:"Total PnL",accessor:function(e,t){var n=e.pair.split("_")[0];if(e.profits&&e.currentInvestments&&e.initialInvestments){if("balances"===c||"quote"===a){var r=g.a.sum(e.profits.map((function(e){return parseFloat(e.profit)})))+e.currentInvestments.allInQuote-e.initialInvestments.allInQuote,s=r/e.initialInvestments.allInQuote*100;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"".concat(Se({value:r,currency:n})," ").concat(n)}),Object(v.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:s,currency:"USD"})," %")})]})}var i=g.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)})))+e.currentInvestments.allInUsd-e.initialInvestments.allInUsd,o=i/e.initialInvestments.allInUsd*100;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{children:"".concat(Se({value:i,currency:"USD"})," USD")}),Object(v.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(Se({value:o,currency:"USD"})," %")})]})}return""},id:"total_PnL",disableSortBy:!0},{Header:"Stats",Cell:function(e){e.cell.value;return Object(v.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)("img",{className:"stats",src:"stats.png",alt:"stats"})})},id:"stats",disableSortBy:!0}]}),[c,a]),d=Object(gt.useTable)({columns:u,data:o.map((function(e){return l[e]}))}),b=d.getTableProps,j=d.getTableBodyProps,f=d.headerGroups,p=d.rows,m=d.prepareRow;return Object(v.jsx)("div",{className:"GridBotsListTable",children:Object(v.jsxs)(_t.a,Object(O.a)(Object(O.a)({hover:!0},b()),{},{children:[Object(v.jsx)("thead",{style:{fontSize:"14px"},children:f.map((function(e){return Object(v.jsx)("tr",Object(O.a)(Object(O.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(v.jsx)("th",Object(O.a)(Object(O.a)({},e.getHeaderProps()),{},{children:Object(v.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(v.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(v.jsx)("tbody",Object(O.a)(Object(O.a)({style:{fontSize:"14px"}},j()),{},{children:p.map((function(e,t){return m(e),Object(v.jsx)("tr",Object(O.a)(Object(O.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){s(e.original.id)},children:e.cells.map((function(e){return Object(v.jsx)("td",Object(O.a)(Object(O.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},Ca=a(351),wa=a(354),Sa=(a(325),a(326),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,c=e.tradingFee,s=e.timeRangeValue,i=Object(n.useContext)(be).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(n.useState)([[],[]]),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(n.useState)([[],[]]),p=Object(j.a)(f,2),m=p[0],h=p[1],O=function(e){return"".concat(e.dataset.label,": ").concat(Se({value:e.parsed.y,currency:o}))};return Object(n.useEffect)((function(){b(function(e,t,a,n,r){var c=ia(e,n,r),s="30d"===a?31:Math.max(Fe(ve()(),ve()(t.created_at))+1,31);return Re(c,s)}(a,i,s,r,c)),h(function(e,t,a,n,r){var c=ia(e,n,r),s="30d"===a?31:Math.max(Fe(ve()(),ve()(t.created_at))+1,31);return Le(c,s)}(a,i,s,r,c))}),[a,r,c]),Object(v.jsxs)("div",{className:"GridBotDetailsCharts",children:[Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.c,{options:pt("Accumulative Profit, ".concat(o),O),data:{labels:d[0],datasets:[{label:"Accumulative Profit, ".concat(o),data:d[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(v.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(v.jsx)(jt.a,{options:ft("Daily Profit, ".concat(o),O),data:{labels:m[0],datasets:[{label:"Profit, ".concat(o),data:m[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),ka=(a(327),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,c=e.tradingFee,s=e.timeRangeValue,i=Object(n.useContext)(be).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(n.useState)(0),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(n.useState)(0),p=Object(j.a)(f,2),m=p[0],h=p[1],O=Object(n.useState)(0),x=Object(j.a)(O,2),y=x[0],_=x[1],B=Object(n.useState)(0),I=Object(j.a)(B,2),N=I[0],C=I[1];return Object(n.useEffect)((function(){var e=g.a.sum(a.map((function(e){return parseFloat(e.profit)}))),t=e-g.a.sum(r.map((function(e){return parseFloat(e.total)})))*c*.01,n=1,o=(n="30d"===s&&N>30?30:N)?t/n:0,l=i.initialInvestments?i.initialInvestments.allInQuote:0,u=l?100*t/l:0,d=ve.a.utc(i.created_at),j=i.closed_at?ve.a.utc(i.closed_at):ve.a.utc();b(t),h(o),_(u),C(j.diff(d,"days"))}),[i,a,r,c,s]),a&&r&&Object(v.jsxs)(_t.a,{hover:!0,children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"Days running"}),Object(v.jsx)("th",{children:"Transactions"}),Object(v.jsx)("th",{children:"Avg. daily"}),Object(v.jsx)("th",{children:"Bot profit"}),Object(v.jsx)("th",{children:"Returns"})]})}),Object(v.jsx)("tbody",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:N}),Object(v.jsx)("td",{children:a?a.length:""}),Object(v.jsx)("td",{children:"".concat(Se({value:m,currency:o})," ").concat(o)}),Object(v.jsx)("td",{children:"".concat(Se({value:d,currency:o})," ").concat(o)}),Object(v.jsx)("td",{children:"".concat(Se({value:y,currency:"USD"})," %")})]})})]})}),Da=[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}],Ta=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,r=e.gridBotId,c=Object(n.useContext)(be),s=c.gridBotsState,i=c.gridBotsDispatch,o=Object(n.useContext)(ue).errorsDispatch,l=s.gridBots[r],u=Object(n.useState)(0),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(n.useState)("30d"),m=Object(j.a)(p,2),h=m[0],O=m[1],x=Object(n.useState)([]),g=Object(j.a)(x,2),y=g[0],_=g[1],B=Object(n.useState)([]),I=Object(j.a)(B,2),N=I[0],C=I[1];return Object(n.useEffect)((function(){l&&l.profits&&!l.marketOrders&&function(e,t,a,n){return Ba.apply(this,arguments)}(i,s,o,r).then()}),[l]),Object(n.useEffect)((function(){l&&l.profits&&l.marketOrders&&("30d"===h?(_(sa(l.marketOrders).filter((function(e){return"Filled"===e.status_string}))),C(ca(l.profits))):(_(l.marketOrders.grid_lines_orders.filter((function(e){return"Filled"===e.status_string}))),C(l.profits)))}),[l,h]),Object(v.jsx)(v.Fragment,{children:l&&Object(v.jsxs)(It.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(v.jsx)(It.a.Header,{closeButton:!0,children:Object(v.jsx)(It.a.Title,{children:"GridBot: ".concat(l.pair.split("_").reverse().join("/")," (ID: ").concat(r,")")})}),Object(v.jsxs)(It.a.Body,{children:[Object(v.jsxs)("div",{className:"GridBotsDetailsFilters",children:[Object(v.jsxs)("div",{className:"GridBotListControl",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Time range"}),Object(v.jsx)(Oe.a,{children:Da.map((function(e,t){return Object(v.jsx)(xe.a,{id:"detail-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:h===e.value,onChange:function(e){return O(e.currentTarget.value)},children:e.name},t)}))})]}),Object(v.jsxs)("div",{className:"GridBotListControl",style:{width:"150px",marginLeft:"auto"},children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Trading fee"}),Object(v.jsxs)(Ca.a,{children:[Object(v.jsx)(wa.a,{onChange:function(e){e.target.value>=0&&e.target.value<=100&&f(e.target.value)},value:b,type:"number"}),Object(v.jsx)(Ca.a.Text,{children:"%"})]})]})]}),Object(v.jsx)(ka,{gridBotId:r,profits:N,marketOrders:y,tradingFee:b,timeRangeValue:h}),Object(v.jsx)(Sa,{gridBotId:r,profits:N,marketOrders:y,tradingFee:b,timeRangeValue:h})]})]})})},Fa=(a(328),function(){var e=Object(n.useContext)(be),t=e.gridBotsState,a=(e.gridBotsDispatch,t.list),r=t.hasMore,c=t.gridBots,s=Object(n.useState)(0),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(0),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(n.useState)(0),m=Object(j.a)(p,2),h=m[0],O=m[1],x=Object(n.useState)(!0),y=Object(j.a)(x,2),_=y[0],B=y[1];return Object(n.useEffect)((function(){if(!r){var e=a.every((function(e){return c[e].initialInvestments})),t=a.every((function(e){return c[e].currentInvestments})),n=a.every((function(e){return c[e].profits}));if(a&&e&&n&&t){var s=g.a.sum(a.map((function(e){return c[e].initialInvestments.allInUsd}))),i=g.a.sum(a.map((function(e){return c[e].currentInvestments.allInUsd}))),o=g.a.sum(a.map((function(e){return g.a.sum(c[e].profits.map((function(e){return parseFloat(e.usd_profit)})))})));B(!1),l(s),f(o),O(o+i-s)}}}),[a,r,c]),_?Object(v.jsx)("div",{className:"SpinnerContainer",children:Object(v.jsx)(Jt.a,{animation:"grow"})}):Object(v.jsx)("div",{className:"GridBotListMetrics",children:Object(v.jsxs)("div",{className:"GridBotListMetricsContainer",children:[Object(v.jsxs)("div",{className:"GridBotListMetric",children:[Object(v.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Investment"}),Object(v.jsx)("div",{className:"GridBotListMetricBody",children:"".concat(Se({value:o,currency:"USD"})," $")})]}),Object(v.jsxs)("div",{className:"GridBotListMetric",children:[Object(v.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Bot Profits"}),Object(v.jsx)("div",{className:"GridBotListMetricBody ".concat(b>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(Se({value:b,currency:"USD"})," $")})]}),Object(v.jsxs)("div",{className:"GridBotListMetric",children:[Object(v.jsx)("div",{className:"GridBotListMetricHeader",children:"Total PnL"}),Object(v.jsx)("div",{className:"GridBotListMetricBody ".concat(h>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(Se({value:h,currency:"USD"})," $")})]})]})})}),Aa=[{name:"Value",value:"value"},{name:"Balances",value:"balances"}],Ma=[{name:"USD",value:"usd"},{name:"Quote",value:"quote"}],Pa=function(){var e=Object(n.useContext)(be),t=e.gridBotsState,a=e.gridBotsDispatch,r=t.list,c=t.hasMore,s=t.filters,i=Object(n.useContext)(oe).accountsState.accounts,o=Object(n.useContext)(ue).errorsDispatch,l=Object(n.useState)("value"),u=Object(j.a)(l,2),p=u[0],m=u[1],h=Object(n.useState)("usd"),x=Object(j.a)(h,2),g=x[0],y=x[1],_=Object(n.useState)(""),B=Object(j.a)(_,2),I=B[0],N=B[1],C=function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setGridBotsFilters",payload:Object(O.a)(Object(O.a)({},t.filters),n)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=!c&&0===r.length,S=[{value:"",label:"All spot accounts",label_id:"All"}].concat(Object(f.a)(i.filter((function(e){return Ce(e.market_code)})).map((function(e){return{value:e.id,label:Object(v.jsxs)("div",{className:"AccountFilterItem",children:[Object(v.jsx)("div",{children:Object(v.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}})}),Object(v.jsx)("span",{children:e.name})]}),label_id:e.name}}))));return Object(n.useEffect)((function(){(function(e,t,a,n){return ja.apply(this,arguments)})(a,t,o).then()}),[s]),Object(n.useEffect)((function(){var e,n=Object(Zt.a)(r);try{for(n.s();!(e=n.n()).done;){var c=e.value;ya(a,t,o,c).then()}}catch(s){n.e(s)}finally{n.f()}}),[r]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Fa,{}),Object(v.jsxs)("div",{className:"GridBotsFilters",children:[Object(v.jsxs)("div",{className:"GridBotsFilterGroup",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(v.jsx)(ge.a,{onChange:function(e){C({account:e.value})},value:S.find((function(e){return e.value===s.account})),options:S,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(v.jsxs)("div",{className:"GridBotListControl",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Investment"}),Object(v.jsx)(Oe.a,{id:"foo",children:Aa.map((function(e,t){return Object(v.jsx)(xe.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioInvestment",value:e.value,checked:p===e.value,onChange:function(e){m(e.currentTarget.value)},children:e.name},e.value)}))})]}),"value"===p&&Object(v.jsxs)("div",{className:"GridBotListControl",children:[Object(v.jsx)("div",{className:"FilterTitle",children:"Show values in"}),Object(v.jsx)(Oe.a,{id:"bar",children:Ma.map((function(e,t){return Object(v.jsx)(xe.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioValues",value:e.value,checked:g===e.value,onChange:function(e){return y(e.currentTarget.value)},children:e.name},e.value)}))})]})]}),w?Object(v.jsx)("div",{className:"FallbackContainer",children:Object(v.jsx)("p",{style:{textAlign:"center"},children:Object(v.jsx)("b",{children:"No results found =("})})}):Object(v.jsxs)("div",{className:"GridBotsList",children:[i.length>0&&Object(v.jsx)(Na,{accounts:i,values:g,investment:p,setModalGridBotId:N}),!!I&&Object(v.jsx)(Ta,{modalIsOpen:!!I,setModalIsOpen:N,gridBotId:I})]})]})},Ea=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Pa,{})})},La=function(){return Object(v.jsx)(l.d,{children:Object(v.jsxs)(l.b,{path:"/",element:Object(v.jsx)(fe,{}),children:[Object(v.jsx)(l.b,{index:!0,element:Object(v.jsx)(ta,{})}),Object(v.jsx)(l.b,{path:":botId",element:Object(v.jsx)($t,{})}),Object(v.jsx)(l.b,{path:"/gridbots",element:Object(v.jsx)(Ea,{})})]})})};s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(La,{})})}),document.getElementById("root")),i()}},[[329,1,2]]]);
//# sourceMappingURL=main.5022c0f1.chunk.js.map