(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{212:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},219:function(e,t){},267:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(35),s=a.n(n),i=(a(212),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,392)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))}),o=a(50),l=a(21),u=a(5),d=a.n(u),j=a(11),b=a(3),f=a(17),p=(a(214),a(375)),h=(a(215),a(0)),O=function(){var e=Object(c.useContext)(Me),t=e.errorsState.errors,a=e.errorsDispatch;return Object(h.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(h.jsxs)(p.a,{variant:"danger",onClose:function(){a({type:"cleanErrors"})},dismissible:!0,children:[Object(h.jsx)(p.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(h.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(h.jsx)(p.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})},m=a(15),v=a(2),x=a(9),y=a.n(x),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},_={list:[],hasMore:!0,limit:15,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,bots:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),bots:Object(v.a)(Object(v.a)({},e.bots),n)});case"setBotsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setBot":return Object(v.a)(Object(v.a)({},e),{},{bots:Object(v.a)(Object(v.a)({},e.bots),{},Object(m.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var C={deals:{},activeDeals:{}};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getDealsList":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{list:t.payload.deals,period:t.payload.periodInDays})))});case"getActiveDealsList":return Object(v.a)(Object(v.a)({},e),{},{activeDeals:Object(v.a)(Object(v.a)({},e.activeDeals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.activeDeals[t.payload.botId]),{},{list:t.payload.activeDeals})))});case"setOffset":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{offset:t.payload.offset})))});case"resetDeals":if(t.payload.botId in e.deals){var a=y.a.omit(e.deals,[t.payload.botId]);return Object(v.a)(Object(v.a)({},e),{},{deals:a})}return Object(v.a)({},e);case"resetActiveDeals":if(t.payload.botId in e.activeDeals){var c=y.a.omit(e.activeDeals,[t.payload.botId]);return Object(v.a)(Object(v.a)({},e),{},{activeDeals:c})}return Object(v.a)({},e);default:throw new Error}}var N=a(165),w=a.n(N),T=a(166),I=a.n(T),k=new I.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),D={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},F=new URLSearchParams(window.location.search).get("api_key")||"",A=new URLSearchParams(window.location.search).get("secret")||"",P=new I.a(D);function M(e){P=new I.a(Object(v.a)(Object(v.a)({},D),{},{id:e}))}function E(){return P}function L(e,t){return w.a.algo.HMAC.create(w.a.algo.SHA256,t).update(e).finalize().toString(w.a.enc.Hex)}var R=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return a.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:F,Signature:L(t,A)}})}))},H=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r,n,s){var i,o,l,u,j,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>6&&void 0!==p[6]&&p[6],o=c.split("-"),l=Object(b.a)(o,2),u=l[0],j=l[1],f=function(){return"/public/api/ver1/bots?offset=".concat(i?0:t,"&limit=").concat(a,"&sort_by=").concat(u,"&sort_direction=").concat(j).concat(r?"&scope=".concat(r):"").concat(n?"&strategy=".concat(n):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",R("GET",f()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u,j,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>5&&void 0!==p[5]?p[5]:"enabled",i=c.split("-"),o=Object(b.a)(i,2),l=o[0],u=o[1],j=n.map((function(e){return"&account_types[]=".concat(e)})).join(""),f=function(){return"/public/api/ver1/grid_bots?offset=".concat(t,"&limit=").concat(a,"&sort_by=").concat(l,"&sort_direction=").concat(u).concat(r?"&account_ids[]=".concat(r):j).concat(s?"&state=".concat(s):"")},e.abrupt("return",R("GET",f()).then((function(e){return e.json()})));case 5:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r,n,s,i,o){var l,u,j,f,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.split("-"),u=Object(b.a)(l,2),j=u[0],f=u[1],p=function(){return"/public/api/v2/smart_trades?page=".concat(t,"&per_page=").concat(a,"&order_by=").concat(j,"&order_direction=").concat(f).concat(r?"&account_id=".concat(r):"").concat(n?"&type=".concat(n):"").concat(s?"&pair=".concat(s):"","&status=").concat(i).concat(o?"&from=".concat(o):"")},e.abrupt("return",R("GET",p()).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s,i,o){return e.apply(this,arguments)}}(),G=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/v2/smart_trades/".concat(t,"/trades")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/bots/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/grid_bots/".concat(t,"/profits")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/grid_bots/".concat(t,"/market_orders")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/deals/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/accounts?page=".concat(t,"&per_page=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/accounts/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("POST","/public/api/ver1/accounts/".concat(t,"/pie_chart_data")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/accounts/".concat(t,"/active_trading_entities")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/accounts/".concat(t,"/balance_chart_data?date_from=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",R("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(c,"&scope=").concat(r,"&order=").concat(n),P).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=a(28),re=(a(266),a(205)),ne=(a(267),function(){var e=Object(c.useState)("DCA"),t=Object(b.a)(e,2),a=t[0],r=t[1],n=Object(l.g)(),s=Object(l.f)();return Object(c.useEffect)((function(){"/"===s.pathname?r("DCA"):"/gridbots"===s.pathname?r("grid"):"/smarttrades"===s.pathname?r("smarttrades"):"/accounts"===s.pathname&&r("accounts")}),[s]),Object(h.jsx)("div",{className:"NavBar",children:Object(h.jsxs)("div",{className:"NavBarContainer",children:[Object(h.jsx)("div",{className:"LogoContainer",children:Object(h.jsx)("img",{className:"Logo",src:"/BotAn__icon.png",alt:"logo"})}),Object(h.jsx)("div",{className:"Navigation",children:Object(h.jsxs)(re.a,{children:[Object(h.jsx)(re.a.Item,{children:Object(h.jsx)(re.a.Link,{active:"DCA"===a,onClick:function(){n({pathname:"/",search:window.location.search})},children:"DCA Bots"})}),Object(h.jsx)(re.a.Item,{children:Object(h.jsx)(re.a.Link,{active:"grid"===a,onClick:function(){n({pathname:"/gridbots",search:window.location.search})},children:"Grid Bots"})}),Object(h.jsx)(re.a.Item,{children:Object(h.jsx)(re.a.Link,{active:"smarttrades"===a,onClick:function(){n({pathname:"/smarttrades",search:window.location.search})},children:"Smart Trades"})}),Object(h.jsx)(re.a.Item,{children:Object(h.jsx)(re.a.Link,{active:"accounts"===a,onClick:function(){n({pathname:"/accounts",search:window.location.search})},children:"Accounts"})})]})}),Object(h.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(h.jsx)("span",{className:"SupportLabel",children:"Community"}),Object(h.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]})})}),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=null;try{t=JSON.parse(localStorage.getItem("GridBotsFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},ie={list:[],hasMore:!0,limit:10,offset:0,filters:{accountType:"spot",account:"",sorting:"created_at-desc"},gridBots:{}};function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewGridBotsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,gridBots:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToGridBotsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),gridBots:Object(v.a)(Object(v.a)({},e.gridBots),n)});case"setGridBotsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setGridBotsFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setGridBot":return Object(v.a)(Object(v.a)({},e),{},{gridBots:Object(v.a)(Object(v.a)({},e.gridBots),{},Object(m.a)({},t.payload.gridBotId,t.payload.gridBot))});default:throw new Error}}var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=null;try{t=JSON.parse(localStorage.getItem("smartTradesFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},ue={list:[],hasMore:!0,limit:100,offset:1,filters:{accountId:"",sorting:"created_at-desc",type:"",status:"all",from:{label:"month",from:"",to:""},pair:""},smartTrades:{}};function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewSmartTradesList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,smartTrades:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToSmartTradesList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),smartTrades:Object(v.a)(Object(v.a)({},e.smartTrades),n)});case"setSmartTradesOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setSmartTradesFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setSmartTrade":return Object(v.a)(Object(v.a)({},e),{},{smartTrades:Object(v.a)(Object(v.a)({},e.smartTrades),{},Object(m.a)({},t.payload.smartTradeId,t.payload.smartTrade))});default:throw new Error}}var je={offset:0,hasMore:!1,list:[],limit:100,accounts:{},accountTableData:{},accountPieChartData:{},accountActiveTradingEntities:{}};function be(e,t){switch(t.type){case"setNewAccountsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,accounts:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToAccountsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),accounts:Object(v.a)(Object(v.a)({},e.accounts),n)});case"setAccountsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setAccount":return Object(v.a)(Object(v.a)({},e),{},{accounts:Object(v.a)(Object(v.a)({},e.accounts),{},Object(m.a)({},t.payload.accountId,t.payload.account))});case"setAccountTableData":return Object(v.a)(Object(v.a)({},e),{},{accountTableData:Object(v.a)(Object(v.a)({},e.accountTableData),{},Object(m.a)({},t.payload.accountId,t.payload.accountTableData))});case"setAccountPieChartData":return Object(v.a)(Object(v.a)({},e),{},{accountPieChartData:Object(v.a)(Object(v.a)({},e.accountPieChartData),{},Object(m.a)({},t.payload.accountId,t.payload.accountPieChartData))});case"setAccountActiveTradingEntities":return Object(v.a)(Object(v.a)({},e),{},{accountActiveTradingEntities:Object(v.a)(Object(v.a)({},e.accountActiveTradingEntities),{},Object(m.a)({},t.payload.accountId,t.payload.accountActiveTradingEntities))});default:throw new Error}}var fe=function(e){return{type:"setNewAccountsList",payload:e}},pe=function(e){return{type:"setHasMore",payload:e}},he=function(e){return{type:"addToAccountsList",payload:e}},Oe=function(e,t){return{type:"setAccount",payload:{accountId:e,account:t}}},me=function(e,t){return{type:"setAccountTableData",payload:{accountId:e,accountTableData:t}}},ve=function(e,t){return{type:"setAccountPieChartData",payload:{accountId:e,accountPieChartData:t}}},xe=function(e,t){return{type:"setAccountActiveTradingEntities",payload:{accountId:e,accountActiveTradingEntities:t}}};function ye(){return(ye=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(pe(!0)),t(fe([])),n=a.limit,s=r||n,e.prev=4,i=!0,o=1;case 7:if(!i){e.next=18;break}return e.next=10,Q(o,s);case 10:if(!(l=e.sent).error){e.next=13;break}return e.abrupt("break",18);case 13:t(he(l)),o+=1,l.length<s&&(i=!1),e.next=7;break;case 18:t(pe(!1)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),t(fe([])),t(pe(!1)),c({type:"addError",payload:"Error when fetching accounts list"});case 26:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function ge(e,t,a,c){return _e.apply(this,arguments)}function _e(){return(_e=Object(j.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(r);case 3:n=e.sent,t(Oe(r,n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"addError",payload:"Error when fetching account ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Se(e,t,a,c){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountTableData,e.prev=1,r in n){e.next=7;break}return e.next=5,W(r);case 5:s=e.sent,t(me(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account table data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Be(e,t,a,c){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountPieChartData,e.prev=1,r in n){e.next=7;break}return e.next=5,J(r);case 5:s=e.sent,t(ve(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account pie chart data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function we(){return(we=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountActiveTradingEntities,e.prev=1,r in n){e.next=7;break}return e.next=5,Z(r);case 5:s=e.sent,t(xe(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account active trading entities data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var Te=a(376);ce.f.register(ce.e,ce.n,ce.l,ce.c,ce.s,ce.t,ce.k,ce.i,ce.r,ce.h,ce.a);var Ie={strategies:[]},ke={errors:[]};function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var a=new Set(e.errors);return a.add(t.payload),{errors:Object(f.a)(Array.from(a))};case"cleanErrors":return{errors:[]};default:throw new Error}}function Fe(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(f.a)(e.payload)};throw new Error}var Ae=Object(c.createContext)({accountsState:je,accountsDispatch:function(e){}}),Pe=Object(c.createContext)({strategiesState:Ie,strategiesDispatch:function(e){}}),Me=Object(c.createContext)({errorsState:ke,errorsDispatch:function(e){}}),Ee=Object(c.createContext)({botsState:_,botsDispatch:function(e){}}),Le=Object(c.createContext)({gridBotsState:ie,gridBotsDispatch:function(e){}}),Re=Object(c.createContext)({smartTradesState:ue,smartTradesDispatch:function(e){}}),He=Object(c.createContext)({dealsState:C,dealsDispatch:function(e){}});var Ue=function(){var e=Object(c.useReducer)(S,_,g),t=Object(b.a)(e,2),a=t[0],r=t[1],n=Object(c.useReducer)(oe,ie,se),s=Object(b.a)(n,2),i=s[0],o=s[1],u=Object(c.useReducer)(be,je),f=Object(b.a)(u,2),p=f[0],m=f[1],v=Object(c.useReducer)(Fe,Ie),x=Object(b.a)(v,2),y=x[0],N=x[1],w=Object(c.useReducer)(De,ke),T=Object(b.a)(w,2),I=T[0],k=T[1],D=Object(c.useReducer)(de,ue,le),F=Object(b.a)(D,2),A=F[0],P=F[1],M=Object(c.useReducer)(B,C),E=Object(b.a)(M,2),L=E[0],R=E[1],H=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te();case 3:t=e.sent,N({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),N({type:"setStrategies",payload:[]}),k({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){!function(e,t,a,c){ye.apply(this,arguments)}(m,p,k),H()}),[]);var U=p.list;return Object(h.jsx)(Me.Provider,{value:{errorsState:I,errorsDispatch:k},children:Object(h.jsx)(Pe.Provider,{value:{strategiesState:y,strategiesDispatch:N},children:Object(h.jsx)(Ae.Provider,{value:{accountsState:p,accountsDispatch:m},children:Object(h.jsx)(Ee.Provider,{value:{botsState:a,botsDispatch:r},children:Object(h.jsx)(Re.Provider,{value:{smartTradesState:A,smartTradesDispatch:P},children:Object(h.jsx)(Le.Provider,{value:{gridBotsState:i,gridBotsDispatch:o},children:Object(h.jsx)(He.Provider,{value:{dealsState:L,dealsDispatch:R},children:Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(ne,{}),U.length>0?Object(h.jsx)(l.a,{}):Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(Te.a,{animation:"grow"})}),Object(h.jsx)(O,{})]})})})})})})})})},Ye=a(7),Ge=a.n(Ye),ze=a(198),Ve=a(378),$e=a(379),qe=a(377),Qe=a(380),Ke=a(388),We=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e})),t.current},Je=function(e){var t="YYYY-MM-DD",a=e.label;return"today"===a?Ge()().subtract(1,"day").format(t):"week"===a?Ge()().subtract(1,"week").format(t):"month"===a?Ge()().subtract(1,"months").format(t):"custom"===a?e.from?Ge()(e.from).format(t):Ge()().format(t):""},Ze=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(c));case 4:return e.next=6,R("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",r*c);case 9:return e.next=11,R("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USD_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 11:if(!(n=e.sent)){e.next=14;break}return e.abrupt("return",n*c);case 14:return e.next=16,R("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=").concat(a,"_USD")).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 16:if(!(s=e.sent)){e.next=19;break}return e.abrupt("return",c/s);case 19:return e.next=21,R("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=").concat(a,"_USDT")).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 21:if(!(i=e.sent)){e.next=24;break}return e.abrupt("return",c/i);case 24:return e.abrupt("return",NaN);case 25:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}();function Xe(e,t){return et.apply(this,arguments)}function et(){return(et=Object(j.a)(d.a.mark((function e(t,a){var c,r,n,s,i,o,l,u,j,b,f,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&a.id){e.next=2;break}return e.abrupt("return",0);case 2:if(c=parseInt(t.max_active_deals),r=parseFloat(t.base_order_volume),n=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),i=parseFloat(t.leverage_custom_value),o=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],u=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,tt(a.market_code,l,r,s);case 13:j=e.sent,r=j.baseOrderVolume,s=j.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,tt(a.market_code,u,r,s);case 21:b=e.sent,r=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,at(t.account_id,l,u,a.market_code,t.strategy,r,s);case 29:f=e.sent,r=f.baseOrderVolume,s=f.safetyOrderVolume;case 32:return i&&(r/=i,s/=i),p=0,1!==o&&n>1?(h=s*(1-Math.pow(o,n))/(1-o),p=(h+r)*c):p=(n*s+r)*c,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tt=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t,a,c);case 2:return e.t0=e.sent,e.next=5,Ze(t,a,r);case 5:return e.t1=e.sent,e.abrupt("return",{baseOrderVolume:e.t0,safetyOrderVolume:e.t1});case 7:case"end":return e.stop()}}),e)})));return function(t,a,c,r){return e.apply(this,arguments)}}(),at=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c,r,n,s,i){var o,l,u,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ct(r)&&"short"===n?c:a,e.next=3,R("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,u=l.find((function(e){return e.currency_code===o})),j=0,u&&(j=(parseFloat(u.equity)-parseFloat(u.on_orders))*parseFloat(u.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*j/100,safetyOrderVolume:i*j/100});case 8:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s,i){return e.apply(this,arguments)}}(),ct=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function rt(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}var nt=function(e,t){var a=e.pairs[0].split("_")[0],c=e.pairs[0].split("_")[1],r=a,n="";return"percent"===e.safety_order_volume_type?(r="%",n="short"===e.strategy&&ct(t.market_code)?c:""):r="quote_currency"===e.safety_order_volume_type?a:c,{value:parseFloat(e.safety_order_volume),currency:r,additionalCurrency:n}},st=function(e){var t=e.value,a=e.currency,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return a.includes("BTC")?new Intl.NumberFormat("en-US",{maximumFractionDigits:6,signDisplay:c}).format(t):"marketPrice"===a?new Intl.NumberFormat("en-US",{maximumFractionDigits:8,signDisplay:c}).format(t):new Intl.NumberFormat("en-US",{maximumFractionDigits:2,signDisplay:c}).format(t)};function it(){return(it=Object(j.a)(d.a.mark((function e(t,a){var c,r,n,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=c,s=0,!t.maxUsage){e.next=8;break}s=t.maxUsage,e.next=11;break;case 8:return e.next=10,Xe(t,a);case 10:s=e.sent;case 11:return n="short"===t.strategy&&ct(a.market_code)?r:c,e.next=14,Ze(a.market_code,n,1);case 14:return i=e.sent,e.abrupt("return",{value:s/i,currency:n});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var lt=a(27),ut=(a(270),{spot:"S",margin:"M",futures:"F"}),dt=function(e){var t=e.account,a=e.accountPieChart;return Object(h.jsxs)("div",{className:"AccountPieChart",children:[Object(h.jsx)("div",{className:"AccountTypeIconContainer",children:ut[t.supported_market_types[0]]}),"market_icon"in t&&Object(h.jsx)("div",{className:"AccountIconContainer",children:Object(h.jsx)("div",{className:"AccountIcon",style:{backgroundImage:"url(".concat(t.market_icon,")")}})}),t&&a.length>0?Object(h.jsx)("div",{className:"AccountPieChartContainer",children:Object(h.jsx)(jt,{accountPieChart:a})}):Object(h.jsx)("div",{className:"AccountPieChartContainerEmpty"})]})},jt=function(e){var t=e.accountPieChart;return Object(h.jsx)(lt.d,{data:{labels:t.map((function(e){return e.code})),datasets:[{data:t.map((function(e){return e.y})),backgroundColor:t.map((function(e){return e.code.includes("USD")&&e.code.length<6?"#00a59a":function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);var c="#";for(a=0;a<3;a++)c+=("00"+(t>>8*a&255).toString(16)).substr(-2);return c}(e.code)})),borderWidth:0}]},options:{plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){var t=e.dataset.data[e.dataIndex];return"".concat(e.label," ").concat(t,"%")}},bodyFont:{size:10}}}}})},bt=function(e){var t=e.account;return Object(h.jsxs)("div",{className:"AccountInfoContainer",children:[Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"Created:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(Ge()(t.created_at).format("DD/MM/YYYY"))})]}),Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"Updated:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(Ge()(t.updated_at).format("DD/MM/YYYY"))})]}),Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"API status:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(t.api_key_invalid?"Invalid":"OK")})]})]})},ft=function(e){var t=e.accountId,a=Object(c.useContext)(Ae),r=a.accountsState,n=a.accountsDispatch,s=r.accounts,i=r.accountPieChartData,o=r.accountActiveTradingEntities,u=Object(c.useContext)(Me).errorsDispatch,d=Object(c.useState)(null),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(c.useState)(null),m=Object(b.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)(null),g=Object(b.a)(y,2),_=g[0],S=g[1],C=Object(l.g)();return Object(c.useEffect)((function(){Be(n,r,u,t),function(e,t,a,c){we.apply(this,arguments)}(n,r,u,t),p(s[t])}),[t]),Object(c.useEffect)((function(){t in i&&x(i[t])}),[i]),Object(c.useEffect)((function(){t in o&&S(o[t])}),[o]),Object(h.jsxs)("div",{className:"AccountPreview",children:[Object(h.jsxs)("div",{className:"AccountPreviewColumn",children:[f&&v&&Object(h.jsx)(dt,{account:f,accountPieChart:v}),f&&Object(h.jsx)(bt,{account:f})]}),Object(h.jsxs)("div",{className:"AccountPreviewColumn",style:{flexGrow:1,marginLeft:"16px"},children:[f&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:f.name})}),Object(h.jsx)("div",{className:"AccountPreviewTable",children:Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"".concat(st({value:parseFloat(f.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(f.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(f.day_profit_usd),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"".concat(st({value:parseFloat(f.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(f.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(f.day_profit_btc),currency:"BTC"})," BTC")})]})]})]})})]}),_&&_.data&&Object(h.jsx)("div",{className:"AccountPreviewTable",style:{marginTop:"16px"},children:Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"DCA bots"}),Object(h.jsx)("th",{children:"Deals"}),Object(h.jsx)("th",{children:"Smart Trades"}),Object(h.jsx)("th",{children:"Grid Bots"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:_.data.active_bots_count}),Object(h.jsx)("td",{children:_.data.active_deals_count}),Object(h.jsx)("td",{children:_.data.active_smart_trades_count}),Object(h.jsx)("td",{children:_.data.active_grid_bots_count})]})})]})}),Object(h.jsx)("div",{className:"AccountPreviewButtonContainer",children:Object(h.jsx)(ze.a,{className:"AccountPreviewButton",onClick:function(){C({pathname:"/accounts/".concat(t),search:window.location.search})},children:"View"})})]})]})},pt=(a(271),a(81)),ht=a.n(pt),Ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,maintainAspectRatio:!1,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},xt=function(e,t){return{indexAxis:"y",scales:{x:{autoSkip:!1,stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{autoSkip:!1,callback:function(e){return t[e].length>35?t[e].slice(0,33)+"...":t[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"y"}}}},yt=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scales:{x:{type:"time",time:{unit:t?"week":"month",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0,ticks:{stepSize:1}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},gt=function(e){var t=e.accountTable,a=e.accountId,r=Object(c.useState)(null),n=Object(b.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)(""),l=Object(b.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)(!1),f=Object(b.a)(j,2),p=f[0],O=f[1],m=Object(c.useState)("usd"),v=Object(b.a)(m,2),x=v[0],g=v[1];return Object(c.useEffect)((function(){!t||u||p?t&&i(y.a.orderBy(t.filter((function(e){return e.currency_code&&e.currency_code.includes(u.toUpperCase())})).filter((function(e){return!p||e.usd_value>10&&e.percentage>1})),["percentage"],["desc"])):i(y.a.orderBy(t,["percentage"],["desc"]))}),[t,u,p]),Object(h.jsxs)("div",{className:"AccountDetailsTableContainer",children:[Object(h.jsxs)("div",{className:"AccountDetailsTableFilters",children:[Object(h.jsx)(Qe.a,{onChange:function(e){d(e.target.value)},value:u,type:"text",style:{width:"200px",marginRight:"16px"}}),Object(h.jsx)(Ke.a,{type:"switch",onChange:function(e){O(e.target.checked)},value:p,id:"default-f",label:"Hide small balances"}),Object(h.jsxs)(Ve.a,{style:{marginLeft:"auto"},children:[Object(h.jsx)($e.a,{id:"radio-account-balances-currency-usd",type:"radio",variant:"outline-primary",name:"radioAccountBalancesCurrencyMode",value:"usd",checked:"usd"===x,onChange:function(e){g(e.currentTarget.value)},children:"USD"},"usd"),Object(h.jsx)($e.a,{id:"radio-account-balances-currency-btc",type:"radio",variant:"outline-primary",name:"radioAccountBalancesCurrencyMode",value:"btc",checked:"btc"===x,onChange:function(e){g(e.currentTarget.value)},children:"BTC"},"btc")]})]}),Object(h.jsx)("div",{className:"AccountDetailsTable",children:s&&Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Token"}),Object(h.jsx)("th",{children:"Share"}),Object(h.jsx)("th",{children:"Price"}),Object(h.jsx)("th",{children:"Price change, 24h"}),Object(h.jsx)("th",{children:"Amount"}),"summary"!==a&&Object(h.jsx)("th",{children:"On orders"}),Object(h.jsx)("th",{children:"Total"})]})}),Object(h.jsx)("tbody",{children:s.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.currency_name?"".concat(e.currency_name," (").concat(e.currency_code,")"):e.currency_code}),Object(h.jsx)("td",{children:"".concat(st({value:e.percentage,currency:"USD"})," %")}),Object(h.jsx)("td",{children:"usd"===x?"".concat(st({value:e.current_price_usd,currency:"USD"})," $"):"".concat(st({value:e.current_price,currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat("usd"===x?e.day_change_percent_usd:e.day_change_percent_btc)>=0?"showGreen":"showRed",children:"".concat(st({value:"usd"===x?e.day_change_percent_usd:e.day_change_percent_btc,currency:"USD"})," %")}),Object(h.jsx)("td",{children:"".concat(st({value:e.position,currency:e.currency_code}))}),"summary"!==a&&Object(h.jsx)("td",{children:"".concat(st({value:e.on_orders,currency:e.currency_code}))}),Object(h.jsx)("td",{children:"usd"===x?"".concat(st({value:e.usd_value,currency:"USD"})," $"):"".concat(st({value:e.btc_value,currency:"BTC"})," BTC")})]},e.currency_code)}))})]})})]})},_t=function(){var e,t=Object(c.useContext)(Ae),a=t.accountsState,r=t.accountsDispatch,n=a.accounts,s=a.accountPieChartData,i=a.accountTableData,o=Object(c.useContext)(Me).errorsDispatch,u=Object(c.useState)(null),d=Object(b.a)(u,2),j=d[0],f=d[1],p=Object(c.useState)(null),O=Object(b.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)(null),y=Object(b.a)(x,2),g=y[0],_=y[1],S=Object(c.useState)(null),C=Object(b.a)(S,2),B=C[0],N=C[1],w=Object(c.useState)(null),T=Object(b.a)(w,2),I=T[0],k=T[1],D=Object(c.useState)("current"),F=Object(b.a)(D,2),A=F[0],P=F[1],M=Object(c.useState)("usd"),E=Object(b.a)(M,2),L=E[0],R=E[1],H=Object(c.useState)(Ge()().subtract(1,"months").toDate()),U=Object(b.a)(H,2),Y=U[0],G=U[1],z=Object(l.h)(),V=Object(l.g)();return Object(c.useEffect)((function(){z.accountId&&f("summary"===z.accountId?z.accountId:parseInt(z.accountId))}),[z]),Object(c.useEffect)((function(){j&&(Be(r,a,o,j),Se(r,a,o,j),ge(r,a,o,j))}),[j]),Object(c.useEffect)((function(){s&&j in s&&_(s[j])}),[s,j]),Object(c.useEffect)((function(){i&&j in i&&N(i[j])}),[i,j]),Object(c.useEffect)((function(){n&&j in n&&v(n[j])}),[n,j]),Object(c.useEffect)((function(){j&&Y&&X(j,Ge()(Y).format("DD-MM-YYYY")).then((function(e){k(e)}))}),[Y,j]),Object(h.jsxs)("div",{className:"AccountDetails",children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(ze.a,{variant:"primary",size:"sm",className:"AccountDetailsBackButton",onClick:function(){V(-1)},children:"< Back"}),Object(h.jsx)(ze.a,{style:{marginLeft:"16px"},className:"AccountDetailsBackButton",variant:"primary",size:"sm",onClick:function(){window.open("https://3commas.io/accounts/".concat(j),"_blank")},children:"Open in 3commas"})]}),Object(h.jsxs)("div",{className:"AccountDetailsMode",children:[Object(h.jsx)("div",{className:"AccountDetailsControl",children:Object(h.jsxs)(Ve.a,{id:"foo",children:[Object(h.jsx)($e.a,{id:"radio-account-current",type:"radio",variant:"outline-primary",name:"radioAccountMode",value:"current",checked:"current"===A,onChange:function(e){P(e.currentTarget.value)},children:"Current"},"current"),Object(h.jsx)($e.a,{id:"radio-account-history",type:"radio",variant:"outline-primary",name:"radioAccountMode",value:"history",checked:"history"===A,onChange:function(e){P(e.currentTarget.value)},children:"History"},"history")]})}),"history"===A&&Object(h.jsx)("div",{className:"AccountDetailsControl",children:Object(h.jsxs)(Ve.a,{id:"foo",children:[Object(h.jsx)($e.a,{id:"radio-account-currency-usd",type:"radio",variant:"outline-primary",name:"radioAccountCurrencyMode",value:"usd",checked:"usd"===L,onChange:function(e){R(e.currentTarget.value)},children:"USD"},"usd"),Object(h.jsx)($e.a,{id:"radio-account-currency-btc",type:"radio",variant:"outline-primary",name:"radioAccountCurrencyMode",value:"btc",checked:"btc"===L,onChange:function(e){R(e.currentTarget.value)},children:"BTC"},"btc")]})}),"history"===A&&Object(h.jsxs)("div",{className:"AccountDetailsNamedControl",children:[Object(h.jsx)("div",{className:"AccountDetailsFilterTitle",children:"From:"}),Object(h.jsx)(ht.a,{dateFormat:"dd/MM/yyyy",selected:Y,onChange:function(e){G(e)},selectsStart:!0,className:"AccountDetailsDateFilter",strictParsing:!0})]})]}),Object(h.jsxs)("div",{className:"AccountDetailsOverview",children:["current"===A&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"AccountDetailsOverviewPieChart",children:m&&g&&Object(h.jsx)(jt,{accountPieChart:g})}),m&&Object(h.jsxs)("div",{className:"AccountDetailsOverviewTable",children:[Object(h.jsxs)("div",{className:"AccountNameContainer",children:["market_icon"in m&&Object(h.jsx)("div",{className:"AccountDetailsAccountIcon",style:{backgroundImage:"url(".concat(m.market_icon,")")}}),Object(h.jsx)("span",{className:"AccountName",children:m.name})]}),Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"}),Object(h.jsx)("th",{children:"30 days change"}),Object(h.jsx)("th",{children:"30 days change, %"}),Object(h.jsx)("th",{children:"All time change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(st({value:parseFloat(m.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.day_profit_usd),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.usd_profit)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.usd_profit),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.usd_profit_percentage)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.usd_profit_percentage),currency:"USD"})," %")}),Object(h.jsx)("td",{className:parseFloat(m.total_usd_profit)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.total_usd_profit),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(st({value:parseFloat(m.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.day_profit_btc),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.btc_profit)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.btc_profit),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.btc_profit_percentage)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.btc_profit_percentage),currency:"USD"})," %")}),Object(h.jsx)("td",{className:parseFloat(m.total_btc_profit)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(m.total_btc_profit),currency:"BTC"})," BTC")})]})]})]})]})]}),"history"===A&&I&&Object(h.jsxs)("div",{className:"AccountDetailsOverviewBalances",children:[m&&Object(h.jsxs)("div",{className:"AccountNameContainer",children:["market_icon"in m&&Object(h.jsx)("div",{className:"AccountDetailsAccountIcon",style:{backgroundImage:"url(".concat(m.market_icon,")")}}),Object(h.jsx)("span",{className:"AccountName",children:m.name})]}),Object(h.jsx)("div",{className:"AccountDetailsOverviewBalancesChart",children:Object(h.jsx)(lt.c,{options:vt("",(e="usd"===L?"USD":"BTC",function(t){return"".concat(t.dataset.label,": ").concat(st({value:t.parsed.y,currency:e}))})),data:{labels:I.map((function(e){return Ge.a.unix(e.date).toDate()})),datasets:[{label:"usd"===L?"USD":"BTC",data:I.map((function(e){return"usd"===L?e.usd:e.btc})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]}),B&&Object(h.jsx)(gt,{accountTable:B,accountId:j})]})},St=(a(312),a(313),function(){var e=Object(c.useContext)(Ae).accountsState.list;return Object(h.jsx)("div",{className:"AccountsList",children:e.map((function(e){return Object(h.jsx)(ft,{accountId:e},e)}))})}),Ct=(a(314),function(){var e=Object(c.useContext)(Ae),t=e.accountsState,a=e.accountsDispatch,r=t.accounts,n=t.accountPieChartData,s=t.accountTableData,i=Object(c.useContext)(Me).errorsDispatch,o=Object(c.useState)(null),u=Object(b.a)(o,2),d=u[0],j=u[1],f=Object(c.useState)(null),p=Object(b.a)(f,2),O=p[0],m=p[1],v=Object(c.useState)(null),x=Object(b.a)(v,2),g=x[0],_=x[1],S=Object(l.g)();return Object(c.useEffect)((function(){Be(a,t,i,"summary"),Se(a,t,i,"summary"),ge(a,t,i,"summary")}),[]),Object(c.useEffect)((function(){"summary"in n&&m(n.summary)}),[n]),Object(c.useEffect)((function(){"summary"in s&&_(y.a.orderBy(s.summary,["percentage"],["desc"]).slice(0,3))}),[s]),Object(c.useEffect)((function(){"summary"in r&&j(r.summary)}),[r]),Object(h.jsxs)("div",{className:"AccountsSummaryPreview",children:[Object(h.jsxs)("div",{className:"AccountsSummaryPreviewColumn",children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:"Agrregate / Summary account"})}),Object(h.jsxs)("div",{className:"AccountsSummaryPreviewCharts",children:[Object(h.jsx)("div",{className:"AccountsSummaryPreviewPieChart",children:d&&O&&Object(h.jsx)(jt,{accountPieChart:O})}),d&&Object(h.jsx)("div",{className:"AccountsSummaryPreviewBalanceTable",children:Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(st({value:parseFloat(d.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(d.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(d.day_profit_usd),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(st({value:parseFloat(d.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(d.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(st({value:parseFloat(d.day_profit_btc),currency:"BTC"})," BTC")})]})]})]})})]})]}),Object(h.jsxs)("div",{className:"AccountsSummaryPreviewColumn",children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:"Top assets"})}),g&&Object(h.jsx)("div",{className:"AccountsSummaryPreviewAssetsTable",children:Object(h.jsxs)(qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Token"}),Object(h.jsx)("th",{children:"Amount"}),Object(h.jsx)("th",{children:"Total value, $"})]})}),Object(h.jsx)("tbody",{children:g.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.currency_code}),Object(h.jsx)("td",{children:"".concat(st({value:e.position,currency:e.currency_code}))}),Object(h.jsx)("td",{children:"".concat(st({value:e.usd_value,currency:"USD"})," $")})]},e.currency_code)}))})]})})]}),Object(h.jsx)("div",{className:"AccountsSummaryButtonContainer",children:Object(h.jsx)(ze.a,{className:"AccountPreviewButton",onClick:function(){S({pathname:"/accounts/summary",search:window.location.search})},children:"View"})})]})}),Bt=function(){return Object(h.jsxs)("div",{className:"Accounts",children:[Object(h.jsx)(Ct,{}),Object(h.jsx)(St,{})]})},Nt=a(384),wt=a(46),Tt=function(e,t){return Math.ceil(e.diff(t)/36e5)},It=function(e,t){return Math.ceil(e.diff(t)/864e5)},kt=function(e){return Tt(Ge()(),Ge()(e.closed_at))},Dt=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,r,n,s,i,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:30,c=l.length>2&&void 0!==l[2]?l[2]:function(e){},r=24*a,n=1e3,s=0,i=[],o=function(){var e=Object(j.a)(d.a.mark((function e(){var a,l,u,j,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,s,n,"finished","closed_at");case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(l=a.slice(-1),u=Object(b.a)(l,1),j=u[0],!(a.length===n&&kt(j)<=r)){e.next=14;break}return s+=n,i=[].concat(Object(f.a)(i),Object(f.a)(a)),c(s),e.next=12,o();case 12:e.next=16;break;case 14:p=a.filter((function(e){return kt(e)<=r})),i=[].concat(Object(f.a)(i),Object(f.a)(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,o();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(e){var t=y.a.groupBy(e,(function(e){return Ge()(e.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))},At=function(e){var t=y.a.groupBy(e,"pair");return y.a.mapValues(t,(function(e){return y.a.mean(e.map((function(e){return e.completed_safety_orders_count})))}))},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Object(f.a)(new Array(e)).map((function(e,t){return Ge()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse()},Mt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Pt(t),c=a.map((function(t){return t in e?e[t]:0})),r=a.map((function(e){return Ge()(e,"YYYY-MM-DD")}));return[r,c]},Et=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Mt(e,t),c=0,r=a[1].map((function(e){var t=c+e;return c=t,t}));return[a[0],r]},Lt=function(e){var t=Ft(e),a=e.length>0?It(Ge()(),Ge()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Mt(t,a<30?30:a+1)},Rt=function(e){var t=function(e){var t=y.a.groupBy(e,"pair");return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e),a=y()(t).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[a.map((function(e){return e[0].split("_").reverse().join("/")})),a.map((function(e){return e[1]}))]},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",a=At(e),c=y()(a).toPairs().orderBy([1],[t]).value().slice(0,10),r=c.map((function(e){return e[0].split("_").reverse().join("/")})),n=c.map((function(e){return e[1]}));return[r,n]},Ut=1e5,Yt=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=30},Gt=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=Ut},zt=function(e,t){return Yt(e,t)?e.deals[t].list.filter((function(e){return kt(e)<=720})):[]},Vt=function(e,t){return Gt(e,t)?e.deals[t].list:[]},$t=function(e){return e.filter((function(e){return"failed"!==e.status&&"cancelled"!==e.status}))},qt=function(e){return{type:"setNewBotsList",payload:e}},Qt=function(e){return{type:"setHasMore",payload:e}},Kt=function(e){return{type:"addToBotsList",payload:e}},Wt=function(e){return{type:"setBotsOffset",payload:e}},Jt=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function Zt(e,t,a){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s,i,o,l,u,j,b,f,p,h=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>3&&void 0!==h[3]&&h[3],n=h.length>4?h[4]:void 0,t(Qt(!0)),s=a.offset,i=a.limit,o=a.filters,l=o.sorting,u=o.scope,j=o.type,b=o.account,f=n||i,e.prev=5,e.next=8,H(s,f,l,u,j,b,r);case 8:p=e.sent,r?(t(Wt(f)),t(qt(p))):(t(Wt(s+f)),t(Kt(p))),p.length<f&&t(Qt(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(qt([])),t(Wt(f)),t(Qt(!1)),c({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),Xt.apply(this,arguments)}function ea(){return(ea=Object(j.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(r);case 3:n=e.sent,t(Jt(r,n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"addError",payload:"Error when fetching bot ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ta(){return(ta=Object(j.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.bots,i=s[r],e.prev=2,"maxUsage"in s[r]){e.next=9;break}return e.next=6,Xe(i,n);case 6:o=e.sent,l=Object(v.a)(Object(v.a)({},i),{},{maxUsage:o}),t(Jt(i.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),u=Object(v.a)(Object(v.a)({},i),{},{maxUsage:0}),t(Jt(i.id,u)),c({type:"addError",payload:"Error when fetching max usage for bot ".concat(i.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function aa(){return(aa=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,j,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.bots,s=n[r],e.prev=2,"fundsLocked"in n[r]){e.next=12;break}return e.next=6,ae(r);case 6:i=e.sent,o=i.profits_in_usd,l=o.today_usd_profit,u=o.funds_locked_in_active_deals,j=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:u,todayUsdProfit:l}),t(Jt(s.id,j));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),b=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(Jt(s.id,b)),c({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function ca(){return(ca=Object(j.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.bots,i=s[n];try{o=zt(c,n),l=i.maxUsage,u=Object(v.a)(Object(v.a)({},i),{},{returns:ot(l,o)}),t(Jt(i.id,u))}catch(d){j=Object(v.a)(Object(v.a)({},i),{},{returns:0}),t(Jt(i.id,j)),r({type:"addError",payload:"Error when getting returns for bot ".concat(i.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ra=function(e,t,a){return{type:"getDealsList",payload:{deals:e,botId:t,periodInDays:a}}},na=function(e,t){return{type:"getActiveDealsList",payload:{activeDeals:e,botId:t}}},sa=function(e,t){return{type:"setOffset",payload:{botId:e,offset:t}}},ia=function(e){return{type:"resetDeals",payload:{botId:e}}},oa=function(e){return{type:"resetActiveDeals",payload:{botId:e}}};function la(e,t,a,c){return ua.apply(this,arguments)}function ua(){return(ua=Object(j.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Yt(t,r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Dt(r,30);case 5:n=e.sent,a(ra(n,r,30)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||c({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function da(e,t,a,c){return ja.apply(this,arguments)}function ja(){return ja=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>4&&void 0!==i[4]&&i[4],e.prev=1,!Gt(t,r)||n){e.next=4;break}return e.abrupt("return");case 4:return n&&a(ia(r)),e.next=7,la(t,a,c,r);case 7:return e.next=9,Dt(r,Ut,(function(e){a(sa(r,e))}));case 9:s=e.sent,a(ra(s,r,Ut)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||c({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),ja.apply(this,arguments)}var ba=function(){var e=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]&&s[3],e.prev=1,r&&t(oa(c)),e.next=5,ee(c,0,1e3,"active","created_at");case 5:n=e.sent,t(na(n,c)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||a({type:"addError",payload:"Error when fetching active deals for bot ".concat(c)}),e.abrupt("return",Promise.resolve([]));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,c){return e.apply(this,arguments)}}(),fa=(a(315),a(316),function(e){var t,a,r,n=e.deals,s=(e.timeRangeValue,e.dateLabelsDays),i=Object(c.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)([[],[]]),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(c.useState)([]),m=Object(b.a)(O,2),v=m[0],x=m[1],g=function(e){var t=y.a.countBy(e,(function(e){return e.localized_status})),a=["Cancelled","StopLoss","Failed","Completed","Closed at Market Price","Liquidated","Switched"],c=a.map((function(e){return t[e]}));return[a,c]}(n);return Object(c.useEffect)((function(){u($t(n))}),[n]),Object(c.useEffect)((function(){p(function(e,t){var a=y.a.groupBy(e,(function(e){return Ge()(e.closed_at).format("YYYY-MM-DD")})),c=y.a.mapValues(a,(function(e){return e.length}));return t.map((function(e){return e in c?c[e]:0}))}(l,s)),x(function(e){var t=e.map((function(e){var t=Ge()(e.created_at),a=e.closed_at?Ge()(e.closed_at):Ge()();return Tt(a,t)})),a=y.a.countBy(t),c=y.a.keys(a).map((function(e){return parseInt(e)})),r=c.map((function(e){return a[e]}));return[c,r]}(l))}),[l]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:yt("Finished deals per day",s.length<70),data:{labels:s,datasets:[{label:"Finished deals",data:f,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.b,{options:{aspectRatio:1.7,plugins:{title:{display:!0,text:"Finished deals by Status"},tooltip:{callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return t?e+t:e}),0),c=t.data[e.dataIndex],r=Math.floor(c/a*100+.5),n=e.label;return"".concat(n,": ").concat(c," (").concat(r,"%)")}}},legend:{labels:{filter:function(e,t){return t.datasets[0].data[e.index]}}}}},width:300,data:{labels:g[0],datasets:[{data:g[1],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(39, 47, 148, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(39, 47, 148, 1)"],borderWidth:1}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:(t="Finished deals duration histogram, hours",a="Duration, hours",r="Number of deals",{barPercentage:1.25,scales:{x:{type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:r}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x",callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return e+t})),c=t.data[e.dataIndex],r=Math.floor(c/a*100+.5);return" ".concat(c," deals (").concat(r,"%)")},title:function(e){var t=parseInt(e[0].label);return"Duration from ".concat(t-1," to ").concat(t," hours")}}}}}),data:{labels:v[0],datasets:[{label:"Finished deals",data:v[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),pa=(a(317),function(e){var t=e.deals,a=(e.timeRangeValue,e.dateLabelsDays,e.bot),r=Object(c.useState)([[],[]]),n=Object(b.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)([[],[]]),l=Object(b.a)(o,2),u=l[0],d=l[1],j=Object(c.useState)([[],[]]),f=Object(b.a)(j,2),p=f[0],O=f[1];return Object(c.useEffect)((function(){i(function(e){var t=Ft(e),a=e.length>0?It(Ge()(),Ge()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Et(t,a<30?30:a+1)}(t)),d(Lt(t)),O(Rt(t))}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.c,{options:mt("Accumulative Profit, $"),data:{labels:s[0],datasets:[{label:"Accumulative Profit, $",data:s[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:Ot("Daily Profit, $"),data:{labels:u[0],datasets:[{label:"Profit, $",data:u[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),"Bot::SingleBot"!==a.type&&Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:xt("Pairs leaderboard by profit",p[0]),data:{labels:p[0],datasets:[{label:"Profit, $",data:p[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),ha=(a(318),function(e){var t,a,r,n=e.deals,s=(e.timeRangeValue,e.dateLabelsDays,e.bot,Object(c.useState)([])),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([]),d=Object(b.a)(u,2),j=d[0],f=d[1],p=Object(c.useState)([[],[]]),O=Object(b.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)([[],[]]),g=Object(b.a)(x,2),_=g[0],S=g[1];return Object(c.useEffect)((function(){l($t(n))}),[n]),Object(c.useEffect)((function(){f(function(e){var t=e.map((function(e){return e.completed_safety_orders_count})),a=y.a.countBy(t),c=y.a.keys(a).map((function(e){return parseInt(e)})),r=c.map((function(e){return a[e]}));return[c,r]}(o)),v(Ht(o)),S(Ht(o,"asc"))}),[o]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:xt("Pairs with least SO completed",_[0]),data:{labels:_[0],datasets:[{label:"Average completed safety orders",data:_[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:xt("Pairs with most SO completed",m[0]),data:{labels:m[0],datasets:[{label:"Average completed safety orders",data:m[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:(t="Histogram of completed SO per deal",a="Number of completed safety orders",r="Number of deals",{barPercentage:1.25,scales:{x:{beginAtZero:!0,suggestedMin:0,type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:r}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x"}}}),data:{labels:j[0],datasets:[{label:"Finished deals",data:j[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Oa=(a(319),function(e){var t=e.bot,a=e.deals,r=e.account,n=e.infoKey,s=e.timeRangeValue,i=Object(c.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){if(a)if("allTime"===s){var e=a.length>0?Math.ceil((t=a.slice(-1).pop(),It(Ge()(),Ge()(t.created_at)))):0;u(Pt(e>30?e:30))}else"30d"===s&&u(Pt(30));var t}),[a]),Object(h.jsx)(h.Fragment,{children:a&&l&&t&&r&&Object(h.jsxs)("div",{className:"DCABotDetailsCharts",children:["main"===n&&Object(h.jsx)(fa,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"settings"===n&&Object(h.jsx)(fa,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"profits"===n&&Object(h.jsx)(pa,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t}),"safeties"===n&&Object(h.jsx)(ha,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t})]})})}),ma=a(77),va=(a(321),a(381)),xa=a(389),ya=a(385),ga={Cancelled:"secondary",StopLoss:"danger",Failed:"warning",Completed:"success","Closed at Market Price":"dark",Liquidated:"dark",Switched:"secondary"},_a=function(e){e.bot;var t=e.deals,a=e.dealStateSwitcher,c=r.a.useMemo((function(){return[{Header:"ID",accessor:"id",disableSortBy:!0},{Header:"Pair",accessor:function(e,t){return e.pair.split("_").reverse().join("/")},id:"pair",disableSortBy:!0},{Header:"Status",accessor:"localized_status",Cell:function(e){var t=e.cell.value;return Object(h.jsx)(va.a,{style:{fontSize:"12px"},bg:ga[t],children:t})},disableSortBy:!0},{Header:"Start",accessor:function(e,t){return new Date(e.created_at)},id:"created_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Ge()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:Ge()(t).format("HH:mm")})]})}},{Header:"End",accessor:function(e,t){return new Date(e.closed_at)},id:"closed_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return"finished"===a?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Ge()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:Ge()(t).format("HH:mm")})]}):Object(h.jsx)("div",{})}},{Header:"Duration",accessor:function(e,t){var a=Ge.a.utc(e.created_at);return(e.closed_at?Ge.a.utc(e.closed_at):Ge.a.utc()).diff(a)},id:"duration",Cell:function(e){var t=e.cell.value,a=Ge.a.duration(t),c=Math.floor(a.asDays()),r=c?"".concat(c,"d "):"",n=a.hours(),s="".concat(n,"h "),i=a.minutes(),o="".concat(i,"m");return"".concat(r," ").concat(s," ").concat(o)}},{Header:"Avg. entry price",id:"bought_average_price",accessor:function(e,t){return"long"===e.strategy?e.bought_average_price:e.sold_average_price},Cell:function(e){var t=e.cell.value;return t?st({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"finished"===a?"Close price":"Current price",id:"sold_average_price",accessor:function(e,t){return"finished"===a?"long"===e.strategy?e.sold_average_price:e.bought_average_price:e.current_price},Cell:function(e){var t=e.cell.value;return t?st({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],c=e.pair.split("_")[1],r="long"===e.strategy?st({value:e.bought_amount,currency:c}):st({value:e.sold_amount,currency:c}),n="long"===e.strategy?st({value:e.bought_volume,currency:a}):st({value:e.sold_volume,currency:a});return"".concat(r," ").concat(c,"!").concat(n," ").concat(a)},id:"volume",Cell:function(e){var t=e.cell.value.split("!");return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:t[0]}),Object(h.jsx)("div",{children:t[1]})]})},disableSortBy:!0},{Header:"Filled SO",id:"completed_safety_orders_count",accessor:function(e,t){return"".concat(e.completed_safety_orders_count).concat(e.completed_manual_safety_orders_count?" (+".concat(e.completed_manual_safety_orders_count,")"):"")},disableSortBy:!0},{Header:"Profit, %",accessor:"finished"===a?"final_profit_percentage":"actual_profit_percentage",Cell:function(e){var t=e.cell.value;return"".concat(t,"%")},disableSortBy:!0},{Header:"Profit, $",accessor:"finished"===a?"usd_final_profit":"actual_usd_profit",sortType:function(e,t){return(e=Number("finished"===a?e.original.usd_final_profit:e.original.actual_usd_profit))>(t=Number("finished"===a?t.original.usd_final_profit:t.original.actual_usd_profit))?1:-1},Cell:function(e){var t=e.cell.value,a=parseFloat(t);return Object(h.jsx)(va.a,{style:{fontSize:"13px"},bg:a>=0?"success":"danger",children:"".concat(st({value:a,currency:"USD"},"always")," $")})}},{Header:"Profit in Base",id:"profitBase",accessor:function(e,t){return"".concat(parseFloat(e.bought_amount)-parseFloat(e.sold_amount),"!").concat(e.pair.split("_")[1])},Cell:function(e){var t=e.cell.value,c=parseFloat(t.split("!")[0]),r=t.split("!")[1];return"finished"===a?Object(h.jsx)("span",{style:{color:c>=0?"green":"red"},children:"".concat(st({value:c,currency:r},"always")," ").concat(r)}):""},disableSortBy:!0},{Header:"Profit in Quote",id:"profitQuote",accessor:function(e,t){return"".concat(parseFloat(e.sold_volume)-parseFloat(e.bought_volume),"!").concat(e.pair.split("_")[0])},Cell:function(e){var t=e.cell.value,c=parseFloat(t.split("!")[0]),r=t.split("!")[1];return"finished"===a?Object(h.jsx)("span",{style:{color:c>=0?"green":"red"},children:"".concat(st({value:c,currency:r},"always")," ").concat(r)}):""},disableSortBy:!0}]}),[]),n=Object(ma.useTable)({columns:c,data:t,disableSortRemove:!0,autoResetPage:!0,autoResetSortBy:!1,initialState:{pageSize:50,sortBy:"finished"===a?[{id:"closed_at",desc:!0}]:[{id:"created_at",desc:!0}]}},ma.useSortBy,ma.usePagination),s=n.getTableProps,i=n.getTableBodyProps,o=n.headerGroups,l=n.prepareRow,u=n.page,d=n.pageCount,j=n.gotoPage,f=n.nextPage,p=n.previousPage,O=n.state.pageIndex,m=r.a.useState(!1),x=Object(b.a)(m,2),y=x[0],g=x[1],_=r.a.useState(null),S=Object(b.a)(_,2),C=S[0],B=S[1];return Object(h.jsx)("div",{className:"DCABotDetailsDealsTable",children:Object(h.jsxs)("div",{className:"DCABotDetailsDealsTableContainer",children:[Object(h.jsx)(Ca,{modalIsOpen:y,setModalIsOpen:g,dealId:C}),d>1&&Object(h.jsx)(Sa,{pageIndex:O,pageCount:d,gotoPage:j,nextPage:f,previousPage:p}),Object(h.jsxs)(qe.a,Object(v.a)(Object(v.a)({striped:!0,bordered:!0},s()),{},{hover:!0,children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:o.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},i()),{},{children:u.map((function(e,t){return l(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{onClick:function(){B(e.original.id),g(!0)},style:{cursor:"pointer"},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})})},Sa=function(e){var t=e.pageIndex,a=e.pageCount,c=e.gotoPage,r=e.nextPage,n=e.previousPage,s=function(e,t){return Array(t-e+1).fill(0).map((function(t,a){return e+a}))},i=function(e,t){return Object(h.jsx)(xa.a.Item,{active:e===t,onClick:function(){c(e)},children:e+1},e)},o=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(xa.a.First,{onClick:function(){c(0)}}),Object(h.jsx)(xa.a.Prev,{onClick:function(){n()}}),t-2<4&&i(t-2,t),t-1<4&&i(t-1,t)]})},l=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(xa.a.Next,{onClick:function(){r()}}),Object(h.jsx)(xa.a.Last,{onClick:function(){c(a-1)}})]})};return Object(h.jsxs)(h.Fragment,{children:[a<=16&&Object(h.jsx)(xa.a,{children:s(0,a-1).map((function(e){return i(e,t)}))}),a>16&&Object(h.jsxs)(xa.a,{children:[t<7&&Object(h.jsxs)(h.Fragment,{children:[s(0,6).map((function(e){return i(e,t)})),l()]}),t>=7&&t<=a-8&&Object(h.jsxs)(h.Fragment,{children:[o(),i(t-2,t),i(t-1,t),Object(h.jsx)(xa.a.Item,{active:!0,children:t+1}),i(t+1,t),i(t+2,t),l()]}),a-t<8&&Object(h.jsxs)(h.Fragment,{children:[o(),s(a-7,a-1).map((function(e){return i(e,t)}))]})]})]})},Ca=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,n=e.dealId,s=r.a.useState(null),i=Object(b.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){n&&q(n).then((function(e){l(e)}))}),[n]),Object(h.jsx)(h.Fragment,{children:o&&Object(h.jsxs)(ya.a,{show:t,onHide:function(){a(!1)},scrollable:!0,size:"lg",children:[Object(h.jsx)(ya.a.Header,{closeButton:!0,children:Object(h.jsx)(ya.a.Title,{children:o.id})}),Object(h.jsxs)(ya.a.Body,{children:[o.bot_events.length>0&&Object(h.jsxs)(qe.a,{striped:!0,hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Date/Time"}),Object(h.jsx)("th",{children:"Message"})]})}),Object(h.jsx)("tbody",{children:o.bot_events.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Ge()(e.created_at).format("D MMM, YYYY HH:mm")}),Object(h.jsx)("td",{children:e.message})]},e.created_at)}))})]}),0===o.bot_events.length&&Object(h.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(h.jsxs)("p",{children:["\u201cNothing can last forever. There isn't any memory, no matter how intense, that doesn't fade out at last.\u201d"," "]}),Object(h.jsx)("footer",{className:"blockquote-footer",children:"Juan Rulfo"})]})]}),Object(h.jsx)(ya.a.Footer,{children:Object(h.jsx)(ze.a,{variant:"primary",onClick:function(){window.open("https://3commas.io/deals/".concat(n),"_blank")},children:"Open in 3commas"})})]})})},Ba=a(383),Na=a(390),wa=a(386),Ta=a(382),Ia=(a(322),a(323),function(e){var t=e.currency,a=e.size,c=void 0===a?15:a,r=t.length>5?t.replace("USDT","").replace("BUSD","").replace("-PERP","").replace("USD",""):t;return Object(h.jsx)("div",{className:"CurrencyIcon",style:{width:c,height:c,borderRadius:c,backgroundSize:c,backgroundImage:"url(https://3commas.io/currency/icon/".concat(r.toLowerCase(),".png)")}})}),ka=a(387),Da={nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TV",buy_or_strong_buy:"Buy",strong_buy:"Strong Buy",sell_or_strong_sell:"Sell",strong_sell:"Strong Sell",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"},Fa=function(e,t){if(t in Da)return Da[t];var a=e.strategies.find((function(e){return e.strategy_key===t}));return a?a.name:t},Aa=function(e){var t=e.botItem,a=e.account,r=Object(c.useContext)(He),n=r.dealsState,s=r.dealsDispatch,i=Object(c.useContext)(Ee),o=i.botsState,u=i.botsDispatch,f=Object(c.useContext)(Me).errorsDispatch,p=Object(c.useContext)(Pe).strategiesState,O=Object(c.useState)(!1),m=Object(b.a)(O,2),v=m[0],x=m[1],y=Object(l.g)(),g=n.deals,_=Object(ka.a)().t;Object(c.useEffect)((function(){(function(e,t,a,c){return aa.apply(this,arguments)})(u,o,f,t.id).then((function(){x(!0)}))}),[t]),Object(c.useEffect)((function(){v&&function(e,t,a,c,r){return ta.apply(this,arguments)}(u,o,f,t.id,a).then()}),[a,t,v]),Object(c.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&Yt(n,t.id)&&function(e,t,a,c,r){ca.apply(this,arguments)}(u,o,n,f,t.id)}),[g,t]);var S=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(Math.random()),la(n,s,f,t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=It(Ge()(),Ge()(t.created_at)),B=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=1===t.strategy_list.length?Fa(p,t.strategy_list[0].strategy):"Combined";return Object(h.jsx)("div",{className:"BotPreview",children:Object(h.jsxs)("div",{className:"BotPreviewRow",children:[Object(h.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:[Object(h.jsx)(Pa,{bot:t}),Object(h.jsx)(Ea,{strategy:t.strategy,age:C,is_enabled:t.is_enabled}),Object(h.jsx)("div",{className:"BotReturns",children:Object(h.jsx)(La,{returns:t.returns,getReturns:S,maxUsage:t.maxUsage,botId:t.id})})]}),Object(h.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(h.jsx)(Ma,{name:t.name}),Object(h.jsx)(qe.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(h.jsx)("td",{children:t.id})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(h.jsx)("td",{children:Object(h.jsxs)("div",{style:{display:"flex"},children:["market_icon"in a&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(a.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),y({pathname:"/accounts/".concat(a.id),search:window.location.search})},href:"#",children:a.name})]})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(h.jsx)("td",{children:N})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(h.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.todayUsdProfit)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.finished_deals_profit_usd)})]}),Object(h.jsx)("tr",{children:Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:_("dcaBotFundsUsedMaxUsage")}),children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(h.jsx)("td",{children:"".concat(B.format(rt(t)),"/").concat(B.format(t.maxUsage))})]})})}),Object(h.jsx)("tr",{children:Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:_("dcaBotCurrentPnl")}),children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(h.jsx)("td",{children:B.format(t.active_deals_usd_profit)})]})})})]})}),Object(h.jsx)("div",{className:"BotPreviewButtons",children:Object(h.jsx)(ze.a,{variant:"primary",onClick:function(){y({pathname:"/".concat(t.id),search:window.location.search})},children:"View"})})]})]})})},Pa=function(e){var t=e.bot,a=t.pairs[0].split("_")[0],c=t.pairs[0].split("_")[1],r="Bot::MultiBot"===t.type;return Object(h.jsxs)("div",{className:"IconsSetContainer",children:[Object(h.jsx)("div",{className:"BotQuoteIconContainer",children:Object(h.jsx)(Ia,{currency:a,size:60})}),r?Object(h.jsx)("div",{className:"BotBaseIconContainer",children:Object(h.jsx)("img",{src:"/Multicoin_white.png",alt:"logo",className:"RobotsIcon"})}):Object(h.jsx)("div",{className:"BotBaseIconContainer",children:Object(h.jsx)(Ia,{currency:c,size:60})})]})},Ma=function(e){var t=e.name;return Object(h.jsx)("div",{className:"BotNameContainer",children:Object(h.jsx)("span",{className:"BotName",children:t})})},Ea=function(e){var t=e.strategy,a=e.age,c=e.is_enabled;return Object(h.jsxs)("div",{className:"BotInfoContainer",children:[Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(h.jsx)(va.a,{bg:"success",children:"Long"}):Object(h.jsx)(va.a,{bg:"danger",children:"Short"})]}),Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(h.jsx)("div",{className:"BotInfoValue",children:"".concat(a," days")})]}),!c&&Object(h.jsx)("div",{className:"BotInfoRecordContainer",children:Object(h.jsx)(va.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},La=function(e){var t=e.returns,a=e.getReturns,c=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),r=Object(ka.a)().t,n=t||0===t;return Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:r("dcaBotReturns")}),children:Object(h.jsxs)("div",{className:"BotReturnsContainer",children:[n&&Object(h.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(c.format(t||0))}),Object(h.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!n&&Object(h.jsx)(ze.a,{onClick:function(){a()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},Ra=(a(327),function(e){var t=e.account,a=e.bot,r=e.deals,n=Object(ka.a)().t,s=Object(c.useContext)(Pe).strategiesState,i=Object(c.useContext)(He).dealsState.activeDeals,o=Object(l.g)(),u=Object(c.useState)({value:0,currency:""}),d=Object(b.a)(u,2),j=d[0],f=d[1],p=Object(c.useState)(0),O=Object(b.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)([]),g=Object(b.a)(x,2),_=g[0],S=g[1],C=Object(c.useState)(0),B=Object(b.a)(C,2),N=B[0],w=B[1],T=Object(c.useState)({value:0,currency:""}),I=Object(b.a)(T,2),k=I[0],D=I[1],F=Object(c.useState)({value:0,currency:""}),A=Object(b.a)(F,2),P=A[0],M=A[1],E=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),L=1===a.pairs.length?a.pairs[0].split("_").reverse().join("/"):"".concat(a.pairs.length," pairs"),R=1===a.pairs.length?"":"".concat(a.pairs[0].split("_")[0]," market"),H=a.strategy_list.map((function(e){return Object(h.jsx)("div",{children:"".concat(Fa(s,e.strategy)).concat(e.options.type?", ".concat(Fa(s,e.options.type)):"").concat(e.options.percent?", ".concat(e.options.percent,"%"):"").concat(e.options.time?", ".concat(e.options.time):"").concat(e.options.points?", ".concat(e.options.points):"")},"".concat(Math.random()))}));return Object(c.useEffect)((function(){a.id&&t.id&&function(e,t){return it.apply(this,arguments)}(a,t).then((function(e){D(e)}))}),[a,t]),Object(c.useEffect)((function(){a&&a.id&&a.id in i&&(M(function(e,t,a){var c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=c,s=0;return"short"===t.strategy&&ct(a.market_code)?(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_base_funds.toString())}),0),n=r):(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_quote_funds.toString())}),0),n=c),{value:s,currency:n}}(i[a.id].list,a,t)),f(function(e,t,a){var c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=0,s=c;"long"===t.strategy?(n=e.reduce((function(e,t){return e+parseFloat(t.bought_volume)}),0),s=c):"short"===t.strategy&&ct(a.market_code)?(n=e.reduce((function(e,t){return e+parseFloat(t.sold_amount)}),0),s=r):"short"!==t.strategy||ct(a.market_code)||(n=e.reduce((function(e,t){return e+parseFloat(t.sold_volume)}),0),s=c);var i=parseFloat(t.leverage_custom_value);return{value:i?n/i:n,currency:s}}(i[a.id].list,a,t)))}),[i,a]),Object(c.useEffect)((function(){S($t(r))}),[r]),Object(c.useEffect)((function(){w(function(e){var t=e.map((function(e){var t=Ge()(e.created_at);return(e.closed_at?Ge()(e.closed_at):Ge()()).diff(t)})),a=y.a.sum(t)/t.length||0;return Ge.a.utc(a).format("HH:mm")}(_))}),[_]),Object(c.useEffect)((function(){k.value&&j.value&&v(j.value/k.value)}),[k,j]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Account"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:Object(h.jsxs)("div",{style:{display:"flex"},children:["market_icon"in t&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(t.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),o({pathname:"/accounts/".concat(t.id),search:window.location.search})},href:"#",children:t.name})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Bot pairs"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:L}),Object(h.jsx)("div",{children:R})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Deal start condition"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:H})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Active deals/Max"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.active_deals_count,"/").concat(a.max_active_deals)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotFundsUsed")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Funds used"})}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(st(j)," ").concat(j.currency)}),Object(h.jsx)("div",{style:{fontSize:"10px"},children:"".concat(E.format(m)," of max usage")})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotMaxUsage")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max usage"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st(k)," ").concat(k.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotReservedFunds")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Reserved funds"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st(P)," ").concat(k.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total finished deals"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:_.length})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Avg deal duration"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(N," hrs")})]})]})}),Ha=(a(328),function(e){e.account;var t=e.bot,a=e.deals,r=e.fromFilter,n=e.toFilter,s=Object(ka.a)().t,i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"}),o=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),l=Object(c.useState)({value:0,currency:""}),u=Object(b.a)(l,2),d=u[0],j=u[1],p=Object(c.useState)({value:0,currency:""}),O=Object(b.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)({value:0,currency:""}),g=Object(b.a)(x,2),_=g[0],S=g[1],C=Object(c.useState)({value:0,currency:""}),B=Object(b.a)(C,2),N=B[0],w=B[1],T=Object(c.useState)(0),I=Object(b.a)(T,2),k=I[0],D=I[1],F=Object(c.useState)([]),A=Object(b.a)(F,2),P=A[0],M=A[1];return Object(c.useEffect)((function(){M($t(a)),S(function(e,t,a,c){var r=Ge.a.utc(e),n=Ge.a.utc(a).startOf("day"),s=Ge.a.utc(c).startOf("day"),i=Ge.a.max([n,r]),o=y.a.unzip(y.a.zip.apply(y.a,Object(f.a)(Lt(t))).filter((function(e){return!e[0].isBefore(i,"day")&&!e[0].isAfter(s,"day")})));return{value:y.a.mean(o[1]),currency:"$"}}(t.created_at,a,r,n)),t.maxUsage&&w({value:ot(t.maxUsage,a),currency:"%"}),D(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0}(a))}),[a,t]),Object(c.useEffect)((function(){j(function(e){return{value:y.a.mean(e.map((function(e){return parseFloat(e.final_profit_percentage)})))||0,currency:"%"}}(P)),v(function(e){return{value:y.a.mean(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0,currency:"$"}}(P))}),[P]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Today's profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat((t.todayUsdProfit||0)<0?"showRed":"showGreen"),children:i.format(t.todayUsdProfit||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(k<0?"showRed":"showGreen"),children:i.format(k)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:s("dcaBotCurrentPnl")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Current uPnL"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(parseFloat(t.active_deals_usd_profit)<0?"showRed":"showGreen"),children:i.format(parseFloat(t.active_deals_usd_profit))})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:s("dcaBotAverageTP")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average TP, %"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(d.value<0?"showRed":"showGreen"),children:"".concat(st(d),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average profit from deal"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(m.value<0?"showRed":"showGreen"),children:i.format(m.value||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average daily profit"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(_.value<0?"showRed":"showGreen"),children:i.format(_.value)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:s("dcaBotMaxReturnsTime")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Returns"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(N.value<0?"showRed":"showGreen"),children:o.format(N.value)})]})]})}),Ua=(a(329),function(e){var t=e.account,a=e.bot,r=(Object(ka.a)().t,Object(c.useState)({value:0,currency:"",additionalCurrency:""})),n=Object(b.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)({value:0,currency:"",additionalCurrency:""}),l=Object(b.a)(o,2),u=(l[0],l[1]);Object(c.useEffect)((function(){a.id&&t.id&&(i(function(e,t){var a=e.pairs[0].split("_")[0],c=e.pairs[0].split("_")[1],r=a,n="";return"percent"===e.base_order_volume_type?(r="%",n="short"===e.strategy&&ct(t.market_code)?c:""):r="quote_currency"===e.base_order_volume_type?a:c,{value:parseFloat(e.base_order_volume),currency:r,additionalCurrency:n}}(a,t)),u(nt(a,t)))}),[a,t]);var d=a.leverage_custom_value?parseInt(a.leverage_custom_value):"",j="not_specified"!==a.leverage_type?a.leverage_type:"";return Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Profit currency"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"quote_currency"===a.profit_currency?"Quote":"Base"})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Take profit (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(st({value:parseFloat(a.take_profit),currency:"%"}),"%")}),Object(h.jsx)("div",{children:"total"===a.take_profit_type?"(from total volume)":"(from base volume)"})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Trailing"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[a.trailing_enabled&&"".concat(st({value:parseFloat(a.trailing_deviation),currency:"%"}),"%"),!a.trailing_enabled&&"OFF"]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Stop loss (timeout)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st({value:parseFloat(a.stop_loss_percentage),currency:"%"}),"% (").concat(a.stop_loss_timeout_in_seconds," s)")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Base order size (type)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"".concat(st(s)," ").concat(s.currency).concat(s.additionalCurrency?" (".concat(s.additionalCurrency,")"):"")}),Object(h.jsx)("div",{children:"(".concat(a.start_order_type,")")})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Leverage (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:d||"0"}),Object(h.jsx)("div",{children:j})]})]})]})}),Ya=(a(330),a(331),function(e){var t=e.account,a=e.bot,r=e.deals,n=Object(ka.a)().t,s=Object(c.useState)({value:0,currency:"",additionalCurrency:""}),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(0),d=Object(b.a)(u,2),j=d[0],p=d[1];Object(c.useEffect)((function(){var e,c,r;a.id&&t.id&&(l(nt(a,t)),p((e=parseFloat(a.safety_order_step_percentage),c=a.max_safety_orders,r=parseFloat(a.martingale_step_coefficient),Object(f.a)(Array(c)).reduce((function(t,a,c){return t+e*Math.pow(r,c)}),0))))}),[a,t]);var O=Object(c.useState)([]),m=Object(b.a)(O,2),v=m[0],x=m[1];Object(c.useEffect)((function(){x($t(r))}),[r]);var g=Object(c.useState)(0),_=Object(b.a)(g,2),S=_[0],C=_[1],B=Object(c.useState)(0),N=Object(b.a)(B,2),w=N[0],T=N[1],I=Object(c.useState)(0),k=Object(b.a)(I,2),D=k[0],F=k[1];return Object(c.useEffect)((function(){C(y.a.mean(v.map((function(e){return e.completed_safety_orders_count})))),T(v.filter((function(e){return 0===e.completed_safety_orders_count})).length),F(v.filter((function(e){return e.completed_safety_orders_count===a.max_safety_orders})).length)}),[v]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max safety trades (active)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.max_safety_orders," (").concat(a.active_safety_orders_count,")")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotSafetyPriceDeviation")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Price deviation to open SO"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st({value:parseFloat(a.safety_order_step_percentage),currency:"%"}),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO size"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st(o)," ").concat(o.currency).concat(o.additionalCurrency?" (".concat(o.additionalCurrency,")"):"")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotSafetyVolumeScale")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO volume scale"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_volume_coefficient})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotSafetyStepScale")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO step scale"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_step_coefficient})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:n("dcaBotSafetyMaxPrice")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max price deviation"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(st({value:j,currency:"%"}),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average # SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&st({value:S,currency:"%"})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"None SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(w," deals")}),Object(h.jsx)("div",{children:"".concat(st({value:w/v.length*100,currency:"%"}),"%")})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"All SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(D," deals")}),Object(h.jsx)("div",{children:"".concat(st({value:D/v.length*100,currency:"%"}),"%")})]})})]})]})}),Ga=function(e){var t=e.bot,a=e.deals,c=e.account,r=e.infoKey,n=e.setInfoKey,s=e.fromFilter,i=e.toFilter,o=It(Ge()(),Ge()(t.created_at));return Object(h.jsxs)("div",{className:"DCABotDetailsInfo",children:[Object(h.jsxs)("div",{className:"DCABotDetailsInfoLogo",children:[Object(h.jsx)(Pa,{bot:t}),Object(h.jsx)(Ea,{strategy:t.strategy,age:o,is_enabled:t.is_enabled})]}),Object(h.jsx)("div",{className:"DCABotDetailsInfoTable",children:Object(h.jsxs)(Ba.a,{activeKey:r,onSelect:function(e){return n(e)},children:[Object(h.jsx)(Na.a,{eventKey:"main",title:"Main",tabClassName:"InfoTab",children:Object(h.jsx)(Ra,{account:c,bot:t,deals:a})}),Object(h.jsx)(Na.a,{eventKey:"settings",title:"Settings",tabClassName:"InfoTab",children:Object(h.jsx)(Ua,{account:c,bot:t})}),Object(h.jsx)(Na.a,{eventKey:"profits",title:"Profits",tabClassName:"InfoTab",children:Object(h.jsx)(Ha,{account:c,bot:t,deals:a,fromFilter:s,toFilter:i})}),Object(h.jsx)(Na.a,{eventKey:"safeties",title:"Safeties",tabClassName:"InfoTab",children:Object(h.jsx)(Ya,{account:c,bot:t,deals:a})})]})})]})},za=(a(332),[{value:"all",label:"All"},{value:"Cancelled",label:"Cancelled"},{value:"StopLoss",label:"StopLoss"},{value:"Failed",label:"Failed"},{value:"Completed",label:"Completed"},{value:"Closed at Market Price",label:"Closed at Market Price"},{value:"Liquidated",label:"Liquidated"},{value:"Switched",label:"Switched"}]),Va=function(){var e=Object(l.h)(),t=Object(l.g)(),a=Object(c.useContext)(Ee),r=a.botsState,n=a.botsDispatch,s=Object(c.useContext)(He),i=s.dealsState,o=s.dealsDispatch,u=i.activeDeals,d=Object(c.useContext)(Ee).botsState.bots,j=Object(c.useContext)(Me).errorsDispatch,p=Object(c.useContext)(Ae).accountsState.accounts,O=Object(c.useState)("30d"),m=Object(b.a)(O,2),x=m[0],y=m[1],g=Object(c.useState)(NaN),_=Object(b.a)(g,2),S=_[0],C=_[1],B=We(S),N=Object(c.useState)(null),w=Object(b.a)(N,2),T=w[0],I=w[1],k=Object(c.useState)([]),D=Object(b.a)(k,2),F=D[0],A=D[1],P=Object(c.useState)(!1),L=Object(b.a)(P,2),R=L[0],H=L[1],U=Object(c.useState)(!1),Y=Object(b.a)(U,2),G=Y[0],z=Y[1],V=Object(c.useState)({}),$=Object(b.a)(V,2),q=$[0],Q=$[1],K=Object(c.useState)("main"),W=Object(b.a)(K,2),J=W[0],Z=W[1],X=Object(c.useState)(0),ee=Object(b.a)(X,2),te=ee[0],ae=ee[1],ce=Object(c.useState)("all"),re=Object(b.a)(ce,2),ne=re[0],se=re[1],ie=Object(c.useState)("finished"),oe=Object(b.a)(ie,2),le=oe[0],ue=oe[1],de=Object(c.useState)("all"),je=Object(b.a)(de,2),be=je[0],fe=je[1],pe=Object(c.useState)([]),he=Object(b.a)(pe,2),Oe=he[0],me=he[1],ve=Object(c.useState)(new Date("2018-04-02")),xe=Object(b.a)(ve,2),ye=xe[0],ge=xe[1],_e=Object(c.useState)(new Date),Se=Object(b.a)(_e,2),Ce=Se[0],Be=Se[1],Ne=function(){se("all"),fe("all"),ge(new Date("2018-04-02")),Be(new Date)},we=function(){M(Math.random()),function(e,t,a,c){ea.apply(this,arguments)}(n,r,j,S),da(i,o,j,S,!0),ba(o,j,S,!0)};return Object(c.useEffect)((function(){e.botId&&C(parseInt(e.botId))}),[e]),Object(c.useEffect)((function(){M(Math.random()),S&&!B&&(da(i,o,j,S),ba(o,j,S))}),[S]),Object(c.useEffect)((function(){T&&Q(p[T.account_id])}),[T]),Object(c.useEffect)((function(){S&&I(d[S])}),[S,d]),Object(c.useEffect)((function(){S&&("30d"===x?H(!Yt(i,S)):"allTime"===x&&H(!Gt(i,S)),z(!Gt(i,S)))}),[i,x,S]),Object(c.useEffect)((function(){if(S){var e=[];"30d"===x?e=zt(i,S):"allTime"===x&&(e=Vt(i,S)),Ne(),A(e)}}),[R,G,x,S]),Object(c.useEffect)((function(){if(S){var e=[];"30d"===x?e=zt(i,S):"allTime"===x&&(e=Vt(i,S)),e=function(e,t){return!t||Ge()("01-04-2018","MM-DD-YYYY").isAfter(t,"day")?e:e.filter((function(e){return Ge()(e.closed_at).isSame(t,"day")||Ge()(e.closed_at).isAfter(t)}))}(e=function(e,t){return!t||Ge()().isSame(t,"day")?e:e.filter((function(e){return Ge()(e.closed_at).isSame(t,"day")||Ge()(e.closed_at).isBefore(t)}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.localized_status===t}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.pair===t}))}(e,be),ne),Ce),ye),A(e)}}),[be,ne,ye,Ce]),Object(c.useEffect)((function(){if(S&&T&&i.deals[S]&&i.deals[S].offset){var e=i.deals[S].offset||0;ae(Math.ceil(100*e/parseFloat(T.finished_deals_count)))}}),[i,S,T]),Object(c.useEffect)((function(){T&&me([{value:"all",label:"All"}].concat(Object(f.a)(T.pairs.map((function(e){return{value:e,label:e.split("_").reverse().join("/")}})))))}),[T]),Object(c.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(h.jsxs)("div",{className:"DCABotDetails",children:[Object(h.jsx)(ze.a,{variant:"primary",size:"sm",className:"DCABotDetailsGetBackButton",onClick:function(){t(-1)},children:"< Back to bots list"}),!G&&Object(h.jsx)(ze.a,{variant:"primary",size:"sm",onClick:function(){we()},children:"Refresh data"}),R&&!te&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(Nt.a,{now:100,animated:!0,className:"BotDetailsProgressBar"})})}),R&&!!te&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(Nt.a,{now:te,label:"".concat(te,"%"),className:"BotDetailsProgressBar"})})}),!R&&T&&q&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Oa,{bot:T,deals:F,account:q,infoKey:J,timeRangeValue:x}),Object(h.jsxs)("div",{className:"BotDetailsControlsContainer",children:[Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsxs)(Ve.a,{children:[Object(h.jsx)($e.a,{id:"radio-finished",type:"radio",variant:"outline-primary",name:"radio-dealStateSwitcher",value:"finished",checked:"finished"===le,onChange:function(e){return ue(e.currentTarget.value)},children:"Finished"}),Object(h.jsx)($e.a,{id:"radio-active",type:"radio",variant:"outline-primary",name:"radio-dealStateSwitcher",value:"active",checked:"active"===le,onChange:function(e){return ue(e.currentTarget.value)},children:"Active"})]})}),"finished"===le&&Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(Ve.a,{children:[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}].map((function(e,t){return Object(h.jsx)($e.a,{id:"radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:x===e.value,onChange:function(e){return y(e.currentTarget.value)},children:e.name},t)}))})}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Status:"}),Object(h.jsx)(wt.a,{onChange:function(e){se(e.value)},value:za.find((function(e){return e.value===ne})),className:"BotDetailsStatusFilter",theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})},options:za})]}),T&&T.pairs.length>1&&Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Pair:"}),Object(h.jsx)(wt.a,{onChange:function(e){fe(e.value)},value:Oe.find((function(e){return e.value===be})),className:"BotDetailsPairFilter",options:Oe,theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})}})]}),"allTime"===x&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"From:"}),Object(h.jsx)(ht.a,{dateFormat:"dd/MM/yyyy",selected:ye,onChange:function(e){ge(e)},selectsStart:!0,startDate:ye,endDate:Ce,className:"BotDetailsDateFilter",strictParsing:!0})]}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"To:"}),Object(h.jsx)(ht.a,{dateFormat:"dd/MM/yyyy",selected:Ce,onChange:function(e){return Be(e)},selectsEnd:!0,startDate:ye,endDate:Ce,minDate:ye,className:"BotDetailsDateFilter",strictParsing:!0})]})]}),Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(ze.a,{variant:"primary",onClick:function(){Ne()},children:"Clear filters"})})]})]}),Object(h.jsxs)("div",{className:"DCABotInfoGroup",children:[Object(h.jsx)("div",{className:"DCABotName",children:T.name}),Object(h.jsx)("div",{className:"DCABotId",children:"(Bot ID: ".concat(T.id,")")}),Object(h.jsx)("div",{className:"DCABotLinkTo3Commas",children:Object(h.jsx)(ze.a,{onClick:function(){window.open("https://3commas.io/bots/".concat(S),"_blank")},variant:"link",size:"sm",active:!0,children:"Open in 3Commas"})})]}),Object(h.jsx)(Ga,{bot:T,deals:F,account:q,infoKey:J,setInfoKey:Z,fromFilter:ye,toFilter:Ce}),"finished"===le&&F.length>0&&Object(h.jsx)(_a,{bot:T,deals:F,dealStateSwitcher:le}),"active"===le&&T.id&&T.id in u&&u[T.id].list.length>0&&Object(h.jsx)(_a,{bot:T,deals:u[T.id].list,dealStateSwitcher:le})]})]})},$a=(a(344),function(){var e=Object(c.useContext)(Ee),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)(Ae).accountsState,n=r.accounts,s=r.list,i=t.filters,o=function(){var e=Object(j.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setBotsFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(s.map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(n[e].market_icon,")")}})}),Object(h.jsx)("span",{children:n[e].name})]}),label_id:n[e].name}})))),u=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],b=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],p=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(c.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(i))}catch(e){}}),[i]),Object(h.jsxs)("div",{className:"BotsFilters",children:[Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(wt.a,{onChange:function(e){o({account:e.value})},value:l.find((function(e){return e.value===i.account})),options:l,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(h.jsx)(wt.a,{onChange:function(e){o({scope:e.value})},value:u.find((function(e){return e.value===i.scope})),options:u,className:"ScopeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(h.jsx)(wt.a,{onChange:function(e){o({type:e.value})},value:b.find((function(e){return e.value===i.type})),options:b,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(h.jsx)(wt.a,{onChange:function(e){o({sorting:e.value})},value:p.find((function(e){return e.value===i.sorting})),options:p,className:"Sorting"})]})]})}),qa=a(202),Qa=(a(345),a(20)),Ka=(a(346),function(){var e=Object(c.useContext)(Ee),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)(He),n=r.dealsState,s=r.dealsDispatch,i=n.deals,o=t.list,l=t.hasMore,u=t.offset,f=t.bots,p=Object(c.useContext)(Me).errorsDispatch,O=Object(c.useState)(!1),m=Object(b.a)(O,2),v=m[0],x=m[1],g=Object(c.useState)(!1),_=Object(b.a)(g,2),S=_[0],C=_[1],B=Object(c.useState)(0),N=Object(b.a)(B,2),w=N[0],T=N[1],I=Object(c.useState)([[],[]]),k=Object(b.a)(I,2),D=k[0],F=k[1],A=Object(c.useState)([[],[]]),P=Object(b.a)(A,2),L=P[0],R=P[1],H=Object(c.useState)([[],[],[]]),U=Object(b.a)(H,2),Y=U[0],G=U[1],z=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||0===u){e.next=3;break}return e.next=3,Zt(a,t,p,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){z().then((function(){l||C(!0)}))}),[u]);var V=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(Math.random()),t=Object(Qa.a)(o),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}if(c=a.value,Yt(n,c)){e.next=9;break}return e.next=9,la(n,s,p,c);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){S&&V().then((function(){x(!0)}))}),[S]),Object(c.useEffect)((function(){if(v){var e=function(e,t){return t.reduce((function(t,a){var c=Ft(zt(e,a));return y.a.mergeWith(c,t,(function(e,t){return(e=e||0)+(t||0)}))}),{})}(n,o);F(Mt(e)),R(Et(e)),G(function(e){var t=e.list.map((function(t){var a=e.bots[t];return{maxUsage:a.maxUsage||0,name:a.name,fundsLocked:rt(a)}})),a=y.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[a.map((function(e){return e.name})),a.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),a.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[v,f]),Object(c.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(c.useEffect)((function(){var e=o.filter((function(e){return Yt(n,e)}));T(e.length/o.length*100)}),[i]),Object(h.jsxs)("div",{className:"BotsListCharts",children:[!v&&Object(h.jsx)("div",{className:"ProgressBar",children:S?Object(h.jsx)(Nt.a,{now:Math.ceil(w),label:"".concat(Math.ceil(w),"%")}):Object(h.jsx)(Nt.a,{animated:!0,now:100})}),v&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(lt.c,{options:mt("Total Accumulative Profit (30 days), $"),data:{labels:L[0],datasets:[{label:"Accumulative Profit, $",data:L[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(lt.a,{options:Ot("Total Profit (30 days), $"),data:{labels:D[0],datasets:[{label:"Profit, $",data:D[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(lt.a,{options:xt("Funds locked/Max usage, $",Y[0]),data:{labels:Y[0],datasets:[{label:"Funds locked, $",data:Y[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:Y[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})}),Wa=function(){var e=Object(c.useContext)(Ee),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)(He).dealsState.deals,n=t.list,s=t.hasMore,i=t.filters,o=t.bots,l=Object(c.useContext)(Ae).accountsState.accounts,u=Object(c.useContext)(Me).errorsDispatch,f=Object(c.useState)(!1),p=Object(b.a)(f,2),O=p[0],m=p[1],v=!s&&0===n.length,x=We(i);return Object(c.useEffect)((function(){!x&&n.length?m(function(e,t){return e.every((function(e){return e in t}))}(n,r)):(m(!1),Zt(a,t,u,!0).then())}),[i]),v?Object(h.jsx)("div",{className:"FallbackContainer",children:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"No results found =("})})}):Object(h.jsxs)(qa.a,{dataLength:n.length,next:Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.length){e.next=3;break}return e.next=3,Zt(a,t,u,!1);case 3:case"end":return e.stop()}}),e)}))),hasMore:s,loader:Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(Te.a,{animation:"grow"})}),endMessage:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"Yay! You have seen it all"})}),children:[O?Object(h.jsx)(Ka,{}):Object(h.jsx)("div",{className:"ShowChartsButtonContainer",children:Object(h.jsx)(ze.a,{className:"ShowChartsButton",onClick:function(){m(!0)},children:"Calculate profits"})}),Object(h.jsx)("div",{className:"BotsList",children:n.map((function(e){return Object(h.jsx)(Aa,{botItem:o[e],account:l[o[e].account_id]},e)}))})]})},Ja=(a(347),function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)($a,{}),Object(h.jsx)(Wa,{})]})}),Za=(a(348),{BTC:"bitcoin",ETH:"ethereum",BNB:"binancecoin",USDT:"tether",USDC:"usd-coin",XRP:"ripple",TRX:"tron",BUSD:"binance-usd",DOGE:"dogecoin"}),Xa=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,r,n,s,i,o,l,u,j,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=parseFloat(t.start_price),c=parseFloat(t.quantity_per_grid),(r=t.grid_lines.slice().sort((function(e,t){return Math.abs(a-parseFloat(e.price))-Math.abs(a-parseFloat(t.price))})).slice()).shift(),n=y.a.sum(r.filter((function(e){return parseFloat(e.price)>a})).map((function(e){return c}))),s=y.a.sum(r.filter((function(e){return parseFloat(e.price)<a})).map((function(e){return parseFloat(e.price)*c}))),i=s+n*a,o=0,l=t.pair.split("_")[0],u=Ge.a.utc(t.updated_at),!l.includes("USD")){e.next=14;break}o=i,e.next=26;break;case 14:if(!(l in Za)){e.next=21;break}return e.next=17,fetch("https://api.coingecko.com/api/v3/coins/".concat(Za[l],"/history?date=").concat(u.format("DD-MM-YYYY"),"&localization=false")).then((function(e){return e.json()}));case 17:j=e.sent,o=i*j.market_data.current_price.usd,e.next=26;break;case 21:if(!(Ge()().utc().diff(u,"days")<366)){e.next=26;break}return e.next=24,fetch("https://api.currconv.com/api/v7/convert?apiKey=8ae78b023a9240049d4d56f97c81020a&q=".concat(l,"_USD&compact=ultra&date=").concat(u.format("YYYY-MM-DD"),"&apiKey=e4dcebf8eb9df2180846")).then((function(e){return e.json()}));case 24:b=e.sent,o=i*b["".concat(l,"_USD")][u.format("YYYY-MM-DD")];case 26:return e.abrupt("return",{baseInvestment:n,quoteInvestment:s,allInQuote:i,allInUsd:o});case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ec=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c,r,n,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseFloat(t.current_price),c=parseFloat(t.investment_base_currency),r=parseFloat(t.investment_quote_currency),n=r+c*a,s=t.pair.split("_")[0],e.next=7,Ze("binance",s,n);case 7:return i=e.sent,e.abrupt("return",{baseInvestment:c,quoteInvestment:r,allInQuote:n,allInUsd:i});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tc=function(e){return e.filter((function(e){return function(e){return Tt(Ge()(),Ge()(e.created_at))}(e)<=720}))},ac=function(e){return e.grid_lines_orders.filter((function(e){return function(e){return Tt(Ge()(),Ge()(e.created_at))}(e)<=720}))},cc=function(e,t,a){var c=y.a.groupBy(e,(function(e){return Ge()(e.created_at).format("YYYY-MM-DD")})),r=y.a.groupBy(t,(function(e){return Ge()(e.updated_at).format("YYYY-MM-DD")})),n=y.a.mapValues(c,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit)})))})),s=y.a.mapValues(r,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.total)})))*a*.01*-1}));return y.a.mergeWith({},n,s,y.a.add)},rc=function(e){return{type:"setNewGridBotsList",payload:e}},nc=function(e){return{type:"setHasMore",payload:e}},sc=function(e){return{type:"addToGridBotsList",payload:e}},ic=function(e,t){return{type:"setGridBot",payload:{gridBotId:e,gridBot:t}}},oc=["Account::BinanceAccount","Accounts::Ftx","Account::HuobiAccount","Account::OkexAccount","Account::KucoinAccount","Account::GateIoAccount","Account::KrakenAccount","Account::BitfinexAccount","Account::BinanceUsAccount","Account::BitstampAccount","Accounts::GeminiAccount","Account::BittrexAccount","Account::GdaxAccount","Account::PaperTradingAccount"];function lc(){return(lc=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,j,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(nc(!0)),t(rc([])),n=a.limit,s=a.filters,i=s.sorting,o=s.account,l=r||n,e.prev=4,u=0,j=!0;case 7:if(!j){e.next=18;break}return e.next=10,U(u,l,i,o,oc);case 10:if(!(b=e.sent).error){e.next=13;break}return e.abrupt("break",18);case 13:t(sc(b)),u+=l,b.length<l&&(j=!1),e.next=7;break;case 18:t(nc(!1)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),t(rc([])),t(nc(!1)),c({type:"addError",payload:"Error when fetching grid bots list"});case 26:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function uc(e,t,a){return dc.apply(this,arguments)}function dc(){return(dc=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],e.prev=2,"initialInvestments"in n&&n.initialInvestments){e.next=10;break}return e.next=6,Xa(n);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.initialInvestments);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching initial investments for grid bot ".concat(n.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function jc(e,t,a){return bc.apply(this,arguments)}function bc(){return(bc=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],e.prev=2,"currentInvestments"in n&&n.currentInvestments){e.next=10;break}return e.next=6,ec(n);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.currentInvestments);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching current investments for grid bot ".concat(n.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function fc(e,t,a){return pc.apply(this,arguments)}function pc(){return(pc=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],e.prev=2,"profits"in n&&n.profits){e.next=10;break}return e.next=6,V(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.profits);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching profits for grid bot ".concat(n.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function hc(e,t,a){return Oc.apply(this,arguments)}function Oc(){return(Oc=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],e.prev=2,"marketOrders"in n&&n.marketOrders){e.next=10;break}return e.next=6,$(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.marketOrders);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(n.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function mc(e,t,a,c){return vc.apply(this,arguments)}function vc(){return(vc=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uc(a,c,r);case 2:return n=e.sent,e.next=5,jc(a,c,r);case 5:return s=e.sent,e.next=8,fc(a,c,r);case 8:return i=e.sent,o=a.gridBots,l=o[r],u=Object(v.a)(Object(v.a)({},l),{},{initialInvestments:n,currentInvestments:s,profits:i}),e.next=14,t(ic(r,u));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xc(){return(xc=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hc(a,c,r);case 2:return n=e.sent,s=a.gridBots,i=s[r],o=Object(v.a)(Object(v.a)({},i),{},{marketOrders:n}),e.next=8,t(ic(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(349),a(350);var yc=function(e){var t=e.values,a=e.investment,n=e.setModalGridBotId,s=Object(c.useContext)(Le).gridBotsState,i=s.list,o=s.gridBots,l=Object(c.useContext)(Ae).accountsState,u=l.accounts,d=l.list,j=Object(ka.a)().t,b=r.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account_id},disableSortBy:!0,Cell:function(e){var t=e.cell.value,a=d.filter((function(e){return e===t}))[0];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(u[a].market_icon,")")}}),Object(h.jsx)("div",{style:{width:"100px"},children:u[a].name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Price range",tipText:j("gridBotPriceRange"),accessor:function(e,t){return"".concat(e.upper_price,"_").concat(e.lower_price,"_").concat(e.grids_quantity," levels")},id:"price_range",disableSortBy:!0,Cell:function(e){var t=e.cell.value.split("_");return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{color:"#00A59A"},children:t[0]}),Object(h.jsx)("div",{style:{color:"#EE7D8B"},children:t[1]}),Object(h.jsx)("div",{style:{fontSize:"12px"},children:t[2]})]})}},{Header:"Start price",accessor:"start_price",disableSortBy:!0},{Header:"Current price",accessor:"current_price",disableSortBy:!0},{Header:"Active orders",tipText:j("gridBotActiveOrders"),accessor:function(e,t){var a=e.grid_lines.length,c=e.grid_lines.filter((function(e){return e.order_placed&&"sell"===e.side})).length,r=e.grid_lines.filter((function(e){return e.order_placed&&"buy"===e.side})).length;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{marginBottom:"3px"},children:Object(h.jsx)(va.a,{style:{fontSize:"14px"},bg:"danger",children:c})}),Object(h.jsx)("div",{style:{marginBottom:"3px"},children:Object(h.jsx)(va.a,{style:{fontSize:"14px"},bg:"success",children:r})}),c+r!==a-1&&Object(h.jsx)("div",{style:{marginBottom:"3px"},children:Object(h.jsx)(wa.a,{placement:"right",overlay:Object(h.jsx)(Ta.a,{id:"tooltip-".concat(e.id),children:"Bot was unable to place all orders on the exchange. This may heavily impact your trading results and PnL reports on this page. Please contact 3commas support to check the error details."}),children:Object(h.jsx)(va.a,{style:{fontSize:"16px"},bg:"warning",children:"\u26a0"})},"right")})]})},id:"activeOrder",disableSortBy:!0},{Header:"Initial investment",tipText:j("gridBotInitialInvestment"),accessor:function(e,c){var r=e.pair.split("_")[0],n=e.pair.split("_")[1];if(e.initialInvestments){if("balances"===a)return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:n}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.initialInvestments.baseInvestment,currency:n})," ").concat(n)})]}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:r}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.initialInvestments.quoteInvestment,currency:r})," ").concat(r)})]})]});var s="usd"===t?"USD":r,i="usd"===t?e.initialInvestments.allInUsd:e.initialInvestments.allInQuote;return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:s}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:i,currency:s})," ").concat(s)})]})}return""},id:"initial_investment",disableSortBy:!0},{Header:"Current investment",tipText:j("gridBotCurrentInvestment"),accessor:function(e,c){var r=e.pair.split("_")[0],n=e.pair.split("_")[1];if(e.currentInvestments){if("balances"===a)return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:n}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.currentInvestments.baseInvestment,currency:n})," ").concat(n)})]}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:r}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.currentInvestments.quoteInvestment,currency:r})," ").concat(r)})]})]});var s="usd"===t?"USD":r,i="usd"===t?e.currentInvestments.allInUsd:e.currentInvestments.allInQuote;return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:s}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:i,currency:s})," ").concat(s)})]})}return""},id:"current_investment",disableSortBy:!0},{Header:"Investment change",accessor:function(e,c){var r=e.pair.split("_")[0];if(e.currentInvestments&&e.initialInvestments){if("balances"===a||"quote"===t){var n=e.currentInvestments.allInQuote-e.initialInvestments.allInQuote;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:"".concat(st({value:n,currency:r})," ").concat(r)})}),Object(h.jsx)("div",{className:n>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:e.initialInvestments.allInQuote?n/e.initialInvestments.allInQuote*100:0,currency:"USD"})," %")})]})}var s=e.currentInvestments.allInUsd-e.initialInvestments.allInUsd;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{children:"".concat(st({value:s,currency:"USD"})," USD")})}),Object(h.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:e.initialInvestments.allInUsd?s/e.initialInvestments.allInUsd*100:0,currency:"USD"})," %")})]})}return""},id:"investment_change",disableSortBy:!0},{Header:"Bot profit",tipText:j("gridBotProfit"),accessor:function(e,c){var r=e.pair.split("_")[0];if(e.profits){if("balances"===a||"quote"===t){var n=y.a.sum(e.profits.map((function(e){return parseFloat(e.profit)}))),s=n/e.initialInvestments.allInQuote*100;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(st({value:n,currency:r})," ").concat(r)}),Object(h.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:s,currency:"USD"})," %")})]})}var i=y.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)}))),o=i/e.initialInvestments.allInUsd*100;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(st({value:i,currency:"USD"})," USD")}),Object(h.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:o,currency:"USD"})," %")})]})}return""},id:"bot_profit",disableSortBy:!0},{Header:"Total PnL",tipText:j("gridBotTotalPnl"),accessor:function(e,c){var r=e.pair.split("_")[0];if(e.profits&&e.currentInvestments&&e.initialInvestments){if("balances"===a||"quote"===t){var n=y.a.sum(e.profits.map((function(e){return parseFloat(e.profit)})))+e.currentInvestments.allInQuote-e.initialInvestments.allInQuote,s=n/e.initialInvestments.allInQuote*100;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(st({value:n,currency:r})," ").concat(r)}),Object(h.jsx)("div",{className:s>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:s,currency:"USD"})," %")})]})}var i=y.a.sum(e.profits.map((function(e){return parseFloat(e.usd_profit)})))+e.currentInvestments.allInUsd-e.initialInvestments.allInUsd,o=i/e.initialInvestments.allInUsd*100;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(st({value:i,currency:"USD"})," USD")}),Object(h.jsx)("div",{className:o>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:o,currency:"USD"})," %")})]})}return""},id:"total_PnL",disableSortBy:!0},{Header:"Stats",Cell:function(e){e.cell.value;return Object(h.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(h.jsx)("img",{className:"stats",src:"stats.png",alt:"stats"})})},id:"stats",disableSortBy:!0}]}),[a,t]),f=Object(ma.useTable)({columns:b,data:i.map((function(e){return o[e]}))}),p=f.getTableProps,O=f.getTableBodyProps,m=f.headerGroups,x=f.rows,g=f.prepareRow,_=function(e){return Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})};return Object(h.jsx)("div",{className:"GridBotsListTable",children:Object(h.jsxs)(qe.a,Object(v.a)(Object(v.a)({hover:!0},p()),{},{children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:m.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.tipText?Object(h.jsx)(wa.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Ta.a,{children:e.tipText}),children:_(e)}):_(e)}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},O()),{},{children:x.map((function(e,t){return g(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){n(e.original.id)},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},gc=a(391),_c=(a(351),a(352),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,n=e.tradingFee,s=e.timeRangeValue,i=Object(c.useContext)(Le).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(c.useState)([[],[]]),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(c.useState)([[],[]]),p=Object(b.a)(f,2),O=p[0],m=p[1],v=function(e){return"".concat(e.dataset.label,": ").concat(st({value:e.parsed.y,currency:o}))};return Object(c.useEffect)((function(){j(function(e,t,a,c,r){var n=cc(e,c,r),s="30d"===a?31:Math.max(It(Ge()(),Ge()(t.created_at))+1,31);return Et(n,s)}(a,i,s,r,n)),m(function(e,t,a,c,r){var n=cc(e,c,r),s="30d"===a?31:Math.max(It(Ge()(),Ge()(t.created_at))+1,31);return Mt(n,s)}(a,i,s,r,n))}),[a,r,n]),Object(h.jsxs)("div",{className:"GridBotDetailsCharts",children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.c,{options:mt("Accumulative Profit, ".concat(o),v),data:{labels:d[0],datasets:[{label:"Accumulative Profit, ".concat(o),data:d[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:Ot("Daily Profit, ".concat(o),v),data:{labels:O[0],datasets:[{label:"Profit, ".concat(o),data:O[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Sc=(a(353),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,n=e.tradingFee,s=e.timeRangeValue,i=Object(c.useContext)(Le).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(c.useState)(0),u=Object(b.a)(l,2),d=u[0],j=u[1],f=Object(c.useState)(0),p=Object(b.a)(f,2),O=p[0],m=p[1],v=Object(c.useState)(0),x=Object(b.a)(v,2),g=x[0],_=x[1],S=Object(c.useState)(0),C=Object(b.a)(S,2),B=C[0],N=C[1];return Object(c.useEffect)((function(){var e=y.a.sum(a.map((function(e){return parseFloat(e.profit)}))),t=e-y.a.sum(r.map((function(e){return parseFloat(e.total)})))*n*.01,c=1,o=(c="30d"===s&&B>30?30:B)?t/c:0,l=i.initialInvestments?i.initialInvestments.allInQuote:0,u=l?100*t/l:0,d=Ge.a.utc(i.created_at),b=i.closed_at?Ge.a.utc(i.closed_at):Ge.a.utc();j(t),m(o),_(u),N(b.diff(d,"days"))}),[i,a,r,n,s]),a&&r&&Object(h.jsxs)(qe.a,{hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Days running"}),Object(h.jsx)("th",{children:"Transactions"}),Object(h.jsx)("th",{children:"Avg. daily"}),Object(h.jsx)("th",{children:"Bot profit"}),Object(h.jsx)("th",{children:"Returns"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:B}),Object(h.jsx)("td",{children:a?a.length:""}),Object(h.jsx)("td",{children:"".concat(st({value:O,currency:o})," ").concat(o)}),Object(h.jsx)("td",{children:"".concat(st({value:d,currency:o})," ").concat(o)}),Object(h.jsx)("td",{children:"".concat(st({value:g,currency:"USD"})," %")})]})})]})}),Cc=[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}],Bc=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,r=e.gridBotId,n=Object(c.useContext)(Le),s=n.gridBotsState,i=n.gridBotsDispatch,o=Object(c.useContext)(Me).errorsDispatch,u=s.gridBots[r],d=Object(c.useState)(0),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(c.useState)("30d"),m=Object(b.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)([]),g=Object(b.a)(y,2),_=g[0],S=g[1],C=Object(c.useState)([]),B=Object(b.a)(C,2),N=B[0],w=B[1],T=Object(c.useState)(null),I=Object(b.a)(T,2),k=I[0],D=I[1],F=Object(l.g)(),A=Object(c.useContext)(Ae).accountsState.accounts;return Object(c.useEffect)((function(){u&&u.profits&&!u.marketOrders&&function(e,t,a,c){return xc.apply(this,arguments)}(i,s,o,r).then(),u&&D(A[u.account_id])}),[u]),Object(c.useEffect)((function(){u&&u.profits&&u.marketOrders&&("30d"===v?(S(ac(u.marketOrders).filter((function(e){return"Filled"===e.status_string}))),w(tc(u.profits))):(S(u.marketOrders.grid_lines_orders.filter((function(e){return"Filled"===e.status_string}))),w(u.profits)))}),[u,v]),Object(h.jsx)(h.Fragment,{children:u&&Object(h.jsxs)(ya.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(h.jsx)(ya.a.Header,{closeButton:!0,children:Object(h.jsxs)(ya.a.Title,{children:["GridBot: ".concat(u.pair.split("_").reverse().join("/")," (ID: ").concat(r,")"),k&&Object(h.jsxs)("div",{style:{display:"flex",fontSize:"14px",marginTop:"4px"},children:["market_icon"in k&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(k.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),F({pathname:"/accounts/".concat(k.id),search:window.location.search})},href:"#",children:k.name})]})]})}),Object(h.jsxs)(ya.a.Body,{children:[Object(h.jsxs)("div",{className:"GridBotsDetailsFilters",children:[Object(h.jsxs)("div",{className:"GridBotListControl",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Time range"}),Object(h.jsx)(Ve.a,{children:Cc.map((function(e,t){return Object(h.jsx)($e.a,{id:"detail-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:v===e.value,onChange:function(e){return x(e.currentTarget.value)},children:e.name},t)}))})]}),Object(h.jsxs)("div",{className:"GridBotListControl",style:{width:"150px",marginLeft:"auto"},children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Trading fee"}),Object(h.jsxs)(gc.a,{children:[Object(h.jsx)(Qe.a,{onChange:function(e){e.target.value>=0&&e.target.value<=100&&p(e.target.value)},value:f,type:"number"}),Object(h.jsx)(gc.a.Text,{children:"%"})]})]})]}),Object(h.jsx)(Sc,{gridBotId:r,profits:N,marketOrders:_,tradingFee:f,timeRangeValue:v}),Object(h.jsx)(_c,{gridBotId:r,profits:N,marketOrders:_,tradingFee:f,timeRangeValue:v})]})]})})},Nc=(a(354),function(){var e=Object(c.useContext)(Le),t=e.gridBotsState,a=(e.gridBotsDispatch,t.list),r=t.hasMore,n=t.gridBots,s=Object(c.useState)(0),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(0),d=Object(b.a)(u,2),j=d[0],f=d[1],p=Object(c.useState)(0),O=Object(b.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)(!0),g=Object(b.a)(x,2),_=g[0],S=g[1];return Object(c.useEffect)((function(){if(!r){var e=a.every((function(e){return n[e].initialInvestments})),t=a.every((function(e){return n[e].currentInvestments})),c=a.every((function(e){return n[e].profits}));if(a&&e&&c&&t){var s=y.a.sum(a.map((function(e){return n[e].initialInvestments.allInUsd}))),i=y.a.sum(a.map((function(e){return n[e].currentInvestments.allInUsd}))),o=y.a.sum(a.map((function(e){return y.a.sum(n[e].profits.map((function(e){return parseFloat(e.usd_profit)})))})));S(!1),l(s),f(o),v(o+i-s)}}}),[a,r,n]),_?Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(Te.a,{animation:"grow"})}):Object(h.jsx)("div",{className:"GridBotListMetrics",children:Object(h.jsxs)("div",{className:"GridBotListMetricsContainer",children:[Object(h.jsxs)("div",{className:"GridBotListMetric",children:[Object(h.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Investment"}),Object(h.jsx)("div",{className:"GridBotListMetricBody",children:"".concat(st({value:o,currency:"USD"})," $")})]}),Object(h.jsxs)("div",{className:"GridBotListMetric",children:[Object(h.jsx)("div",{className:"GridBotListMetricHeader",children:"Total Bot Profits"}),Object(h.jsx)("div",{className:"GridBotListMetricBody ".concat(j>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(st({value:j,currency:"USD"})," $")})]}),Object(h.jsxs)("div",{className:"GridBotListMetric",children:[Object(h.jsx)("div",{className:"GridBotListMetricHeader",children:"Total PnL"}),Object(h.jsx)("div",{className:"GridBotListMetricBody ".concat(m>=0?"PositiveNumber":"NegativeNumber"),children:"".concat(st({value:m,currency:"USD"})," $")})]})]})})}),wc=[{name:"Value",value:"value"},{name:"Balances",value:"balances"}],Tc=[{name:"USD",value:"usd"},{name:"Quote",value:"quote"}],Ic=function(){var e=Object(c.useContext)(Le),t=e.gridBotsState,a=e.gridBotsDispatch,r=t.list,n=t.hasMore,s=t.filters,i=Object(c.useContext)(Ae).accountsState,o=i.accounts,l=i.list,u=Object(c.useContext)(Me).errorsDispatch,p=Object(c.useState)("value"),O=Object(b.a)(p,2),m=O[0],x=O[1],y=Object(c.useState)("usd"),g=Object(b.a)(y,2),_=g[0],S=g[1],C=Object(c.useState)(""),B=Object(b.a)(C,2),N=B[0],w=B[1],T=function(){var e=Object(j.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setGridBotsFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=!n&&0===r.length,k=[{value:"",label:"All spot accounts",label_id:"All"}].concat(Object(f.a)(l.filter((function(e){return ct(o[e].market_code)})).map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(o[e].market_icon,")")}})}),Object(h.jsx)("span",{children:o[e].name})]}),label_id:o[e].name}}))));return Object(c.useEffect)((function(){(function(e,t,a,c){return lc.apply(this,arguments)})(a,t,u).then()}),[s]),Object(c.useEffect)((function(){if(!n){var e,c=Object(Qa.a)(r);try{for(c.s();!(e=c.n()).done;){var s=e.value;mc(a,t,u,s).then()}}catch(i){c.e(i)}finally{c.f()}}}),[n,r]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Nc,{}),Object(h.jsxs)("div",{className:"GridBotsFilters",children:[Object(h.jsxs)("div",{className:"GridBotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(wt.a,{onChange:function(e){T({account:e.value})},value:k.find((function(e){return e.value===s.account})),options:k,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"GridBotListControl",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Investment"}),Object(h.jsx)(Ve.a,{id:"foo",children:wc.map((function(e,t){return Object(h.jsx)($e.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioInvestment",value:e.value,checked:m===e.value,onChange:function(e){x(e.currentTarget.value)},children:e.name},e.value)}))})]}),"value"===m&&Object(h.jsxs)("div",{className:"GridBotListControl",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Show values in"}),Object(h.jsx)(Ve.a,{id:"bar",children:Tc.map((function(e,t){return Object(h.jsx)($e.a,{id:"radio-".concat(e.value),type:"radio",variant:"outline-primary",name:"radioValues",value:e.value,checked:_===e.value,onChange:function(e){return S(e.currentTarget.value)},children:e.name},e.value)}))})]})]}),I?Object(h.jsx)("div",{className:"FallbackContainer",children:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"No results found =("})})}):Object(h.jsxs)("div",{className:"GridBotsList",children:[Object(h.jsx)(yc,{values:_,investment:m,setModalGridBotId:w}),!!N&&Object(h.jsx)(Bc,{modalIsOpen:!!N,setModalIsOpen:w,gridBotId:N})]})]})},kc=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Ic,{})})},Dc=function(e){return{type:"setNewSmartTradesList",payload:e}},Fc=function(e){return{type:"setHasMore",payload:e}},Ac=function(e){return{type:"addToSmartTradesList",payload:e}},Pc=function(e,t){return{type:"setSmartTrade",payload:{smartTradeId:e,smartTrade:t}}};function Mc(){return(Mc=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,j,b,f,p,h,O,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Fc(!0)),t(Dc([])),n=a.limit,s=a.filters,i=s.sorting,o=s.accountId,l=s.type,u=s.pair,j=s.status,b=s.from,f=r||n,p=Je(b),e.prev=5,h=!0,O=1;case 8:if(!h){e.next=19;break}return e.next=11,Y(O,f,i,o,l,u,j,p);case 11:if(!(m=e.sent).error){e.next=14;break}return e.abrupt("break",19);case 14:t(Ac(m)),O+=1,m.length<f&&(h=!1),e.next=8;break;case 19:t(Fc(!1)),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(5),t(Dc([])),t(Fc(!1)),c({type:"addError",payload:"Error when fetching smart trades list"});case 27:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}function Ec(e,t,a){return Lc.apply(this,arguments)}function Lc(){return(Lc=Object(j.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.smartTrades,n=r[c],e.prev=2,"trades"in n&&n.trades){e.next=10;break}return e.next=6,G(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.trades);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(n.id)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Rc(){return(Rc=Object(j.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ec(a,c,r);case 2:return n=e.sent,s=a.smartTrades,i=s[r],o=Object(v.a)(Object(v.a)({},i),{},{trades:n}),e.next=8,t(Pc(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(355),a(356),a(357);var Hc=function(e){var t=e.smartTradeId,a=Object(c.useContext)(Re).smartTradesState.smartTrades[t];return Object(h.jsx)("div",{className:"SmartTradeDetailsStatusTable",children:a&&Object(h.jsxs)(qe.a,{striped:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Average entry"}),Object(h.jsx)("th",{children:"Average close"}),Object(h.jsx)("th",{children:"Current price"}),Object(h.jsx)("th",{children:"PnL, $"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(h.jsx)("td",{children:"".concat("smart_sell"===a.data.type||"smart_buy"===a.data.type?a.position.price.value:a.data.average_enter_price)}),Object(h.jsx)("td",{children:"".concat(a.data.average_close_price?a.data.average_close_price:"")}),Object(h.jsx)("td",{children:"".concat(a.data.current_price?a.data.current_price.last:"")}),Object(h.jsx)("td",{children:a.profit.usd?Object(h.jsx)(va.a,{bg:a.profit.usd>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(st({value:a.profit.usd,currency:"USD"}),"$")}):""})]})})]})})},Uc=(a(358),function(e){e.smartTradeId;var t=e.trades,a={less:"<",less_or_equal:"<=",greater_or_equal:">=",greater:">"};return t&&Object(h.jsx)("div",{className:"SmartTradeDetailsTable",children:Object(h.jsxs)(qe.a,{striped:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Order"}),Object(h.jsx)("th",{children:"Price"}),Object(h.jsx)("th",{children:"Amount"}),Object(h.jsx)("th",{children:"Total"}),Object(h.jsx)("th",{children:"Trigger"}),Object(h.jsx)("th",{children:"Trailing"}),Object(h.jsx)("th",{children:"Status"}),Object(h.jsx)("th",{children:"Created"}),Object(h.jsx)("th",{children:"Updated"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(h.jsx)("td",{children:"".concat(e.order_type," ").concat(e.order_side)}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_price?e.initial_price:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_price?e.realised_price:"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_amount?e.initial_amount:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_amount?e.realised_amount:"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_total?e.initial_total:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_total?e.realised_total:"")})]}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.trigger_condition?a[e.trigger_condition]:""," ").concat(e.trigger_price?e.trigger_price:"")})}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.trail_value?e.trail_value:""," ").concat(e.trail_percentage?"(".concat(e.trail_percentage,"%)"):"")})}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.status?e.status:"")})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"".concat(e.updated_at?Ge()(e.created_at).format("DD/MM/YYYY"):"")}),Object(h.jsx)("div",{children:"".concat(e.updated_at?Ge()(e.created_at).format("HH:mm"):"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"".concat(e.updated_at?Ge()(e.updated_at).format("DD/MM/YYYY"):"")}),Object(h.jsx)("div",{children:"".concat(e.updated_at?Ge()(e.updated_at).format("HH:mm"):"")})]})]},e.id)}))})]})})}),Yc=[{name:"Position",value:"position"},{name:"Take profit",value:"take_profit"},{name:"Reduce funds",value:"reduce_funds"},{name:"Stop loss",value:"stop_loss"},{name:"Panic",value:"panic"},{name:"All",value:""}],Gc=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,r=e.smartTradeId,n=Object(c.useContext)(Re),s=n.smartTradesState,i=n.smartTradesDispatch,o=s.smartTrades[r],u=Object(c.useContext)(Me).errorsDispatch,d=Object(c.useState)(""),j=Object(b.a)(d,2),f=j[0],p=j[1],O=Object(c.useState)([]),m=Object(b.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)(null),g=Object(b.a)(y,2),_=g[0],S=g[1],C=Object(l.g)(),B=Object(c.useContext)(Ae).accountsState.accounts;return Object(c.useEffect)((function(){r&&function(e,t,a,c){return Rc.apply(this,arguments)}(i,s,u,r).then()}),[r]),Object(c.useEffect)((function(){o&&o.trades&&x(o.trades),o&&S(B[o.account.id])}),[o]),Object(c.useEffect)((function(){f?x(o.trades.filter((function(e){return e.trade_purpose===f}))):o&&o.trades&&x(o.trades)}),[f]),Object(h.jsx)(h.Fragment,{children:o&&Object(h.jsxs)(ya.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(h.jsx)(ya.a.Header,{closeButton:!0,children:Object(h.jsxs)(ya.a.Title,{children:["".concat(o.pair.split("_").reverse().join("/")," (Trade ID: ").concat(r,")"),_&&Object(h.jsxs)("div",{style:{display:"flex",fontSize:"14px",marginTop:"4px"},children:["market_icon"in _&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(_.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),C({pathname:"/accounts/".concat(_.id),search:window.location.search})},href:"#",children:_.name})]})]})}),Object(h.jsxs)(ya.a.Body,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(h.jsx)(Hc,{smartTradeId:r})}),Object(h.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(h.jsx)(Ve.a,{children:Yc.map((function(e,t){return Object(h.jsx)($e.a,{id:"detail-position-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio-detail-position",value:e.value,checked:f===e.value,onChange:function(e){return p(e.currentTarget.value)},children:e.name},t)}))})})]}),v&&Object(h.jsx)(Uc,{smartTradeId:r,trades:v})]})]})})},zc=function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,(function(e){return Ge()(e.data.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))}))},Vc=(a(359),function(){var e=Object(c.useContext)(Re).smartTradesState,t=e.list,a=e.hasMore,r=e.smartTrades,n=e.filters,s=Object(c.useState)([[],[]]),i=Object(b.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([[],[]]),d=Object(b.a)(u,2),j=d[0],f=d[1],p=Object(c.useState)([[],[]]),O=Object(b.a)(p,2),m=O[0],v=O[1],x=function(e){return"".concat(e.dataset.label,": ").concat(st({value:e.parsed.y,currency:"USD"}))};return Object(c.useEffect)((function(){l(function(e,t){var a=Je(t),c=zc(e);if(a)return Et(c,It(Ge()(),Ge()(a)));var r=Ge.a.min(y.a.keys(c).map((function(e){return Ge()(e)})));return Et(c,It(Ge()(),r))}(t.map((function(e){return r[e]})),n.from)),f(function(e,t){var a=Je(t),c=zc(e);if(a)return Mt(c,It(Ge()(),Ge()(a)));var r=Ge.a.min(y.a.keys(c).map((function(e){return Ge()(e)})));return Mt(c,It(Ge()(),r))}(t.map((function(e){return r[e]})),n.from)),v(function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,"pair"),c=y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))})),r=y()(c).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[r.map((function(e){return e[0].split("_").reverse().join("/")})),r.map((function(e){return e[1]}))]}(t.map((function(e){return r[e]}))))}),[t]),a?Object(h.jsx)("div",{className:"SmartTradesChartsSpiner",children:Object(h.jsx)(Te.a,{animation:"grow"})}):Object(h.jsxs)("div",{className:"SmartTradesCharts",children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.c,{options:mt("Accumulative Profit, $",x),data:{labels:o[0],datasets:[{label:"Accumulative Profit, $",data:o[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:Ot("Daily Profit, $",x),data:{labels:j[0],datasets:[{label:"Profit, $",data:j[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(lt.a,{options:xt("Pairs leaderboard by profit",m[0]),data:{labels:m[0],datasets:[{label:"Profit, $",data:m[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),$c=(a(360),[{name:"Today",value:"today"},{name:"Week",value:"week"},{name:"Month",value:"month"},{name:"All time",value:"allTime"},{name:"Custom",value:"custom"}]),qc=function(){var e=Object(c.useContext)(Re),t=e.smartTradesState,a=e.smartTradesDispatch,r=Object(c.useContext)(Ae).accountsState,n=r.accounts,s=r.list,i=t.filters,o=t.hasMore,l=t.list,u=function(){var e=Object(j.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setSmartTradesFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(s.map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(n[e].market_icon,")")}})}),Object(h.jsx)("span",{children:n[e].name})]}),label_id:n[e].name}})))),p=[{value:"",label:"All"},{value:"simple_buy",label:"Simple buy"},{value:"simple_sell",label:"Simple sell"},{value:"smart_sell",label:"Smart sell"},{value:"smart_cover",label:"Smart cover"},{value:"smart_buy",label:"Smart buy"},{value:"smart_trade",label:"Smart trade"}],O=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"finished",label:"Finished"},{value:"successfully_finished",label:"Successfully finished"},{value:"cancelled",label:"Cancelled"},{value:"failed",label:"Failed"}],m=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"profit_percentage-desc",label:"Profit percentage (Highest First)"},{value:"profit_percentage-asc",label:"Profit percentage (Lowest First)"},{value:"created_at-desc",label:"Opened (Youngest first)"},{value:"created_at-asc",label:"Opened (Oldest first)"},{value:"closed_at-desc",label:"Closed (Youngest first)"},{value:"closed_at-asc",label:"Closed (Oldest first)"},{value:"status-desc",label:"Status (Highest First)"},{value:"status-asc",label:"Status (Lowest First)"}];return Object(c.useEffect)((function(){try{localStorage.setItem("smartTradesFiltersState",JSON.stringify(i))}catch(e){}}),[i]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"SmartTradesFilters",children:[Object(h.jsx)("div",{className:"SmartTradesTimeRangeContainer",children:Object(h.jsx)(Ve.a,{children:$c.map((function(e,t){return Object(h.jsx)($e.a,{id:"radio-".concat(t),type:"radio",disabled:o,variant:"outline-primary",name:"radio",value:e.value,checked:i.from.label===e.value,onChange:function(e){u({from:Object(v.a)(Object(v.a)({},i.from),{},{label:e.currentTarget.value})})},children:e.name},t)}))})}),"custom"===i.from.label&&Object(h.jsxs)("div",{className:"SmartTradesTimeRangeContainer",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"From"}),Object(h.jsx)(ht.a,{dateFormat:"yyyy-MM-dd",disabled:o,selected:i.from.from?Ge()(i.from.from).toDate():Ge()().toDate(),onChange:function(e){u({from:{label:"custom",from:Ge()(e).format("YYYY-MM-DD")}})},selectsStart:!0,className:"SmartTradesDateFilter",strictParsing:!0})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(wt.a,{isDisabled:o,onChange:function(e){u({accountId:e.value})},value:b.find((function(e){return e.value===i.accountId})),options:b,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(h.jsx)(wt.a,{isDisabled:o,onChange:function(e){u({status:e.value})},value:O.find((function(e){return e.value===i.status})),options:O,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Type"}),Object(h.jsx)(wt.a,{isDisabled:o,onChange:function(e){u({type:e.value})},value:p.find((function(e){return e.value===i.type})),options:p,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(h.jsx)(wt.a,{isDisabled:o,onChange:function(e){u({sorting:e.value})},value:m.find((function(e){return e.value===i.sorting})),options:m,className:"Sorting"})]})]}),!o&&Object(h.jsx)("div",{className:"SmartTradesFilters",children:"Total: ".concat(l.length)})]})},Qc=(a(361),a(362),{simple_buy:"Simple Buy",simple_sell:"Simple Sell",smart_sell:"Smart Sell",smart_trade:"Smart Trade",smart_cover:"Smart Cover",smart_buy:"Smart Buy"}),Kc=function(e){var t=e.setModalSmartTradeId,a=Object(c.useContext)(Re).smartTradesState,n=a.list,s=a.smartTrades,i=Object(c.useContext)(Ae).accountsState,o=i.accounts,l=i.list,u=r.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account.id},disableSortBy:!0,Cell:function(e){var t=e.cell.value,a=l.filter((function(e){return e===t}))[0];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(o[a].market_icon,")")}}),Object(h.jsx)("div",{style:{width:"100px"},children:o[a].name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Side",accessor:function(e,t){return"buy"===e.position.type?"LONG":"SHORT"},id:"side",disableSortBy:!0},{Header:"Type",accessor:function(e,t){return Qc[e.data.type]},id:"type",disableSortBy:!0},{Header:"Status",accessor:function(e,t){return e.status.title},id:"status",disableSortBy:!0},{Header:"PnL, %",accessor:function(e,t){var a=parseFloat(e.profit.percent);return a?Object(h.jsx)("div",{className:a>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:a,currency:"USD"}),"%")}):""},id:"pnl_percent",disableSortBy:!0},{Header:"PnL",accessor:function(e,t){var a=e.pair.split("_")[0],c=parseFloat(e.profit.volume);return c?Object(h.jsx)("div",{className:c>=0?"PositiveNumber":"NegativeNumber",children:"".concat(st({value:c,currency:a})," ").concat(a)}):""},id:"pnl_quote",disableSortBy:!0},{Header:"PnL, $",accessor:function(e,t){var a=parseFloat(e.profit.usd);return a?Object(h.jsx)(va.a,{bg:a>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(st({value:a,currency:"USD"}),"$")}):""},id:"pnl_usd",disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],c=e.pair.split("_")[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:c}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.position.units.value,currency:c})," ").concat(c)})]}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Ia,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(st({value:e.position.total.value,currency:a})," ").concat(a)})]})]})},id:"volume",disableSortBy:!0},{Header:"Margin and Leverage",accessor:function(e,t){var a=e.pair.split("_")[1];return e.leverage.enabled?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsx)("div",{children:"".concat(st({value:e.margin.total,currency:a})," ").concat(a)})}),Object(h.jsx)("div",{style:{display:"flex"},children:e.leverage&&Object(h.jsx)("div",{children:"x".concat(Math.floor(e.leverage.value)," ").concat(e.leverage.type)})})]}):""},id:"margin",disableSortBy:!0},{Header:"Created at",accessor:function(e,t){var a=Ge()(e.data.created_at);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(h.jsx)("div",{children:a.format("HH:mm")})]})},id:"created_at",disableSortBy:!0},{Header:"Closed at",accessor:function(e,t){var a=Ge()(e.data.closed_at);return e.data.closed_at&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(h.jsx)("div",{children:a.format("HH:mm")})]})},id:"closed_at",disableSortBy:!0}]}),[]),d=Object(ma.useTable)({columns:u,data:n.map((function(e){return s[e]}))}),j=d.getTableProps,b=d.getTableBodyProps,f=d.headerGroups,p=d.rows,O=d.prepareRow;return Object(h.jsx)("div",{className:"SmartTradesTable",children:Object(h.jsxs)(qe.a,Object(v.a)(Object(v.a)({hover:!0},j()),{},{children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:f.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},b()),{},{children:p.map((function(e,a){return O(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){t(e.original.id)},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},Wc=function(){var e=Object(c.useState)(""),t=Object(b.a)(e,2),a=t[0],r=t[1];return Object(h.jsxs)("div",{className:"SmartTradesList",children:[Object(h.jsx)(Vc,{}),Object(h.jsx)(qc,{}),Object(h.jsx)(Kc,{setModalSmartTradeId:r}),!!a&&Object(h.jsx)(Gc,{modalIsOpen:!!a,setModalIsOpen:r,smartTradeId:a})]})},Jc=function(){var e=Object(c.useContext)(Re),t=e.smartTradesState,a=e.smartTradesDispatch,r=Object(c.useContext)(Me).errorsDispatch,n=t.filters;return Object(c.useEffect)((function(){(function(e,t,a,c){return Mc.apply(this,arguments)})(a,t,r).then()}),[n]),Object(h.jsx)("div",{className:"SmartTrades",children:Object(h.jsx)(Wc,{})})},Zc=function(){return Object(h.jsx)(l.d,{children:Object(h.jsxs)(l.b,{path:"/",element:Object(h.jsx)(Ue,{}),children:[Object(h.jsx)(l.b,{index:!0,element:Object(h.jsx)(Ja,{})}),Object(h.jsx)(l.b,{path:":botId",element:Object(h.jsx)(Va,{})}),Object(h.jsx)(l.b,{path:"/gridbots",element:Object(h.jsx)(kc,{})}),Object(h.jsx)(l.b,{path:"/smarttrades",element:Object(h.jsx)(Jc,{})}),Object(h.jsx)(l.b,{path:"/accounts",element:Object(h.jsx)(Bt,{})}),Object(h.jsx)(l.b,{path:"/accounts/:accountId",element:Object(h.jsx)(_t,{})})]})})},Xc=a(186),er=a(118),tr=a(203);Xc.a.use(tr.a).use(er.e).init({fallbackLng:"en",debug:!0,lng:"en",interpolation:{escapeValue:!1}});Xc.a;s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(o.a,{children:Object(h.jsx)(Zc,{})})}),document.getElementById("root")),i()}},[[363,1,2]]]);
//# sourceMappingURL=main.b2d0783e.chunk.js.map