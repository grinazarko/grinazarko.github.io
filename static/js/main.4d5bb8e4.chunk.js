(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(23),s=n.n(r),o=(n(55),n(6)),i=n(4),u=n(9),l=(n(56),n(25)),d=(n(57),n(1)),b=function(){var e=Object(a.useContext)(Y),t=e.filtersState,n=e.filtersDispatch,c=Object(a.useContext)(J).accountsState.accounts,r=[{value:"",label:"All"}].concat(Object(u.a)(c.map((function(e){return{value:e.id,label:Object(d.jsxs)("div",{className:"AccountFilterItem",children:[Object(d.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(e.market_icon,")")}}),e.name]})}})))),s=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],o=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],i=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(d.jsxs)("div",{className:"BotsFilters",children:[Object(d.jsxs)("div",{className:"BotsFilterGroup",children:[Object(d.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(d.jsx)(l.a,{onChange:function(e){n({type:"setAccount",payload:e.value})},value:r.find((function(e){return e.value===t.account})),options:r,className:"AccountFilter"})]}),Object(d.jsxs)("div",{className:"BotsFilterGroup",children:[Object(d.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(d.jsx)(l.a,{onChange:function(e){n({type:"setScope",payload:e.value})},value:s.find((function(e){return e.value===t.scope})),options:s,className:"ScopeFilter"})]}),Object(d.jsxs)("div",{className:"BotsFilterGroup",children:[Object(d.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(d.jsx)(l.a,{onChange:function(e){n({type:"setType",payload:e.value})},value:o.find((function(e){return e.value===t.type})),options:o,className:"TypeFilter"})]}),Object(d.jsxs)("div",{className:"BotsFilterGroup",children:[Object(d.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(d.jsx)(l.a,{onChange:function(e){n({type:"setSorting",payload:e.value})},value:i.find((function(e){return e.value===t.sorting})),options:i,className:"Sorting"})]})]})},j=n(28),f=n.n(j),p=n(49),h=new(n.n(p).a)({reservoir:15,reservoirRefreshAmount:15,reservoirRefreshInterval:1e3});function O(e,t){return f.a.algo.HMAC.create(f.a.algo.SHA256,t).update(e).finalize().toString(f.a.enc.Hex)}var v=function(e,t){var n=new URLSearchParams(window.location.search).get("api_key")||"",a=new URLSearchParams(window.location.search).get("secret")||"";return h.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:n,Signature:O(t,a)}})}))},x=n(121),m=n(122),_=n(124),g=(n(117),n(5)),y=n.n(g),N=n(16);function S(){return(S=Object(N.a)(y.a.mark((function e(t,n){var a,c,r,s,o,i,u,l,d,b,j,f,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n.id){e.next=2;break}return e.abrupt("return",0);case 2:if(a=parseInt(t.max_active_deals),c=parseFloat(t.base_order_volume),r=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),o=parseFloat(t.leverage_custom_value),i=parseFloat(t.martingale_volume_coefficient),u=t.pairs[0].split("_")[0],l=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,k(n.market_code,u,c,s);case 13:d=e.sent,c=d.baseOrderVolume,s=d.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,k(n.market_code,l,c,s);case 21:b=e.sent,c=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,F(t.account_id,u,l,n.market_code,t.strategy,c,s);case 29:j=e.sent,c=j.baseOrderVolume,s=j.safetyOrderVolume;case 32:return o&&(c/=o,s/=o),f=0,1!==i&&r>1?(p=s*(1-Math.pow(i,r))/(1-i),f=(p+c)*a):f=(r*s+c)*a,e.abrupt("return",f);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(){var e=Object(N.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(1));case 4:return e.next=6,v("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(n)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(N.a)(y.a.mark((function e(t,n,a,c){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n);case 2:return r=e.sent,e.abrupt("return",{baseOrderVolume:a*r,safetyOrderVolume:c*r});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a,c){return e.apply(this,arguments)}}(),F=function(){var e=Object(N.a)(y.a.mark((function e(t,n,a,c,r,s,o){var i,u,l,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=I(c)&&"short"===r?a:n,e.next=3,v("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return u=e.sent,l=u.find((function(e){return e.currency_code===i})),d=0,l&&(d=(parseFloat(l.equity)-parseFloat(l.on_orders))*parseFloat(l.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*d/100,safetyOrderVolume:o*d/100});case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,c,r,s,o){return e.apply(this,arguments)}}(),I=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)},C=function(e){return t=new Date,n=new Date(e.closed_at),Math.floor((t.getTime()-n.getTime())/36e5);var t,n};function B(e,t){var n=parseFloat(e.leverage_custom_value);return n?t/n:t}var T=function(){var e=Object(N.a)(y.a.mark((function e(t){var n,a,c,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1e3,a=0,c=[],r=function(){var e=Object(N.a)(y.a.mark((function e(){var s,i,l,d;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(n,"&scope=finished&order=closed_at")).then((function(e){return e.json()}));case 2:if(s=e.sent,i=s.slice(-1),l=Object(o.a)(i,1),d=l[0],!(s.length===n&&C(d)<=720)){e.next=11;break}return a+=n,c=[].concat(Object(u.a)(c),Object(u.a)(s)),e.next=9,r();case 9:e.next=12;break;case 11:c=[].concat(Object(u.a)(c),Object(u.a)(s));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=6,r();case 6:return e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function A(){return(A=Object(N.a)(y.a.mark((function e(t,n){var a,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",0);case 2:return e.next=4,T(n);case 4:return a=e.sent,c=a.filter((function(e){return C(e)<=720})).reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit,e.abrupt("return",c/t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R={nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TradingView Screener",rsi:"RSI-3m-20",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping"},D=function(e){var t=e.botItem,n=e.account,c=Object(a.useState)({profits_in_usd:{funds_locked_in_active_deals:0,today_usd_profit:0,overall_usd_profit:0}}),r=Object(o.a)(c,2),s=r[0],i=r[1];Object(a.useEffect)((function(){v("GET","/public/api/ver1/bots/stats?bot_id=".concat(t.id)).then((function(e){return e.json()})).then((function(e){i(e)}))}),[]);var u=Object(a.useState)(0),l=Object(o.a)(u,2),b=l[0],j=l[1];Object(a.useEffect)((function(){(function(e,t){return S.apply(this,arguments)})(t,n).then((function(e){j(e)}))}),[n,t]);var f,p,h=Object(a.useState)(NaN),O=Object(o.a)(h,2),m=O[0],_=O[1],g=(f=new Date,p=new Date(t.created_at),Math.floor((f.getTime()-p.getTime())/864e5)),y=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),N=t.strategy_list[0].strategy;return t.strategy_list.length>1?N="Combined":N in R&&(N=R[N]),Object(d.jsx)("div",{className:"BotPreview",children:Object(d.jsxs)("div",{className:"BotPreviewRow",children:[Object(d.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:[Object(d.jsx)(L,{botType:t.type,strategy:t.strategy,botId:t.id,marketIcon:n.market_icon}),Object(d.jsx)(E,{strategy:t.strategy,age:g,is_enabled:t.is_enabled}),Object(d.jsx)("div",{className:"BotReturns",children:Object(d.jsx)(M,{returns:m,setReturns:_,maxUsage:b,botId:t.id})})]}),Object(d.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(d.jsx)(P,{name:t.name}),Object(d.jsx)(x.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(d.jsxs)("tbody",{children:[Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(d.jsx)("td",{children:n.name})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(d.jsx)("td",{children:t.id})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(d.jsx)("td",{children:N})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(d.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(d.jsx)("td",{children:y.format(s.profits_in_usd.today_usd_profit)})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(d.jsx)("td",{children:y.format(t.finished_deals_profit_usd)})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"}),Object(d.jsx)("td",{children:"".concat(y.format(B(t,s.profits_in_usd.funds_locked_in_active_deals)),"/").concat(y.format(b))})]}),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"}),Object(d.jsx)("td",{children:y.format(t.active_deals_usd_profit)})]})]})})]})]})})},L=function(e){var t=e.botType,n=e.strategy,a=e.botId,c=e.marketIcon;return Object(d.jsxs)("div",{className:"IconsSetContainer",children:[Object(d.jsx)("div",{className:"BotTypeIconContainer",children:"Bot::SingleBot"===t?"S":"M"}),Object(d.jsx)("div",{className:"BotMarketIconContainer",children:Object(d.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(c,")")}})}),Object(d.jsx)("div",{className:"RobotsIconContainer",children:Object(d.jsx)("img",{src:"/robotsIcons/robots-vector-free-icon-set-".concat("short"===n?"2":"3").concat(String(a).slice(-1),".png"),alt:"logo",className:"RobotsIcon"})})]})},P=function(e){var t=e.name;return Object(d.jsx)("div",{className:"BotNameContainer",children:Object(d.jsx)("span",{className:"BotName",children:t})})},E=function(e){var t=e.strategy,n=e.age,a=e.is_enabled;return Object(d.jsxs)("div",{className:"BotInfoContainer",children:[Object(d.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(d.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(d.jsx)(m.a,{bg:"success",children:"Long"}):Object(d.jsx)(m.a,{bg:"danger",children:"Short"})]}),Object(d.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(d.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(d.jsx)("div",{className:"BotInfoValue",children:"".concat(n," days")})]}),!a&&Object(d.jsx)("div",{className:"BotInfoRecordContainer",children:Object(d.jsx)(m.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},M=function(e){var t=e.returns,n=e.setReturns,a=e.maxUsage,c=e.botId,r=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"});return Object(d.jsxs)("div",{className:"BotReturnsContainer",children:[!isNaN(t)&&Object(d.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(r.format(t||0))}),Object(d.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),isNaN(t)&&Object(d.jsx)(_.a,{onClick:function(){(function(e,t){return A.apply(this,arguments)})(a,c).then((function(e){n(e)}))},variant:"link",size:"sm",active:!0,children:"Calculate"})]})},V=n(50),G=(n(118),n(123)),U=function(){var e=Object(a.useContext)(Y).filtersState,t=Object(a.useContext)(J).accountsState.accounts,n=Object(a.useState)([]),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(0),l=Object(o.a)(i,2),b=l[0],j=l[1],f=Object(a.useState)(!0),p=Object(o.a)(f,2),h=p[0],O=p[1],x=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"/public/api/ver1/bots?offset=".concat(t?0:b,"&limit=").concat(10,"&sort_by=").concat(e.sorting.split("-")[0],"&sort_direction=").concat(e.sorting.split("-")[1]).concat(e.scope?"&scope=".concat(e.scope):"").concat(e.type?"&strategy=".concat(e.type):"").concat(e.account?"&account_id=".concat(e.account):"")};return Object(a.useEffect)((function(){O(!0),v("GET",x(!0)).then((function(e){return e.json()})).then((function(e){s(e),j(10),e.length<10&&O(!1)}))}),[e]),!h&&10===b?Object(d.jsx)("div",{className:"FallbackContainer",children:Object(d.jsx)("p",{style:{textAlign:"center"},children:Object(d.jsx)("b",{children:"No results found =("})})}):Object(d.jsx)(V.a,{dataLength:r.length,next:function(){return v("GET",x()).then((function(e){return e.json()})).then((function(e){0===e.length&&O(!1),j((function(e){return e+10})),s((function(t){return[].concat(Object(u.a)(t),Object(u.a)(e))}))}))},hasMore:h,loader:Object(d.jsx)("div",{className:"SpinnerContainer",children:Object(d.jsx)(G.a,{animation:"grow"})}),endMessage:Object(d.jsx)("p",{style:{textAlign:"center"},children:Object(d.jsx)("b",{children:"Yay! You have seen it all"})}),children:Object(d.jsx)("div",{className:"BotsList",children:t.length>0&&r.map((function(e){return Object(d.jsx)(D,{botItem:e,account:(n=e.account_id,t.find((function(e){return e.id===n})))},e.id);var n}))})})},W={scope:"",type:"",account:"",sorting:"created_at-desc"},q={accounts:[]};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;if("setAccounts"===t.type)return{accounts:[].concat(Object(u.a)(e.accounts),Object(u.a)(t.payload))};throw new Error}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setScope":return Object(i.a)(Object(i.a)({},e),{},{scope:t.payload});case"setAccount":return Object(i.a)(Object(i.a)({},e),{},{account:t.payload});case"setType":return Object(i.a)(Object(i.a)({},e),{},{type:t.payload});case"setSorting":return Object(i.a)(Object(i.a)({},e),{},{sorting:t.payload});default:throw new Error}}var Y=Object(a.createContext)({filtersState:W,filtersDispatch:function(e){}}),J=Object(a.createContext)({accountsState:q,accountsDispatch:function(e){}});var Q=function(){var e=Object(a.useReducer)(H,W),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useReducer)(z,q),s=Object(o.a)(r,2),i=s[0],u=s[1];return Object(a.useEffect)((function(){v("GET","/public/api/ver1/accounts").then((function(e){return e.json()})).then((function(e){u({type:"setAccounts",payload:e})}))}),[]),Object(d.jsx)(J.Provider,{value:{accountsState:i,accountsDispatch:u},children:Object(d.jsx)(Y.Provider,{value:{filtersState:n,filtersDispatch:c},children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(b,{}),Object(d.jsx)(U,{})]})})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};n(119);s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(Q,{})}),document.getElementById("root")),K()},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},74:function(e,t){}},[[120,1,2]]]);
//# sourceMappingURL=main.4d5bb8e4.chunk.js.map